<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Big Data en R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="Big Data en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/EST-383" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Big Data en R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-05-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">Big Data en R</h1>
<h2 class="subtitle"><em>EST-383</em></h2>
<p class="author"><em>Alvaro Chirino Gutierrez</em></p>
<p class="date"><em>2020-05-28</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#prefacio">Prefacio</a><ul>
<li><a href="#audiencia">Audiencia</a></li>
<li><a href="#estructura-del-libro">Estructura del libro</a></li>
<li><a href="#software-y-acuerdos">Software y acuerdos</a></li>
<li><a href="#bases-de-datos">Bases de datos</a></li>
<li><a href="#agradecimiento">Agradecimiento</a></li>
</ul></li>
<li><a href="#acerca-del-autor">Acerca del autor</a></li>
<li><a href="#introR"><span class="toc-section-number">1</span> Introducción a R</a><ul>
<li><a href="#tipos-de-estructuras"><span class="toc-section-number">1.1</span> Tipos de estructuras</a></li>
<li><a href="#loops-y-condiciones"><span class="toc-section-number">1.2</span> Loops y condiciones</a></li>
<li><a href="#funciones"><span class="toc-section-number">1.3</span> Funciones</a></li>
<li><a href="#importacion-de-datos"><span class="toc-section-number">1.4</span> Importacion de datos</a></li>
<li><a href="#dataframe-y-exploración"><span class="toc-section-number">1.5</span> Dataframe y exploración</a></li>
<li><a href="#estadística-descriptiva"><span class="toc-section-number">1.6</span> Estadística descriptiva</a></li>
<li><a href="#muestreo-e-inferencia"><span class="toc-section-number">1.7</span> Muestreo e inferencia</a></li>
<li><a href="#gráficos-de-origen"><span class="toc-section-number">1.8</span> Gráficos de origen</a></li>
<li><a href="#ggplot"><span class="toc-section-number">1.9</span> ggplot</a></li>
<li><a href="#r-markdown"><span class="toc-section-number">1.10</span> R Markdown</a><ul>
<li><a href="#instalación"><span class="toc-section-number">1.10.1</span> Instalación</a></li>
<li><a href="#yaml-header"><span class="toc-section-number">1.10.2</span> YAML Header</a></li>
<li><a href="#sintaxis-básica"><span class="toc-section-number">1.10.3</span> Sintaxis básica</a></li>
<li><a href="#tipos-de-documentos"><span class="toc-section-number">1.10.4</span> Tipos de documentos</a></li>
<li><a href="#chunks"><span class="toc-section-number">1.10.5</span> Chunks</a></li>
</ul></li>
<li><a href="#shiny"><span class="toc-section-number">1.11</span> Shiny</a><ul>
<li><a href="#ui"><span class="toc-section-number">1.11.1</span> UI</a></li>
<li><a href="#server"><span class="toc-section-number">1.11.2</span> Server</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos"><span class="toc-section-number">1.12</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#scraping-web"><span class="toc-section-number">2</span> Scraping Web</a><ul>
<li><a href="#pasos-para-la-recopilación-de-información"><span class="toc-section-number">2.1</span> Pasos para la recopilación de información</a></li>
<li><a href="#tecnologías-de-diseminación-extracción-y-almacenamiento-web"><span class="toc-section-number">2.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</a></li>
<li><a href="#librerías-en-r"><span class="toc-section-number">2.3</span> Librerías en R</a></li>
<li><a href="#librería-rvest"><span class="toc-section-number">2.4</span> Librería rvest</a></li>
<li><a href="#ejemplo-ketal"><span class="toc-section-number">2.5</span> Ejemplo: Ketal</a></li>
<li><a href="#ejemplo-ministerio-de-educación"><span class="toc-section-number">2.6</span> Ejemplo: Ministerio de Educación</a></li>
<li><a href="#ejemplo-informacion-covid-19-en-bolivia"><span class="toc-section-number">2.7</span> Ejemplo, informacion COVID-19 en Bolivia</a></li>
<li><a href="#apis"><span class="toc-section-number">2.8</span> APIs</a><ul>
<li><a href="#api-banco-mundial"><span class="toc-section-number">2.8.1</span> API Banco Mundial</a></li>
<li><a href="#api-google-trends"><span class="toc-section-number">2.8.2</span> API Google trends</a></li>
<li><a href="#api-google-maps"><span class="toc-section-number">2.8.3</span> API Google Maps</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos-1"><span class="toc-section-number">2.9</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#introduccion-al-big-data"><span class="toc-section-number">3</span> Introduccion al Big Data</a><ul>
<li><a href="#definiendo-al-big-data"><span class="toc-section-number">3.1</span> Definiendo al Big Data</a></li>
<li><a href="#las-5-v-en-el-big-data"><span class="toc-section-number">3.2</span> Las 5 V en el Big Data</a></li>
<li><a href="#ciclo-de-vida-de-un-proyecto-de-análisis-de-datos"><span class="toc-section-number">3.3</span> Ciclo de vida de un proyecto de análisis de datos</a></li>
<li><a href="#inferencia-y-big-data"><span class="toc-section-number">3.4</span> Inferencia y Big Data</a><ul>
<li><a href="#descriptivo"><span class="toc-section-number">3.4.1</span> Descriptivo</a></li>
<li><a href="#causal"><span class="toc-section-number">3.4.2</span> Causal</a></li>
<li><a href="#predictivo"><span class="toc-section-number">3.4.3</span> Predictivo</a></li>
</ul></li>
<li><a href="#calidad-de-dato-y-big-data"><span class="toc-section-number">3.5</span> Calidad de dato y Big Data</a></li>
<li><a href="#captura-y-preservación"><span class="toc-section-number">3.6</span> Captura y preservación</a><ul>
<li><a href="#fuentes-convencionales"><span class="toc-section-number">3.6.1</span> Fuentes convencionales</a></li>
<li><a href="#datos-web-y-apis"><span class="toc-section-number">3.6.2</span> Datos web y APIs</a></li>
<li><a href="#record-linkage"><span class="toc-section-number">3.6.3</span> Record Linkage</a></li>
<li><a href="#bases-de-datos-1"><span class="toc-section-number">3.6.4</span> Bases de datos</a></li>
<li><a href="#programando-con-big-data"><span class="toc-section-number">3.6.5</span> Programando con Big Data</a></li>
</ul></li>
<li><a href="#análisis-y-modelado"><span class="toc-section-number">3.7</span> Análisis y modelado</a><ul>
<li><a href="#machine-learning"><span class="toc-section-number">3.7.1</span> Machine learning</a></li>
<li><a href="#análisis-de-texto"><span class="toc-section-number">3.7.2</span> Análisis de texto</a></li>
<li><a href="#networks"><span class="toc-section-number">3.7.3</span> Networks</a></li>
</ul></li>
<li><a href="#inferencia-y-ética"><span class="toc-section-number">3.8</span> Inferencia y ética</a><ul>
<li><a href="#información-y-visualización"><span class="toc-section-number">3.8.1</span> Información y visualización</a></li>
<li><a href="#error-e-inferencia"><span class="toc-section-number">3.8.2</span> Error e inferencia</a></li>
<li><a href="#privacidad-y-confidencialidad"><span class="toc-section-number">3.8.3</span> Privacidad y confidencialidad</a></li>
<li><a href="#workbooks"><span class="toc-section-number">3.8.4</span> Workbooks</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos-2"><span class="toc-section-number">3.9</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#big-data-en-r-descubriendo-el-poder-dentro-de-r"><span class="toc-section-number">4</span> Big Data en R (Descubriendo el poder dentro de R)</a><ul>
<li><a href="#limitaciones-en-r"><span class="toc-section-number">4.1</span> Limitaciones en R</a><ul>
<li><a href="#memoria"><span class="toc-section-number">4.1.1</span> Memoria</a></li>
<li><a href="#velocidad-de-procesamiento"><span class="toc-section-number">4.1.2</span> Velocidad de procesamiento</a></li>
</ul></li>
<li><a href="#a-los-límites-de-la-memoria-y-más-allá"><span class="toc-section-number">4.2</span> A los límites de la memoria y más allá</a><ul>
<li><a href="#transformacion-y-agregacion-de-datos-con-la-libraria-ff-y-ffbase"><span class="toc-section-number">4.2.1</span> Transformacion y agregacion de datos con la libraria ff y ffbase</a></li>
<li><a href="#modelogs-glm-con-la-las-librerias-ff-y-ffbase"><span class="toc-section-number">4.2.2</span> Modelogs GLM con la las librerias ff y ffbase</a></li>
<li><a href="#expandiendo-la-memoria-con-la-libreria-bigmemory"><span class="toc-section-number">4.2.3</span> Expandiendo la memoria con la libreria bigmemory</a></li>
</ul></li>
<li><a href="#parallel-r"><span class="toc-section-number">4.3</span> Parallel R</a></li>
<li><a href="#aumento-del-rendimiento-de-r-con-la-libreria-data.table-y-otras-herramientas"><span class="toc-section-number">4.4</span> Aumento del rendimiento de R con la libreria data.table y otras herramientas</a></li>
<li><a href="#ejercicios-propuestos-3"><span class="toc-section-number">4.5</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#r-y-spark"><span class="toc-section-number">5</span> R y Spark</a><ul>
<li><a href="#introducción"><span class="toc-section-number">5.1</span> Introducción</a></li>
<li><a href="#arrancando-spark"><span class="toc-section-number">5.2</span> Arrancando Spark</a></li>
<li><a href="#análisis-con-spark"><span class="toc-section-number">5.3</span> Análisis con Spark</a></li>
<li><a href="#ejercicios-propuestos-4"><span class="toc-section-number">5.4</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#prefacio-1">Prefacio</a><ul>
<li><a href="#audiencia-1">Audiencia</a></li>
<li><a href="#estructura-del-libro-1">Estructura del libro</a></li>
<li><a href="#software-y-acuerdos-1">Software y acuerdos</a></li>
<li><a href="#bases-de-datos-2">Bases de datos</a></li>
<li><a href="#agradecimiento-1">Agradecimiento</a></li>
</ul></li>
<li><a href="#introR"><span class="toc-section-number">6</span> Introducción a R</a><ul>
<li><a href="#tipos-de-estructuras-1"><span class="toc-section-number">6.1</span> Tipos de estructuras</a></li>
<li><a href="#loops-y-condiciones-1"><span class="toc-section-number">6.2</span> Loops y condiciones</a></li>
<li><a href="#funciones-1"><span class="toc-section-number">6.3</span> Funciones</a></li>
<li><a href="#importacion-de-datos-1"><span class="toc-section-number">6.4</span> Importacion de datos</a></li>
<li><a href="#dataframe-y-exploración-1"><span class="toc-section-number">6.5</span> Dataframe y exploración</a></li>
<li><a href="#estadística-descriptiva-1"><span class="toc-section-number">6.6</span> Estadística descriptiva</a></li>
<li><a href="#muestreo-e-inferencia-1"><span class="toc-section-number">6.7</span> Muestreo e inferencia</a></li>
<li><a href="#gráficos-de-origen-1"><span class="toc-section-number">6.8</span> Gráficos de origen</a></li>
<li><a href="#ggplot-1"><span class="toc-section-number">6.9</span> ggplot</a></li>
<li><a href="#r-markdown-1"><span class="toc-section-number">6.10</span> R Markdown</a><ul>
<li><a href="#instalación-1"><span class="toc-section-number">6.10.1</span> Instalación</a></li>
<li><a href="#yaml-header-1"><span class="toc-section-number">6.10.2</span> YAML Header</a></li>
<li><a href="#sintaxis-básica-1"><span class="toc-section-number">6.10.3</span> Sintaxis básica</a></li>
<li><a href="#tipos-de-documentos-1"><span class="toc-section-number">6.10.4</span> Tipos de documentos</a></li>
<li><a href="#chunks-1"><span class="toc-section-number">6.10.5</span> Chunks</a></li>
</ul></li>
<li><a href="#shiny-1"><span class="toc-section-number">6.11</span> Shiny</a><ul>
<li><a href="#ui-1"><span class="toc-section-number">6.11.1</span> UI</a></li>
<li><a href="#server-1"><span class="toc-section-number">6.11.2</span> Server</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos-5"><span class="toc-section-number">6.12</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#scraping-web-1"><span class="toc-section-number">7</span> Scraping Web</a><ul>
<li><a href="#pasos-para-la-recopilación-de-información-1"><span class="toc-section-number">7.1</span> Pasos para la recopilación de información</a></li>
<li><a href="#tecnologías-de-diseminación-extracción-y-almacenamiento-web-1"><span class="toc-section-number">7.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</a></li>
<li><a href="#librerías-en-r-1"><span class="toc-section-number">7.3</span> Librerías en R</a></li>
<li><a href="#librería-rvest-1"><span class="toc-section-number">7.4</span> Librería rvest</a></li>
<li><a href="#ejemplo-ketal-1"><span class="toc-section-number">7.5</span> Ejemplo: Ketal</a></li>
<li><a href="#ejemplo-ministerio-de-educación-1"><span class="toc-section-number">7.6</span> Ejemplo: Ministerio de Educación</a></li>
<li><a href="#apis-1"><span class="toc-section-number">7.7</span> APIs</a><ul>
<li><a href="#api-banco-mundial-1"><span class="toc-section-number">7.7.1</span> API Banco Mundial</a></li>
<li><a href="#api-google-trends-1"><span class="toc-section-number">7.7.2</span> API Google trends</a></li>
<li><a href="#api-google-maps-1"><span class="toc-section-number">7.7.3</span> API Google Maps</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos-6"><span class="toc-section-number">7.8</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#introduccion-al-big-data-1"><span class="toc-section-number">8</span> Introduccion al Big Data</a><ul>
<li><a href="#definiendo-al-big-data-1"><span class="toc-section-number">8.1</span> Definiendo al Big Data</a></li>
<li><a href="#las-5-v-en-el-big-data-1"><span class="toc-section-number">8.2</span> Las 5 V en el Big Data</a></li>
<li><a href="#ciclo-de-vida-de-un-proyecto-de-análisis-de-datos-1"><span class="toc-section-number">8.3</span> Ciclo de vida de un proyecto de análisis de datos</a></li>
<li><a href="#inferencia-y-big-data-1"><span class="toc-section-number">8.4</span> Inferencia y Big Data</a><ul>
<li><a href="#descriptivo-1"><span class="toc-section-number">8.4.1</span> Descriptivo</a></li>
<li><a href="#causal-1"><span class="toc-section-number">8.4.2</span> Causal</a></li>
<li><a href="#predictivo-1"><span class="toc-section-number">8.4.3</span> Predictivo</a></li>
</ul></li>
<li><a href="#calidad-de-dato-y-big-data-1"><span class="toc-section-number">8.5</span> Calidad de dato y Big Data</a></li>
<li><a href="#captura-y-preservación-1"><span class="toc-section-number">8.6</span> Captura y preservación</a><ul>
<li><a href="#fuentes-convencionales-1"><span class="toc-section-number">8.6.1</span> Fuentes convencionales</a></li>
<li><a href="#datos-web-y-apis-1"><span class="toc-section-number">8.6.2</span> Datos web y APIs</a></li>
<li><a href="#record-linkage-1"><span class="toc-section-number">8.6.3</span> Record Linkage</a></li>
<li><a href="#bases-de-datos-3"><span class="toc-section-number">8.6.4</span> Bases de datos</a></li>
<li><a href="#programando-con-big-data-1"><span class="toc-section-number">8.6.5</span> Programando con Big Data</a></li>
</ul></li>
<li><a href="#análisis-y-modelado-1"><span class="toc-section-number">8.7</span> Análisis y modelado</a><ul>
<li><a href="#machine-learning-1"><span class="toc-section-number">8.7.1</span> Machine learning</a></li>
<li><a href="#análisis-de-texto-1"><span class="toc-section-number">8.7.2</span> Análisis de texto</a></li>
<li><a href="#networks-1"><span class="toc-section-number">8.7.3</span> Networks</a></li>
</ul></li>
<li><a href="#inferencia-y-ética-1"><span class="toc-section-number">8.8</span> Inferencia y ética</a><ul>
<li><a href="#información-y-visualización-1"><span class="toc-section-number">8.8.1</span> Información y visualización</a></li>
<li><a href="#error-e-inferencia-1"><span class="toc-section-number">8.8.2</span> Error e inferencia</a></li>
<li><a href="#privacidad-y-confidencialidad-1"><span class="toc-section-number">8.8.3</span> Privacidad y confidencialidad</a></li>
<li><a href="#workbooks-1"><span class="toc-section-number">8.8.4</span> Workbooks</a></li>
</ul></li>
<li><a href="#ejercicios-propuestos-7"><span class="toc-section-number">8.9</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#big-data-en-r-descubriendo-el-poder-dentro-de-r-1"><span class="toc-section-number">9</span> Big Data en R (Descubriendo el poder dentro de R)</a><ul>
<li><a href="#limitaciones-en-r-1"><span class="toc-section-number">9.1</span> Limitaciones en R</a><ul>
<li><a href="#memoria-1"><span class="toc-section-number">9.1.1</span> Memoria</a></li>
<li><a href="#velocidad-de-procesamiento-1"><span class="toc-section-number">9.1.2</span> Velocidad de procesamiento</a></li>
</ul></li>
<li><a href="#a-los-límites-de-la-memoria-y-más-allá-1"><span class="toc-section-number">9.2</span> A los límites de la memoria y más allá</a><ul>
<li><a href="#transformacion-y-agregacion-de-datos-con-la-libraria-ff-y-ffbase-1"><span class="toc-section-number">9.2.1</span> Transformacion y agregacion de datos con la libraria ff y ffbase</a></li>
<li><a href="#modelogs-glm-con-la-las-librerias-ff-y-ffbase-1"><span class="toc-section-number">9.2.2</span> Modelogs GLM con la las librerias ff y ffbase</a></li>
<li><a href="#expandiendo-la-memoria-con-la-libreria-bigmemory-1"><span class="toc-section-number">9.2.3</span> Expandiendo la memoria con la libreria bigmemory</a></li>
</ul></li>
<li><a href="#parallel-r-1"><span class="toc-section-number">9.3</span> Parallel R</a></li>
<li><a href="#aumento-del-rendimiento-de-r-con-la-libreria-data.table-y-otras-herramientas-1"><span class="toc-section-number">9.4</span> Aumento del rendimiento de R con la libreria data.table y otras herramientas</a></li>
<li><a href="#ejercicios-propuestos-8"><span class="toc-section-number">9.5</span> Ejercicios Propuestos</a></li>
</ul></li>
<li><a href="#r-y-spark-1"><span class="toc-section-number">10</span> R y Spark</a><ul>
<li><a href="#introducción-1"><span class="toc-section-number">10.1</span> Introducción</a></li>
<li><a href="#arrancando-spark-1"><span class="toc-section-number">10.2</span> Arrancando Spark</a></li>
<li><a href="#análisis-con-spark-1"><span class="toc-section-number">10.3</span> Análisis con Spark</a></li>
<li><a href="#ejercicios-propuestos-9"><span class="toc-section-number">10.4</span> Ejercicios Propuestos</a></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="prefacio" class="section level1 unnumbered">
<h1>Prefacio</h1>
<p><a href="https://www.crcpress.com/product/isbn/9781138700109" target="_blank"><img src="images/cover.png" style="display: block; margin: auto;" /></a></p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />Este documento de <a href="https://twiiter/alvarochirinog">Alvaro Chirino</a> esta bajo la licencia de <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>
<div id="audiencia" class="section level2 unnumbered">
<h2>Audiencia</h2>
<p>El libro fue diseñado originalmente para los estudiantes de la materia de Programación Estadística I, una materia optativa del pregrado de la carrera de Estadística de la Universidad Mayor de San Andres.</p>
<p>Este documento representa un primer acercamiento a los estudiantes de estadistica al software R y al mundo del Big Data.</p>
</div>
<div id="estructura-del-libro" class="section level2 unnumbered">
<h2>Estructura del libro</h2>
<p>El libro inluye 5 capitulos, estos son:</p>
<ol style="list-style-type: decimal">
<li>Introducción a R</li>
<li>Scraping Web en R</li>
<li>Introducción al Big Data</li>
<li>Big Data en R</li>
<li>R y Spark</li>
</ol>
</div>
<div id="software-y-acuerdos" class="section level2 unnumbered">
<h2>Software y acuerdos</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 4.0.0 (2020-04-24)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18363)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=Spanish_Bolivia.1252 
## [2] LC_CTYPE=Spanish_Bolivia.1252   
## [3] LC_MONETARY=Spanish_Bolivia.1252
## [4] LC_NUMERIC=C                    
## [5] LC_TIME=Spanish_Bolivia.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods  
## [7] base     
## 
## loaded via a namespace (and not attached):
##  [1] compiler_4.0.0  magrittr_1.5    bookdown_0.18  
##  [4] htmltools_0.4.0 tools_4.0.0     rstudioapi_0.11
##  [7] yaml_2.2.1      Rcpp_1.0.4.6    stringi_1.4.6  
## [10] rmarkdown_2.1   knitr_1.28      stringr_1.4.0  
## [13] xfun_0.13       digest_0.6.25   packrat_0.5.0  
## [16] rlang_0.4.5     evaluate_0.14</code></pre>
</div>
<div id="bases-de-datos" class="section level2 unnumbered">
<h2>Bases de datos</h2>
<p>En este documento se emplearan 4 bases de datos del contecto Boliviano:</p>
<ol style="list-style-type: decimal">
<li>Encuesta a Hogares 2018. Vivienda y Personas</li>
<li>Encuesta de Demografia y Salud 1989 - 2008</li>
<li>Encuesta de Niños, niñas y adolescentes 2016</li>
<li>Computo oficial de las elecciones del 20 de Octubre de 2020</li>
<li>Bases de datos de contagios, muertes y recpurados del COVID-19 del Johns Hopkins Institute.</li>
</ol>
<p>Estas bases de datos se encuentran disponibles en formato <span class="math inline">\(.RData\)</span> en el repositorio de Github del texto.</p>
</div>
<div id="agradecimiento" class="section level2 unnumbered">
<h2>Agradecimiento</h2>
<p>Eponine…</p>
</div>
</div>
<div id="acerca-del-autor" class="section level1 unnumbered">
<h1>Acerca del autor</h1>
<!--chapter:end:index.Rmd-->
</div>
<div id="introR" class="section level1">
<h1><span class="header-section-number">1</span> Introducción a R</h1>
<p>R es un software de libre distribución</p>
<div id="tipos-de-estructuras" class="section level2">
<h2><span class="header-section-number">1.1</span> Tipos de estructuras</h2>
<ul>
<li>Vectores</li>
<li>Matrices</li>
<li>Arrays</li>
<li>Dataframes</li>
<li>Listas</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb3-2" title="2">v&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb3-3" title="3">v2&lt;-<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;2&quot;</span>)</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">as.character</span>(v)</a></code></pre></div>
<pre><code>##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">as.numeric</span>(v)</a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">x1&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="dv">0</span><span class="op">/</span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">x2&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb9-2" title="2">x2</a></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">str</span>(x1)</a></code></pre></div>
<pre><code>##  num 1</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">typeof</span>(x1)</a></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">typeof</span>(v2)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="co"># vectores con usos estadisticos</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">rbinom</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="fl">0.1</span>)</a></code></pre></div>
<pre><code>##  [1] 1 0 1 0 1 1 0 0 2 2</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">rnorm</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1]  -1.803681  23.323016  -6.119356  -1.599617  21.869988
##  [6]  14.865106  11.620209 -14.713489  12.177188   2.911373</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">runif</span>(<span class="dv">10</span>,<span class="dv">50</span>,<span class="dv">500</span>)</a></code></pre></div>
<pre><code>##  [1] 347.26889  76.08094 260.36793 156.65768  60.93720 393.83383
##  [7] 310.07799 142.09959 335.56640 470.51302</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">rchisq</span>(<span class="dv">10</span>,<span class="dv">2</span>)</a></code></pre></div>
<pre><code>##  [1] 2.10046231 0.44422118 0.38123332 2.64329014 0.44949653
##  [6] 0.05687461 0.29556187 1.40426516 2.30569090 2.64895414</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">rexp</span>(<span class="dv">10</span>,<span class="dv">5</span>)</a></code></pre></div>
<pre><code>##  [1] 0.041866537 0.121974041 0.422766711 0.044739226 0.145471324
##  [6] 0.536282789 0.281482736 0.007141566 0.226460411 1.049311647</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1">x&lt;-<span class="kw">rchisq</span>(<span class="dv">1000</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="kw">hist</span>(x)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">(<span class="kw">sum</span>((x<span class="op">-</span><span class="kw">mean</span>(x))<span class="op">**</span><span class="dv">4</span>)<span class="op">/</span><span class="dv">1000</span>)<span class="op">/</span><span class="kw">sd</span>(x)<span class="op">**</span><span class="dv">4</span></a></code></pre></div>
<pre><code>## [1] 5.259851</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">median</span>(<span class="kw">rexp</span>(<span class="dv">100000</span>,<span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1] 0.2292518</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">quantile</span>(x,<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">56</span>)<span class="op">/</span><span class="dv">100</span>)</a></code></pre></div>
<pre><code>##        2%       56% 
## 0.1959885 2.8888618</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">quantile</span>(x,<span class="dv">1</span><span class="op">:</span><span class="dv">100</span><span class="op">/</span><span class="dv">100</span>)</a></code></pre></div>
<pre><code>##         1%         2%         3%         4%         5%         6% 
##  0.1256823  0.1959885  0.2196223  0.3097160  0.3662286  0.4388546 
##         7%         8%         9%        10%        11%        12% 
##  0.4918006  0.5470699  0.5780689  0.6154682  0.6705580  0.7338083 
##        13%        14%        15%        16%        17%        18% 
##  0.7553062  0.8095172  0.8353901  0.8762216  0.9194661  0.9931298 
##        19%        20%        21%        22%        23%        24% 
##  1.0499541  1.0762089  1.1438277  1.1804019  1.2080998  1.2486106 
##        25%        26%        27%        28%        29%        30% 
##  1.2898346  1.3272379  1.3830228  1.4139579  1.4331724  1.4763571 
##        31%        32%        33%        34%        35%        36% 
##  1.5210593  1.5871675  1.6270803  1.6739204  1.7263550  1.7674497 
##        37%        38%        39%        40%        41%        42% 
##  1.8440891  1.8687829  1.9313365  1.9800883  2.0389988  2.0853356 
##        43%        44%        45%        46%        47%        48% 
##  2.1335262  2.2010184  2.2501944  2.2986992  2.3379548  2.3878562 
##        49%        50%        51%        52%        53%        54% 
##  2.4411270  2.4979440  2.5880376  2.6457037  2.6993410  2.7498505 
##        55%        56%        57%        58%        59%        60% 
##  2.7931083  2.8888618  2.9443766  3.0011354  3.0761574  3.1057826 
##        61%        62%        63%        64%        65%        66% 
##  3.1588318  3.2333922  3.2819335  3.3789473  3.4548773  3.5467753 
##        67%        68%        69%        70%        71%        72% 
##  3.5910002  3.6895215  3.7947411  3.8871842  3.9240981  4.0121270 
##        73%        74%        75%        76%        77%        78% 
##  4.0805276  4.1458768  4.2208307  4.3058463  4.4329687  4.6506373 
##        79%        80%        81%        82%        83%        84% 
##  4.7601811  4.8929949  4.9853108  5.1388655  5.2013566  5.3340908 
##        85%        86%        87%        88%        89%        90% 
##  5.4998790  5.6490068  5.7562090  5.8519602  6.1324638  6.2734937 
##        91%        92%        93%        94%        95%        96% 
##  6.4113976  6.6311586  6.8592915  7.2224817  7.6445332  8.1354926 
##        97%        98%        99%       100% 
##  8.6054040  9.4634391 11.1884025 15.8679096</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">a1&lt;-<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>,<span class="dv">4</span>,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb36-2" title="2">I&lt;-<span class="kw">diag</span>(<span class="kw">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb36-3" title="3">b1&lt;-<span class="kw">t</span>(a1)<span class="op">%*%</span>a1</a>
<a class="sourceLine" id="cb36-4" title="4">b2&lt;-a1<span class="op">%*%</span><span class="kw">t</span>(a1)</a>
<a class="sourceLine" id="cb36-5" title="5"><span class="co">#solve(b1)</span></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="co">#solve(b2)</span></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="kw">det</span>(b1)</a></code></pre></div>
<pre><code>## [1] 2.791799e-37</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">det</span>(b2)</a></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">eigen</span>(b1)</a></code></pre></div>
<pre><code>## eigen() decomposition
## $values
## [1]  2.864414e+03  5.585784e+00 -3.006427e-14 -5.964175e-14
## [5] -1.744794e-13
## 
## $vectors
##             [,1]        [,2]        [,3]        [,4]
## [1,] -0.09654784  0.76855612  0.00000000  0.00000000
## [2,] -0.24551564  0.48961420  0.08358281  0.54130760
## [3,] -0.39448345  0.21067228  0.29202311 -0.78404241
## [4,] -0.54345125 -0.06826963 -0.83479466 -0.05583796
## [5,] -0.69241905 -0.34721155  0.45918874  0.29857278
##               [,5]
## [1,]  6.324555e-01
## [2,] -6.324555e-01
## [3,] -3.162278e-01
## [4,]  1.609823e-15
## [5,]  3.162278e-01</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">dim</span>(b1)</a></code></pre></div>
<pre><code>## [1] 5 5</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="co">#indexaci?n</span></a>
<a class="sourceLine" id="cb44-2" title="2">v2&lt;-<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;2&quot;</span>)</a>
<a class="sourceLine" id="cb44-3" title="3">v2[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">v2[<span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1">v3&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">20</span></a>
<a class="sourceLine" id="cb48-2" title="2">v3&lt;-v3<span class="op">/</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb48-3" title="3">v3</a></code></pre></div>
<pre><code>##  [1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 1.1 1.2 1.3 1.4 1.5
## [16] 1.6 1.7 1.8 1.9 2.0</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1">v3[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">19</span>)]</a></code></pre></div>
<pre><code>## [1] 0.3 1.9</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1">v3[v3<span class="op">&gt;</span><span class="fl">0.5</span>]</a></code></pre></div>
<pre><code>##  [1] 0.6 0.7 0.8 0.9 1.0 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2.0</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1">v3[v3<span class="op">==</span><span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1">v3[v3<span class="op">!=</span><span class="fl">0.9</span>]</a></code></pre></div>
<pre><code>##  [1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 1.0 1.1 1.2 1.3 1.4 1.5 1.6
## [16] 1.7 1.8 1.9 2.0</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1">v3[v3<span class="op">&gt;</span><span class="fl">0.5</span> <span class="op">&amp;</span><span class="st"> </span>v3<span class="op">&lt;</span><span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 0.6 0.7 0.8 0.9</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">v3[v3<span class="op">&gt;</span><span class="fl">0.5</span> <span class="op">||</span><span class="st"> </span>v3<span class="op">&lt;</span><span class="dv">1</span>]</a></code></pre></div>
<pre><code>##  [1] 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 1.1 1.2 1.3 1.4 1.5
## [16] 1.6 1.7 1.8 1.9 2.0</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">a1</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    5    9   13   17
## [2,]    2    6   10   14   18
## [3,]    3    7   11   15   19
## [4,]    4    8   12   16   20</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">a1[<span class="dv">1</span>,]</a></code></pre></div>
<pre><code>## [1]  1  5  9 13 17</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">a1[,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">a1[<span class="dv">3</span>,<span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">a1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),]</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    5    9   13   17
## [2,]    4    8   12   16   20</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">a1[,<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    5   13
## [2,]    6   14
## [3,]    7   15
## [4,]    8   16</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" title="1">a1[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    5   13
## [2,]    8   16</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">a1[,<span class="dv">2</span>]<span class="op">&gt;</span><span class="dv">6</span></a></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" title="1">a1[a1[,<span class="dv">2</span>]<span class="op">&gt;</span><span class="dv">6</span>,]</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    3    7   11   15   19
## [2,]    4    8   12   16   20</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1"><span class="kw">mean</span>(a1)</a></code></pre></div>
<pre><code>## [1] 10.5</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1">a2&lt;-<span class="kw">as.data.frame</span>(a1)</a>
<a class="sourceLine" id="cb82-2" title="2">a2</a></code></pre></div>
<pre><code>##   V1 V2 V3 V4 V5
## 1  1  5  9 13 17
## 2  2  6 10 14 18
## 3  3  7 11 15 19
## 4  4  8 12 16 20</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" title="1"><span class="kw">str</span>(a2)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  5 variables:
##  $ V1: int  1 2 3 4
##  $ V2: int  5 6 7 8
##  $ V3: int  9 10 11 12
##  $ V4: int  13 14 15 16
##  $ V5: int  17 18 19 20</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" title="1"><span class="kw">mean</span>(a2<span class="op">$</span>V1)</a></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="kw">colMeans</span>(a2)</a></code></pre></div>
<pre><code>##   V1   V2   V3   V4   V5 
##  2.5  6.5 10.5 14.5 18.5</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" title="1"><span class="kw">summary</span>(a2)</a></code></pre></div>
<pre><code>##        V1             V2             V3              V4       
##  Min.   :1.00   Min.   :5.00   Min.   : 9.00   Min.   :13.00  
##  1st Qu.:1.75   1st Qu.:5.75   1st Qu.: 9.75   1st Qu.:13.75  
##  Median :2.50   Median :6.50   Median :10.50   Median :14.50  
##  Mean   :2.50   Mean   :6.50   Mean   :10.50   Mean   :14.50  
##  3rd Qu.:3.25   3rd Qu.:7.25   3rd Qu.:11.25   3rd Qu.:15.25  
##  Max.   :4.00   Max.   :8.00   Max.   :12.00   Max.   :16.00  
##        V5       
##  Min.   :17.00  
##  1st Qu.:17.75  
##  Median :18.50  
##  Mean   :18.50  
##  3rd Qu.:19.25  
##  Max.   :20.00</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" title="1"><span class="kw">cov</span>(a2)</a></code></pre></div>
<pre><code>##          V1       V2       V3       V4       V5
## V1 1.666667 1.666667 1.666667 1.666667 1.666667
## V2 1.666667 1.666667 1.666667 1.666667 1.666667
## V3 1.666667 1.666667 1.666667 1.666667 1.666667
## V4 1.666667 1.666667 1.666667 1.666667 1.666667
## V5 1.666667 1.666667 1.666667 1.666667 1.666667</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" title="1"><span class="kw">cor</span>(a2)</a></code></pre></div>
<pre><code>##    V1 V2 V3 V4 V5
## V1  1  1  1  1  1
## V2  1  1  1  1  1
## V3  1  1  1  1  1
## V4  1  1  1  1  1
## V5  1  1  1  1  1</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" title="1">a2</a></code></pre></div>
<pre><code>##   V1 V2 V3 V4 V5
## 1  1  5  9 13 17
## 2  2  6 10 14 18
## 3  3  7 11 15 19
## 4  4  8 12 16 20</code></pre>
</div>
<div id="loops-y-condiciones" class="section level2">
<h2><span class="header-section-number">1.2</span> Loops y condiciones</h2>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb98-2" title="2">x&lt;-<span class="dv">5</span></a>
<a class="sourceLine" id="cb98-3" title="3"><span class="co">## if</span></a>
<a class="sourceLine" id="cb98-4" title="4"><span class="cf">if</span>(x<span class="op">&gt;</span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb98-5" title="5">  <span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-6" title="6">}</a>
<a class="sourceLine" id="cb98-7" title="7"><span class="co">## if else</span></a>
<a class="sourceLine" id="cb98-8" title="8"><span class="cf">if</span>(x<span class="op">&gt;</span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb98-9" title="9">  <span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-10" title="10">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb98-11" title="11">  <span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-12" title="12">}</a>
<a class="sourceLine" id="cb98-13" title="13"><span class="co">## if encadenado</span></a>
<a class="sourceLine" id="cb98-14" title="14">x&lt;-<span class="dv">60</span></a>
<a class="sourceLine" id="cb98-15" title="15"><span class="cf">if</span>(x<span class="op">&gt;</span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb98-16" title="16">  <span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-17" title="17">  <span class="kw">mean</span>(x)</a>
<a class="sourceLine" id="cb98-18" title="18">} <span class="cf">else</span> <span class="cf">if</span>(x<span class="op">&lt;</span><span class="dv">6</span>){</a>
<a class="sourceLine" id="cb98-19" title="19">  <span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb98-20" title="20">} <span class="cf">else</span> <span class="cf">if</span>(<span class="kw">typeof</span>(x)<span class="op">==</span><span class="st">&quot;double&quot;</span>){</a>
<a class="sourceLine" id="cb98-21" title="21">  <span class="kw">print</span>(<span class="st">&quot;hola&quot;</span>)</a>
<a class="sourceLine" id="cb98-22" title="22">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb98-23" title="23">  <span class="kw">print</span>(<span class="st">&quot;hola hola&quot;</span>)</a>
<a class="sourceLine" id="cb98-24" title="24">}</a>
<a class="sourceLine" id="cb98-25" title="25"><span class="co">##for</span></a>
<a class="sourceLine" id="cb98-26" title="26"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>){</a>
<a class="sourceLine" id="cb98-27" title="27">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb98-28" title="28">}</a>
<a class="sourceLine" id="cb98-29" title="29"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">15</span>,<span class="dv">19</span>)){</a>
<a class="sourceLine" id="cb98-30" title="30">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb98-31" title="31">}  </a>
<a class="sourceLine" id="cb98-32" title="32"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>)){</a>
<a class="sourceLine" id="cb98-33" title="33">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb98-34" title="34">}  </a>
<a class="sourceLine" id="cb98-35" title="35"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb98-36" title="36">  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">6</span><span class="op">:</span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb98-37" title="37">    <span class="kw">print</span>(i<span class="op">*</span>j)</a>
<a class="sourceLine" id="cb98-38" title="38">  }</a>
<a class="sourceLine" id="cb98-39" title="39">}</a>
<a class="sourceLine" id="cb98-40" title="40"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</a>
<a class="sourceLine" id="cb98-41" title="41">  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">6</span><span class="op">:</span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb98-42" title="42">    aux&lt;-i<span class="op">*</span>j</a>
<a class="sourceLine" id="cb98-43" title="43">    <span class="kw">print</span>(aux)</a>
<a class="sourceLine" id="cb98-44" title="44">    <span class="cf">if</span>(aux<span class="op">==</span><span class="dv">20</span>){</a>
<a class="sourceLine" id="cb98-45" title="45">      <span class="cf">break</span>()</a>
<a class="sourceLine" id="cb98-46" title="46">      <span class="kw">print</span>(<span class="st">&quot;hola&quot;</span>)</a>
<a class="sourceLine" id="cb98-47" title="47">      <span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>,i,j))</a>
<a class="sourceLine" id="cb98-48" title="48">    }</a>
<a class="sourceLine" id="cb98-49" title="49">  }</a>
<a class="sourceLine" id="cb98-50" title="50">}</a>
<a class="sourceLine" id="cb98-51" title="51"><span class="co">#while</span></a>
<a class="sourceLine" id="cb98-52" title="52">z&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb98-53" title="53">k&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb98-54" title="54"><span class="cf">while</span>(z<span class="op">&gt;</span><span class="fl">0.0001</span>){</a>
<a class="sourceLine" id="cb98-55" title="55">  <span class="kw">print</span>(k)</a>
<a class="sourceLine" id="cb98-56" title="56">  z&lt;-<span class="dv">1</span><span class="op">/</span>k</a>
<a class="sourceLine" id="cb98-57" title="57">  k&lt;-k<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb98-58" title="58">}</a></code></pre></div>
</div>
<div id="funciones" class="section level2">
<h2><span class="header-section-number">1.3</span> Funciones</h2>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1">fx&lt;-<span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb99-2" title="2">  y&lt;-<span class="dv">8</span><span class="op">*</span>x<span class="op">**</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb99-3" title="3">  <span class="kw">return</span>(y)</a>
<a class="sourceLine" id="cb99-4" title="4">}</a>
<a class="sourceLine" id="cb99-5" title="5"><span class="kw">fx</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb99-6" title="6"><span class="kw">fx</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb99-7" title="7"><span class="kw">curve</span>(fx,<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">20</span>,<span class="dv">20</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1000</span>))</a>
<a class="sourceLine" id="cb99-8" title="8"><span class="kw">plot</span>(fx)</a>
<a class="sourceLine" id="cb99-9" title="9"><span class="co">##comando de estadisticas de tendencia central</span></a>
<a class="sourceLine" id="cb99-10" title="10">tendencia&lt;-<span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb99-11" title="11">  n&lt;-<span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb99-12" title="12">  <span class="kw">cat</span>(<span class="st">&quot;media:&quot;</span>,<span class="dt">fill =</span> T)</a>
<a class="sourceLine" id="cb99-13" title="13">  <span class="kw">print</span>(<span class="kw">sum</span>(x)<span class="op">/</span>n)</a>
<a class="sourceLine" id="cb99-14" title="14">  <span class="kw">cat</span>(<span class="st">&quot;mediana:&quot;</span>,<span class="dt">fill =</span> T)</a>
<a class="sourceLine" id="cb99-15" title="15">  x&lt;-<span class="kw">sort</span>(x)</a>
<a class="sourceLine" id="cb99-16" title="16">  <span class="cf">if</span>(n<span class="op">%%</span><span class="dv">2</span><span class="op">==</span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb99-17" title="17">    me&lt;-(x[n<span class="op">/</span><span class="dv">2</span>]<span class="op">+</span>x[n<span class="op">/</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>])<span class="op">/</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb99-18" title="18">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb99-19" title="19">    me&lt;-x[<span class="kw">ceiling</span>(n<span class="op">/</span><span class="dv">2</span>)]</a>
<a class="sourceLine" id="cb99-20" title="20">  }</a>
<a class="sourceLine" id="cb99-21" title="21">  <span class="kw">print</span>(me)</a>
<a class="sourceLine" id="cb99-22" title="22">  <span class="kw">cat</span>(<span class="st">&quot;moda:&quot;</span>,<span class="dt">fill =</span> T)</a>
<a class="sourceLine" id="cb99-23" title="23">  tt&lt;-<span class="kw">table</span>(x)</a>
<a class="sourceLine" id="cb99-24" title="24">  mm&lt;-<span class="kw">max</span>(tt)</a>
<a class="sourceLine" id="cb99-25" title="25">  <span class="kw">print</span>(<span class="kw">names</span>(tt)[(<span class="kw">table</span>(x)<span class="op">==</span>mm)])</a>
<a class="sourceLine" id="cb99-26" title="26">  <span class="kw">cat</span>(<span class="st">&quot;media cuadrática:&quot;</span>,<span class="dt">fill =</span> T)</a>
<a class="sourceLine" id="cb99-27" title="27">  mc&lt;-<span class="kw">sqrt</span>(<span class="kw">sum</span>(x<span class="op">**</span><span class="dv">2</span>)<span class="op">/</span>n)</a>
<a class="sourceLine" id="cb99-28" title="28">  <span class="kw">print</span>(mc)</a>
<a class="sourceLine" id="cb99-29" title="29">  <span class="kw">cat</span>(<span class="st">&quot;media armónica&quot;,fill = T)</span></a>
<a class="sourceLine" id="cb99-30" title="30"><span class="st">  ma&lt;-n/sum(1/x)</span></a>
<a class="sourceLine" id="cb99-31" title="31"><span class="st">  print(ma)</span></a>
<a class="sourceLine" id="cb99-32" title="32"><span class="st">  cat(&quot;</span>media geométrica<span class="op">:</span><span class="st">&quot;,fill = T)</span></a>
<a class="sourceLine" id="cb99-33" title="33"><span class="st">  mg&lt;-prod(x)**(1/n)</span></a>
<a class="sourceLine" id="cb99-34" title="34"><span class="st">  print(mg)</span></a>
<a class="sourceLine" id="cb99-35" title="35"><span class="st">}</span></a>
<a class="sourceLine" id="cb99-36" title="36"><span class="st">xx&lt;-scan()</span></a>
<a class="sourceLine" id="cb99-37" title="37"><span class="st">a&lt;-tendencia(xx)</span></a>
<a class="sourceLine" id="cb99-38" title="38"></a>
<a class="sourceLine" id="cb99-39" title="39"><span class="st">tendencia2&lt;-function(x){</span></a>
<a class="sourceLine" id="cb99-40" title="40"><span class="st">  n&lt;-length(x)</span></a>
<a class="sourceLine" id="cb99-41" title="41"><span class="st">  media&lt;-sum(x)/n</span></a>
<a class="sourceLine" id="cb99-42" title="42"><span class="st">  x&lt;-sort(x)</span></a>
<a class="sourceLine" id="cb99-43" title="43"><span class="st">  if(n%%2==0){</span></a>
<a class="sourceLine" id="cb99-44" title="44"><span class="st">    me&lt;-(x[n/2]+x[n/2+1])/2</span></a>
<a class="sourceLine" id="cb99-45" title="45"><span class="st">  } else {</span></a>
<a class="sourceLine" id="cb99-46" title="46"><span class="st">    me&lt;-x[ceiling(n/2)]</span></a>
<a class="sourceLine" id="cb99-47" title="47"><span class="st">  }</span></a>
<a class="sourceLine" id="cb99-48" title="48"><span class="st">  tt&lt;-table(x)</span></a>
<a class="sourceLine" id="cb99-49" title="49"><span class="st">  mm&lt;-max(tt)</span></a>
<a class="sourceLine" id="cb99-50" title="50"><span class="st">  mo&lt;-names(tt)[(table(x)==mm)]</span></a>
<a class="sourceLine" id="cb99-51" title="51"><span class="st">  mc&lt;-sqrt(sum(x**2)/n)</span></a>
<a class="sourceLine" id="cb99-52" title="52"><span class="st">  ma&lt;-n/sum(1/x)</span></a>
<a class="sourceLine" id="cb99-53" title="53"><span class="st">  mg&lt;-prod(x)**(1/n)</span></a>
<a class="sourceLine" id="cb99-54" title="54"><span class="st">  aux&lt;-list(media,me,mo,mc,ma,mg)</span></a>
<a class="sourceLine" id="cb99-55" title="55"><span class="st">  return(aux)</span></a>
<a class="sourceLine" id="cb99-56" title="56"><span class="st">}</span></a>
<a class="sourceLine" id="cb99-57" title="57"><span class="st">a&lt;-tendencia2(xx)</span></a>
<a class="sourceLine" id="cb99-58" title="58"></a>
<a class="sourceLine" id="cb99-59" title="59"><span class="st">tendenciaF&lt;-function(x,f){</span></a>
<a class="sourceLine" id="cb99-60" title="60"><span class="st">  n&lt;-sum(f)</span></a>
<a class="sourceLine" id="cb99-61" title="61"><span class="st">  media&lt;-sum(x*f)/n</span></a>
<a class="sourceLine" id="cb99-62" title="62"><span class="st">}</span></a></code></pre></div>
</div>
<div id="importacion-de-datos" class="section level2">
<h2><span class="header-section-number">1.4</span> Importacion de datos</h2>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="co">#importando bases de datos</span></a>
<a class="sourceLine" id="cb100-2" title="2"><span class="kw">getwd</span>()</a>
<a class="sourceLine" id="cb100-3" title="3"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">PC18</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">R</span><span class="ch">\\</span><span class="st">est383</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">eh18</span><span class="ch">\\</span><span class="st">SPSS&quot;</span>)</a>
<a class="sourceLine" id="cb100-4" title="4"><span class="kw">dir</span>()</a>
<a class="sourceLine" id="cb100-5" title="5"><span class="co">##SPSS</span></a>
<a class="sourceLine" id="cb100-6" title="6"><span class="co">## activar o instalar librerias</span></a>
<a class="sourceLine" id="cb100-7" title="7"><span class="kw">library</span>(foreign)</a>
<a class="sourceLine" id="cb100-8" title="8">eh18d&lt;-<span class="kw">read.spss</span>(<span class="st">&quot;EH2018_Discriminacion.sav&quot;</span>,</a>
<a class="sourceLine" id="cb100-9" title="9">          <span class="dt">to.data.frame =</span> T,<span class="dt">use.value.labels=</span>F)</a>
<a class="sourceLine" id="cb100-10" title="10"><span class="kw">names</span>(eh18d)</a>
<a class="sourceLine" id="cb100-11" title="11"><span class="kw">table</span>(eh18d<span class="op">$</span>s10a_01a)</a>
<a class="sourceLine" id="cb100-12" title="12"><span class="kw">attributes</span>(eh18d)<span class="op">$</span>variable.labels[<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb100-13" title="13"><span class="kw">head</span>(eh18d)</a>
<a class="sourceLine" id="cb100-14" title="14"><span class="co">##CSV</span></a>
<a class="sourceLine" id="cb100-15" title="15"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">PC18</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">R</span><span class="ch">\\</span><span class="st">est383</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">eh18</span><span class="ch">\\</span><span class="st">CSV&quot;</span>)</a>
<a class="sourceLine" id="cb100-16" title="16"><span class="kw">dir</span>()</a>
<a class="sourceLine" id="cb100-17" title="17">eh18d2&lt;-<span class="kw">read.csv2</span>(<span class="st">&quot;EH2018_Discriminacion.csv&quot;</span>)</a>
<a class="sourceLine" id="cb100-18" title="18">aux&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;EH2018_Discriminacion.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;;&quot;</span>)</a>
<a class="sourceLine" id="cb100-19" title="19"><span class="kw">table</span>(eh18d2<span class="op">$</span>s10a_01a)</a>
<a class="sourceLine" id="cb100-20" title="20">daux&lt;-<span class="kw">c</span>(<span class="st">&quot;Sexo&quot;</span>,<span class="st">&quot;O. Sexual&quot;</span>,<span class="st">&quot;Edad&quot;</span>,<span class="st">&quot;piel&quot;</span>,<span class="st">&quot;Pertenencia&quot;</span>,</a>
<a class="sourceLine" id="cb100-21" title="21">        <span class="st">&quot;idioma&quot;</span>,<span class="st">&quot;vestimente&quot;</span>,<span class="st">&quot;procedencia&quot;</span>,<span class="st">&quot;discapacidad&quot;</span>,</a>
<a class="sourceLine" id="cb100-22" title="22">        <span class="st">&quot;religion&quot;</span>,<span class="st">&quot;clase&quot;</span>,<span class="st">&quot;otro&quot;</span>)</a>
<a class="sourceLine" id="cb100-23" title="23"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">5</span><span class="op">:</span><span class="dv">16</span>){</a>
<a class="sourceLine" id="cb100-24" title="24"><span class="kw">barplot</span>(<span class="kw">prop.table</span>(<span class="kw">table</span>(eh18d2[,i]))<span class="op">*</span><span class="dv">100</span>,<span class="dt">main=</span>daux[i<span class="dv">-4</span>])</a>
<a class="sourceLine" id="cb100-25" title="25">}</a></code></pre></div>
</div>
<div id="dataframe-y-exploración" class="section level2">
<h2><span class="header-section-number">1.5</span> Dataframe y exploración</h2>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb101-2" title="2"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">PC18</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">R</span><span class="ch">\\</span><span class="st">est383</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">eh18</span><span class="ch">\\</span><span class="st">SPSS&quot;</span>)</a>
<a class="sourceLine" id="cb101-3" title="3"><span class="kw">library</span>(foreign)</a>
<a class="sourceLine" id="cb101-4" title="4"><span class="kw">dir</span>()</a>
<a class="sourceLine" id="cb101-5" title="5">eh18&lt;-<span class="kw">read.spss</span>(<span class="st">&quot;EH2018_Persona.sav&quot;</span>,</a>
<a class="sourceLine" id="cb101-6" title="6">          <span class="dt">to.data.frame =</span> T,<span class="dt">use.value.labels=</span>F)</a>
<a class="sourceLine" id="cb101-7" title="7"><span class="co">#################################################</span></a>
<a class="sourceLine" id="cb101-8" title="8"><span class="kw">names</span>(eh18)<span class="co">#nombres de las variable</span></a>
<a class="sourceLine" id="cb101-9" title="9"><span class="kw">str</span>(eh18)</a>
<a class="sourceLine" id="cb101-10" title="10"><span class="kw">class</span>(eh18)</a>
<a class="sourceLine" id="cb101-11" title="11"><span class="co">##renombrando variables</span></a>
<a class="sourceLine" id="cb101-12" title="12"><span class="kw">names</span>(eh18)[<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>)]&lt;-<span class="kw">c</span>(<span class="st">&quot;sexo&quot;</span>,<span class="st">&quot;edad&quot;</span>)</a>
<a class="sourceLine" id="cb101-13" title="13"><span class="kw">names</span>(eh18)</a>
<a class="sourceLine" id="cb101-14" title="14"><span class="co">##crear variable (mujer 1=mujer, 0 eoc)</span></a>
<a class="sourceLine" id="cb101-15" title="15">eh18<span class="op">$</span>mujer&lt;-eh18<span class="op">$</span>sexo<span class="op">==</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb101-16" title="16"><span class="kw">sum</span>(eh18<span class="op">$</span>mujer)</a>
<a class="sourceLine" id="cb101-17" title="17"><span class="kw">mean</span>(eh18<span class="op">$</span>mujer)</a>
<a class="sourceLine" id="cb101-18" title="18"><span class="co">#exportación (&quot;write&quot;)</span></a>
<a class="sourceLine" id="cb101-19" title="19"><span class="kw">write.dta</span>(eh18,<span class="st">&quot;eh18p.dta&quot;</span>)</a>
<a class="sourceLine" id="cb101-20" title="20"><span class="kw">getwd</span>()</a>
<a class="sourceLine" id="cb101-21" title="21"><span class="co">#excel</span></a>
<a class="sourceLine" id="cb101-22" title="22"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb101-23" title="23"><span class="kw">install.packages</span>(<span class="st">&quot;writexl&quot;</span>)</a>
<a class="sourceLine" id="cb101-24" title="24"><span class="kw">library</span>(writexl)</a>
<a class="sourceLine" id="cb101-25" title="25"><span class="kw">library</span>(<span class="dt">help=</span>writexl)</a>
<a class="sourceLine" id="cb101-26" title="26"><span class="kw">write_xlsx</span>(eh18,<span class="st">&quot;eh18p.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb101-27" title="27"><span class="kw">apropos</span>(<span class="st">&quot;read&quot;</span>)</a>
<a class="sourceLine" id="cb101-28" title="28"><span class="kw">apropos</span>(<span class="st">&quot;write&quot;</span>)</a>
<a class="sourceLine" id="cb101-29" title="29"><span class="kw">install.packages</span>(<span class="st">&quot;haven&quot;</span>)</a>
<a class="sourceLine" id="cb101-30" title="30"><span class="kw">library</span>(haven)</a>
<a class="sourceLine" id="cb101-31" title="31"></a>
<a class="sourceLine" id="cb101-32" title="32">eh18<span class="op">$</span>s03a_02e&lt;-<span class="kw">substr</span>(<span class="kw">as.character</span>(eh18<span class="op">$</span>s03a_02e),<span class="dv">1</span>,<span class="dv">120</span>)</a>
<a class="sourceLine" id="cb101-33" title="33">eh18<span class="op">$</span>s03a_02e&lt;-<span class="kw">gsub</span>(<span class="st">&quot;  &quot;</span>,<span class="st">&quot; &quot;</span>,<span class="kw">as.character</span>(eh18<span class="op">$</span>s03a_02e))</a>
<a class="sourceLine" id="cb101-34" title="34"></a>
<a class="sourceLine" id="cb101-35" title="35"><span class="kw">gsub</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;7&quot;</span>,<span class="st">&quot;hola&quot;</span>)</a>
<a class="sourceLine" id="cb101-36" title="36"><span class="kw">gsub</span>(<span class="st">&quot;`&quot;</span>,<span class="st">&quot;&#39;&quot;</span>,<span class="st">&quot;`s04a_04e`, `s04a_07ge`, `s04b_15e`, `s04b_16e`, `s04b_17e`, `s04b_18e`, `s04e_30c`, `s04f_35e`, `s05a_04`, `s05c_13_e`, `s05d_21e`, `s05d_22_e`, `s06a_06e`, `s06a_09e`, `s06a_10e`, `s06b_11a`, `s06b_11b`, `s06b_12a`, `s06b_12b`, `s06b_13`, `s06b_20e`, `s06e_34e`, `s06f_40a`, `s06f_40b`, `s06h_54e`, `s06h_55e`, `s06h_56e`, `s07a_01e1e`, `s07a_01e2e`, `s07a_02ce`, `s07b_05de`, `s07b_05ee`, `s07c_08e`, `s07c_09e`&quot;</span>)</a>
<a class="sourceLine" id="cb101-37" title="37"><span class="kw">nchar</span>(eh18<span class="op">$</span>s03a_02e)</a>
<a class="sourceLine" id="cb101-38" title="38"></a>
<a class="sourceLine" id="cb101-39" title="39">vv&lt;-<span class="kw">c</span>(<span class="st">&#39;s04a_04e&#39;</span>, <span class="st">&#39;s04a_07ge&#39;</span>, <span class="st">&#39;s04b_15e&#39;</span>, <span class="st">&#39;s04b_16e&#39;</span>, <span class="st">&#39;s04b_17e&#39;</span>, <span class="st">&#39;s04b_18e&#39;</span>, <span class="st">&#39;s04e_30c&#39;</span>, <span class="st">&#39;s04f_35e&#39;</span>, <span class="st">&#39;s05a_04&#39;</span>, <span class="st">&#39;s05c_13_e&#39;</span>, <span class="st">&#39;s05d_21e&#39;</span>, <span class="st">&#39;s05d_22_e&#39;</span>, <span class="st">&#39;s06a_06e&#39;</span>, <span class="st">&#39;s06a_09e&#39;</span>, <span class="st">&#39;s06a_10e&#39;</span>, <span class="st">&#39;s06b_11a&#39;</span>, <span class="st">&#39;s06b_11b&#39;</span>, <span class="st">&#39;s06b_12a&#39;</span>, <span class="st">&#39;s06b_12b&#39;</span>, <span class="st">&#39;s06b_13&#39;</span>, <span class="st">&#39;s06b_20e&#39;</span>, <span class="st">&#39;s06e_34e&#39;</span>, <span class="st">&#39;s06f_40a&#39;</span>, <span class="st">&#39;s06f_40b&#39;</span>, <span class="st">&#39;s06h_54e&#39;</span>, <span class="st">&#39;s06h_55e&#39;</span>, <span class="st">&#39;s06h_56e&#39;</span>, <span class="st">&#39;s07a_01e1e&#39;</span>, <span class="st">&#39;s07a_01e2e&#39;</span>, <span class="st">&#39;s07a_02ce&#39;</span>, <span class="st">&#39;s07b_05de&#39;</span>, <span class="st">&#39;s07b_05ee&#39;</span>, <span class="st">&#39;s07c_08e&#39;</span>, <span class="st">&#39;s07c_09e&#39;</span>)</a>
<a class="sourceLine" id="cb101-40" title="40"><span class="cf">for</span>(i <span class="cf">in</span> vv){</a>
<a class="sourceLine" id="cb101-41" title="41">  eh18[,i]&lt;-<span class="kw">gsub</span>(<span class="st">&quot;  &quot;</span>,<span class="st">&quot; &quot;</span>,<span class="kw">as.character</span>(eh18[,i]))</a>
<a class="sourceLine" id="cb101-42" title="42">  eh18[,i]&lt;-<span class="kw">substr</span>(eh18[,i],<span class="dv">1</span>,<span class="dv">120</span>)</a>
<a class="sourceLine" id="cb101-43" title="43">} </a>
<a class="sourceLine" id="cb101-44" title="44"><span class="kw">write_sav</span>(eh18,<span class="st">&quot;eh18p.sav&quot;</span>)</a>
<a class="sourceLine" id="cb101-45" title="45"><span class="kw">save</span>(eh18,vv,<span class="dt">file=</span><span class="st">&quot;eh18p.RData&quot;</span>)</a>
<a class="sourceLine" id="cb101-46" title="46"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb101-47" title="47"><span class="kw">getwd</span>()</a>
<a class="sourceLine" id="cb101-48" title="48"><span class="kw">load</span>(<span class="st">&quot;eh18p.RData&quot;</span>)</a>
<a class="sourceLine" id="cb101-49" title="49"><span class="kw">set.seed</span>(<span class="dv">123456</span>)<span class="co">####semilla</span></a>
<a class="sourceLine" id="cb101-50" title="50">a&lt;-<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">20</span>),<span class="dv">5</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb101-51" title="51"></a>
<a class="sourceLine" id="cb101-52" title="52"><span class="kw">apply</span>(a, <span class="dv">1</span>, sum)</a>
<a class="sourceLine" id="cb101-53" title="53"><span class="kw">apply</span>(a, <span class="dv">2</span>, mean)</a>
<a class="sourceLine" id="cb101-54" title="54"><span class="kw">apply</span>(a, <span class="dv">1</span>, sd)</a>
<a class="sourceLine" id="cb101-55" title="55">mc&lt;-<span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb101-56" title="56">  n&lt;-<span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb101-57" title="57">  aux&lt;-<span class="kw">sqrt</span>(<span class="kw">sum</span>(x<span class="op">^</span><span class="dv">2</span>)<span class="op">/</span>n)</a>
<a class="sourceLine" id="cb101-58" title="58">  <span class="kw">return</span>(aux)</a>
<a class="sourceLine" id="cb101-59" title="59">}</a>
<a class="sourceLine" id="cb101-60" title="60"><span class="kw">apply</span>(a, <span class="dv">1</span>, mc)</a>
<a class="sourceLine" id="cb101-61" title="61"><span class="kw">apply</span>(a, <span class="dv">2</span>, mc)</a>
<a class="sourceLine" id="cb101-62" title="62"></a>
<a class="sourceLine" id="cb101-63" title="63"><span class="kw">tapply</span>(eh18<span class="op">$</span>mujer,eh18<span class="op">$</span>depto,mean)</a>
<a class="sourceLine" id="cb101-64" title="64"><span class="kw">tapply</span>(eh18<span class="op">$</span>mujer,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area),mean)</a>
<a class="sourceLine" id="cb101-65" title="65"><span class="kw">tapply</span>(eh18<span class="op">$</span>edad,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area),mean)</a>
<a class="sourceLine" id="cb101-66" title="66"><span class="kw">tapply</span>(eh18<span class="op">$</span>edad<span class="op">&gt;</span><span class="dv">60</span>,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area),mean)</a>
<a class="sourceLine" id="cb101-67" title="67"><span class="kw">tapply</span>(eh18<span class="op">$</span>edad<span class="op">&lt;</span><span class="dv">5</span>,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area),mean)</a>
<a class="sourceLine" id="cb101-68" title="68"></a>
<a class="sourceLine" id="cb101-69" title="69"><span class="kw">tapply</span>(eh18<span class="op">$</span>p0,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area),mean,<span class="dt">na.rm=</span>T)</a>
<a class="sourceLine" id="cb101-70" title="70">aux&lt;-<span class="kw">tapply</span>(eh18<span class="op">$</span>p0,<span class="kw">list</span>(eh18<span class="op">$</span>depto,eh18<span class="op">$</span>area,eh18<span class="op">$</span>niv_ed_g),mean,<span class="dt">na.rm=</span>T)</a>
<a class="sourceLine" id="cb101-71" title="71"></a>
<a class="sourceLine" id="cb101-72" title="72"><span class="kw">as.data.frame</span>(aux)</a>
<a class="sourceLine" id="cb101-73" title="73"></a>
<a class="sourceLine" id="cb101-74" title="74"><span class="kw">lapply</span>()</a>
<a class="sourceLine" id="cb101-75" title="75"><span class="kw">mapply</span>()</a>
<a class="sourceLine" id="cb101-76" title="76"><span class="kw">sapply</span>()</a></code></pre></div>
</div>
<div id="estadística-descriptiva" class="section level2">
<h2><span class="header-section-number">1.6</span> Estadística descriptiva</h2>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="co">#Estadística descriptiva</span></a>
<a class="sourceLine" id="cb102-2" title="2"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb102-3" title="3"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">PC18</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">R</span><span class="ch">\\</span><span class="st">est383</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">eh18</span><span class="ch">\\</span><span class="st">SPSS&quot;</span>)</a>
<a class="sourceLine" id="cb102-4" title="4"><span class="co">#encuesta a hogares 2018</span></a>
<a class="sourceLine" id="cb102-5" title="5"><span class="kw">load</span>(<span class="st">&quot;eh18p.RData&quot;</span>)</a>
<a class="sourceLine" id="cb102-6" title="6"><span class="kw">data</span>()<span class="co">#muestra las bases de datos disponibles en R</span></a>
<a class="sourceLine" id="cb102-7" title="7">ChickWeight</a>
<a class="sourceLine" id="cb102-8" title="8"><span class="kw">View</span>(ChickWeight)</a>
<a class="sourceLine" id="cb102-9" title="9"><span class="kw">help</span>(<span class="st">&quot;ChickWeight&quot;</span>)</a>
<a class="sourceLine" id="cb102-10" title="10"><span class="co">##Porcentajes y tablas de fracuencias</span></a>
<a class="sourceLine" id="cb102-11" title="11">t1&lt;-<span class="kw">table</span>(eh18<span class="op">$</span>sexo)<span class="co">#tabla de frcuencias</span></a>
<a class="sourceLine" id="cb102-12" title="12">t2&lt;-<span class="kw">table</span>(eh18<span class="op">$</span>depto)</a>
<a class="sourceLine" id="cb102-13" title="13">t3&lt;-<span class="kw">table</span>(eh18<span class="op">$</span>edad)</a>
<a class="sourceLine" id="cb102-14" title="14"></a>
<a class="sourceLine" id="cb102-15" title="15"><span class="kw">barplot</span>(t1,<span class="dt">col=</span><span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;darkgreen&quot;</span>))<span class="co">#diagramas de barra</span></a>
<a class="sourceLine" id="cb102-16" title="16"><span class="kw">barplot</span>(t3,<span class="dt">horiz =</span> T)</a>
<a class="sourceLine" id="cb102-17" title="17"><span class="kw">barplot</span>(t3,<span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb102-18" title="18">ldep&lt;-<span class="kw">c</span>(<span class="st">&quot;CH&quot;</span>,<span class="st">&quot;LP&quot;</span>,<span class="st">&quot;CB&quot;</span>,<span class="st">&quot;OR&quot;</span>,<span class="st">&quot;PT&quot;</span>,<span class="st">&quot;TJ&quot;</span>,<span class="st">&quot;SC&quot;</span>,<span class="st">&quot;BN&quot;</span>,<span class="st">&quot;PD&quot;</span>)</a>
<a class="sourceLine" id="cb102-19" title="19"><span class="kw">barplot</span>(t2,<span class="dt">col=</span><span class="st">&quot;black&quot;</span>,<span class="dt">names.arg =</span> ldep)</a>
<a class="sourceLine" id="cb102-20" title="20"><span class="co">#llevando a %</span></a>
<a class="sourceLine" id="cb102-21" title="21">t2p&lt;-<span class="kw">prop.table</span>(t2)<span class="op">*</span><span class="dv">100</span></a>
<a class="sourceLine" id="cb102-22" title="22"><span class="kw">barplot</span>(t2p,<span class="dt">col=</span><span class="st">&quot;black&quot;</span>,<span class="dt">names.arg =</span> ldep,<span class="dt">ylab=</span><span class="st">&quot;%&quot;</span>)</a>
<a class="sourceLine" id="cb102-23" title="23"><span class="kw">pie</span>(t2p)</a>
<a class="sourceLine" id="cb102-24" title="24"></a>
<a class="sourceLine" id="cb102-25" title="25">t3&lt;-<span class="kw">as.data.frame</span>(t3)</a>
<a class="sourceLine" id="cb102-26" title="26">t3<span class="op">$</span>F&lt;-<span class="kw">cumsum</span>(t3<span class="op">$</span>Freq)</a>
<a class="sourceLine" id="cb102-27" title="27">t3<span class="op">$</span>r&lt;-<span class="kw">prop.table</span>(t3<span class="op">$</span>Freq)</a>
<a class="sourceLine" id="cb102-28" title="28">t3<span class="op">$</span>R&lt;-<span class="kw">cumsum</span>(t3<span class="op">$</span>r)</a>
<a class="sourceLine" id="cb102-29" title="29"><span class="kw">head</span>(t3)</a>
<a class="sourceLine" id="cb102-30" title="30"></a>
<a class="sourceLine" id="cb102-31" title="31"><span class="kw">table</span>(ChickWeight<span class="op">$</span>Time)</a>
<a class="sourceLine" id="cb102-32" title="32"><span class="kw">table</span>(ChickWeight<span class="op">$</span>Diet)</a>
<a class="sourceLine" id="cb102-33" title="33"></a>
<a class="sourceLine" id="cb102-34" title="34"><span class="kw">dim</span>(<span class="kw">table</span>(ChickWeight<span class="op">$</span>Chick))</a>
<a class="sourceLine" id="cb102-35" title="35"><span class="co">#tabla de contingencia</span></a>
<a class="sourceLine" id="cb102-36" title="36">aux&lt;-<span class="kw">table</span>(ChickWeight<span class="op">$</span>Chick,ChickWeight<span class="op">$</span>Diet)</a>
<a class="sourceLine" id="cb102-37" title="37">aux[aux<span class="op">!=</span><span class="dv">0</span>]&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb102-38" title="38"><span class="kw">apply</span>(aux,<span class="dv">2</span>,sum)</a>
<a class="sourceLine" id="cb102-39" title="39"><span class="kw">table</span>(ChickWeight<span class="op">$</span>Time)</a>
<a class="sourceLine" id="cb102-40" title="40"><span class="kw">table</span>(ChickWeight<span class="op">$</span>Diet[ChickWeight<span class="op">$</span>Time<span class="op">==</span><span class="dv">0</span>])</a>
<a class="sourceLine" id="cb102-41" title="41"><span class="co">##medidas de tendencia central</span></a>
<a class="sourceLine" id="cb102-42" title="42"><span class="kw">mean</span>(eh18<span class="op">$</span>edad)</a>
<a class="sourceLine" id="cb102-43" title="43"><span class="kw">median</span>(eh18<span class="op">$</span>edad)</a>
<a class="sourceLine" id="cb102-44" title="44"></a>
<a class="sourceLine" id="cb102-45" title="45"><span class="kw">mean</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-46" title="46"><span class="kw">median</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-47" title="47"><span class="kw">hist</span>(eh18<span class="op">$</span>ylab)</a>
<a class="sourceLine" id="cb102-48" title="48"><span class="kw">plot</span>(<span class="kw">density</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T))</a>
<a class="sourceLine" id="cb102-49" title="49"><span class="kw">locator</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb102-50" title="50"><span class="kw">summary</span>(eh18<span class="op">$</span>ylab)</a>
<a class="sourceLine" id="cb102-51" title="51"><span class="co">#medidas de dispersion</span></a>
<a class="sourceLine" id="cb102-52" title="52"><span class="kw">var</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-53" title="53"><span class="kw">sd</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-54" title="54"><span class="kw">max</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)<span class="op">-</span><span class="kw">min</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-55" title="55"><span class="kw">sd</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)<span class="op">/</span><span class="kw">mean</span>(eh18<span class="op">$</span>ylab,<span class="dt">na.rm =</span> T)</a>
<a class="sourceLine" id="cb102-56" title="56"><span class="co">#medidas de forma</span></a>
<a class="sourceLine" id="cb102-57" title="57"><span class="kw">quantile</span>(eh18<span class="op">$</span>ylab,<span class="kw">c</span>(<span class="fl">0.1</span>,<span class="fl">0.44</span>,<span class="fl">0.99</span>),<span class="dt">na.rm=</span>T)</a>
<a class="sourceLine" id="cb102-58" title="58"><span class="kw">hist</span>(eh18<span class="op">$</span>edad)</a>
<a class="sourceLine" id="cb102-59" title="59"><span class="co">#Coeficiente de asimetría</span></a>
<a class="sourceLine" id="cb102-60" title="60"><span class="co">#EDAD</span></a>
<a class="sourceLine" id="cb102-61" title="61">x&lt;-eh18<span class="op">$</span>edad</a>
<a class="sourceLine" id="cb102-62" title="62">N&lt;-<span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb102-63" title="63">as&lt;-(<span class="kw">sum</span>((x<span class="op">-</span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">3</span>)<span class="op">/</span>N)<span class="op">/</span><span class="kw">sd</span>(x)<span class="op">^</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb102-64" title="64">as</a>
<a class="sourceLine" id="cb102-65" title="65"><span class="co">#iNGRESO LABORAL</span></a>
<a class="sourceLine" id="cb102-66" title="66">x&lt;-eh18<span class="op">$</span>ylab</a>
<a class="sourceLine" id="cb102-67" title="67">x&lt;-x[<span class="kw">is.na</span>(x)<span class="op">==</span>F]</a>
<a class="sourceLine" id="cb102-68" title="68">x&lt;-x[<span class="kw">complete.cases</span>(x)]</a>
<a class="sourceLine" id="cb102-69" title="69">N&lt;-<span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb102-70" title="70">as&lt;-(<span class="kw">sum</span>((x<span class="op">-</span><span class="kw">mean</span>(x))<span class="op">^</span><span class="dv">3</span>)<span class="op">/</span>N)<span class="op">/</span><span class="kw">sd</span>(x)<span class="op">^</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb102-71" title="71">as</a>
<a class="sourceLine" id="cb102-72" title="72"><span class="co">#kurtosis...</span></a>
<a class="sourceLine" id="cb102-73" title="73"><span class="kw">plot</span>(<span class="kw">density</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>,<span class="dt">sd=</span><span class="dv">40</span>)),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">0.08</span>))</a>
<a class="sourceLine" id="cb102-74" title="74"><span class="kw">points</span>(<span class="kw">density</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>,<span class="dt">sd=</span><span class="dv">10</span>)),<span class="dt">type=</span><span class="st">&quot;l&quot;</span>,<span class="dt">col=</span><span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb102-75" title="75"><span class="kw">points</span>(<span class="kw">density</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>,<span class="dt">sd=</span><span class="dv">5</span>)),<span class="dt">type =</span> <span class="st">&quot;l&quot;</span>,<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</a>
<a class="sourceLine" id="cb102-76" title="76"></a>
<a class="sourceLine" id="cb102-77" title="77"><span class="kw">lm</span>(ylab<span class="op">~</span>edad,<span class="dt">data=</span>eh18,<span class="dt">weights =</span> f)</a>
<a class="sourceLine" id="cb102-78" title="78"><span class="kw">lm</span>(ylab<span class="op">~-</span><span class="dv">1</span><span class="op">+</span>edad,<span class="dt">data=</span>eh18)</a>
<a class="sourceLine" id="cb102-79" title="79"><span class="kw">summary</span>(<span class="kw">lm</span>(ylab<span class="op">~</span>edad,<span class="dt">data=</span>eh18))</a></code></pre></div>
</div>
<div id="muestreo-e-inferencia" class="section level2">
<h2><span class="header-section-number">1.7</span> Muestreo e inferencia</h2>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb103-2" title="2">N&lt;-<span class="dv">15</span>;n&lt;-<span class="dv">6</span></a>
<a class="sourceLine" id="cb103-3" title="3"><span class="kw">choose</span>(N,n)</a>
<a class="sourceLine" id="cb103-4" title="4"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb103-5" title="5">y1&lt;-<span class="kw">rnorm</span>(N,<span class="dv">10</span>,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb103-6" title="6"><span class="kw">set.seed</span>(<span class="dv">234</span>)</a>
<a class="sourceLine" id="cb103-7" title="7">y2&lt;-<span class="kw">rexp</span>(N,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb103-8" title="8"><span class="kw">set.seed</span>(<span class="dv">345</span>)</a>
<a class="sourceLine" id="cb103-9" title="9">y3&lt;-<span class="kw">runif</span>(N,<span class="dv">500</span>,<span class="dv">3000</span>)</a>
<a class="sourceLine" id="cb103-10" title="10"><span class="co">#par?metros</span></a>
<a class="sourceLine" id="cb103-11" title="11">theta1&lt;-<span class="kw">mean</span>(y1)</a>
<a class="sourceLine" id="cb103-12" title="12">theta2&lt;-<span class="kw">sum</span>(y2)</a>
<a class="sourceLine" id="cb103-13" title="13"><span class="co"># sum(y3&gt;1500)/N</span></a>
<a class="sourceLine" id="cb103-14" title="14"><span class="co"># mean(y3&gt;1500)</span></a>
<a class="sourceLine" id="cb103-15" title="15">theta3&lt;-<span class="kw">mean</span>(y3<span class="op">&gt;</span><span class="dv">1500</span>)</a>
<a class="sourceLine" id="cb103-16" title="16"><span class="co">#pr?ctica (real) solo se tiene acceso a una</span></a>
<a class="sourceLine" id="cb103-17" title="17"><span class="co">#muestra</span></a>
<a class="sourceLine" id="cb103-18" title="18">U&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb103-19" title="19"><span class="kw">set.seed</span>(<span class="dv">888</span>)</a>
<a class="sourceLine" id="cb103-20" title="20">s&lt;-<span class="kw">sample</span>(U,n)</a>
<a class="sourceLine" id="cb103-21" title="21">s</a>
<a class="sourceLine" id="cb103-22" title="22">y1</a>
<a class="sourceLine" id="cb103-23" title="23"><span class="co">#estimaciones</span></a>
<a class="sourceLine" id="cb103-24" title="24"><span class="kw">mean</span>(y1[s]);theta1</a>
<a class="sourceLine" id="cb103-25" title="25"><span class="kw">mean</span>(y2[s])<span class="op">*</span>N ; theta2</a>
<a class="sourceLine" id="cb103-26" title="26"><span class="kw">mean</span>(y3[s]<span class="op">&gt;</span><span class="dv">1500</span>) ; theta3</a>
<a class="sourceLine" id="cb103-27" title="27"></a>
<a class="sourceLine" id="cb103-28" title="28"><span class="kw">combn</span>(U,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb103-29" title="29"><span class="kw">combn</span>(y1,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb103-30" title="30"></a>
<a class="sourceLine" id="cb103-31" title="31"><span class="kw">combn</span>(y1,<span class="dv">3</span>,mean)</a>
<a class="sourceLine" id="cb103-32" title="32"><span class="co">#theta1</span></a>
<a class="sourceLine" id="cb103-33" title="33">t1s&lt;-<span class="kw">apply</span>(<span class="kw">combn</span>(y1,n),<span class="dv">2</span>,mean)</a>
<a class="sourceLine" id="cb103-34" title="34"><span class="kw">mean</span>(t1s)</a>
<a class="sourceLine" id="cb103-35" title="35">theta1</a>
<a class="sourceLine" id="cb103-36" title="36"><span class="kw">hist</span>(t1s)</a>
<a class="sourceLine" id="cb103-37" title="37"><span class="kw">plot</span>(<span class="kw">density</span>(t1s))</a>
<a class="sourceLine" id="cb103-38" title="38"><span class="kw">shapiro.test</span>(t1s)</a>
<a class="sourceLine" id="cb103-39" title="39"><span class="co">#theta2</span></a>
<a class="sourceLine" id="cb103-40" title="40">t2s&lt;-<span class="kw">apply</span>(<span class="kw">combn</span>(y2,n),<span class="dv">2</span>,mean)<span class="op">*</span>N</a>
<a class="sourceLine" id="cb103-41" title="41"><span class="kw">mean</span>(t2s);theta2</a>
<a class="sourceLine" id="cb103-42" title="42"><span class="kw">hist</span>(t2s)</a>
<a class="sourceLine" id="cb103-43" title="43"><span class="kw">plot</span>(<span class="kw">density</span>(t2s))</a>
<a class="sourceLine" id="cb103-44" title="44"><span class="kw">shapiro.test</span>(t2s)</a>
<a class="sourceLine" id="cb103-45" title="45"><span class="co">#theta3</span></a>
<a class="sourceLine" id="cb103-46" title="46">t3s&lt;-<span class="kw">apply</span>(<span class="kw">combn</span>(y3,n)<span class="op">&gt;</span><span class="dv">1500</span>,<span class="dv">2</span>,mean)</a>
<a class="sourceLine" id="cb103-47" title="47"><span class="kw">mean</span>(t3s);theta3</a>
<a class="sourceLine" id="cb103-48" title="48"><span class="kw">hist</span>(t3s)</a>
<a class="sourceLine" id="cb103-49" title="49"><span class="kw">plot</span>(<span class="kw">density</span>(t3s))</a>
<a class="sourceLine" id="cb103-50" title="50"><span class="kw">shapiro.test</span>(t3s)</a>
<a class="sourceLine" id="cb103-51" title="51"><span class="co">####Inferencia a partir de una muestra</span></a>
<a class="sourceLine" id="cb103-52" title="52"><span class="co">#libreria survey</span></a>
<a class="sourceLine" id="cb103-53" title="53"><span class="kw">install.packages</span>(<span class="st">&quot;survey&quot;</span>)</a>
<a class="sourceLine" id="cb103-54" title="54"><span class="kw">library</span>(survey)</a>
<a class="sourceLine" id="cb103-55" title="55">bd&lt;-<span class="kw">data.frame</span>(y1,y2,<span class="dt">y3=</span>y3<span class="op">&gt;</span><span class="dv">1500</span>)</a>
<a class="sourceLine" id="cb103-56" title="56"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb103-57" title="57">s&lt;-<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb103-58" title="58">bds&lt;-bd[s,]</a>
<a class="sourceLine" id="cb103-59" title="59">bds<span class="op">$</span>w&lt;-<span class="dv">15</span><span class="op">/</span><span class="dv">7</span></a>
<a class="sourceLine" id="cb103-60" title="60">bds<span class="op">$</span>pk&lt;-<span class="dv">7</span><span class="op">/</span><span class="dv">15</span></a>
<a class="sourceLine" id="cb103-61" title="61">bds</a>
<a class="sourceLine" id="cb103-62" title="62">dm1&lt;-<span class="kw">svydesign</span>(<span class="dt">ids=</span><span class="op">~</span><span class="dv">0</span>,<span class="dt">probs =</span> <span class="op">~</span>pk,<span class="dt">data=</span>bds)</a>
<a class="sourceLine" id="cb103-63" title="63"><span class="kw">svymean</span>(<span class="op">~</span>y1,<span class="dt">design =</span> dm1)</a>
<a class="sourceLine" id="cb103-64" title="64"><span class="kw">svytotal</span>(<span class="op">~</span>y2,<span class="dt">design =</span> dm1)</a>
<a class="sourceLine" id="cb103-65" title="65"><span class="kw">library</span>(<span class="dt">help=</span>survey)</a></code></pre></div>
</div>
<div id="gráficos-de-origen" class="section level2">
<h2><span class="header-section-number">1.8</span> Gráficos de origen</h2>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb104-2" title="2"><span class="co">################</span></a>
<a class="sourceLine" id="cb104-3" title="3"><span class="kw">plot</span>(<span class="dv">0</span>,<span class="dv">0</span>)<span class="co">#inicia una hoja en blanco</span></a>
<a class="sourceLine" id="cb104-4" title="4"><span class="kw">plot</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dt">type =</span> <span class="st">&quot;n&quot;</span>)</a>
<a class="sourceLine" id="cb104-5" title="5"></a>
<a class="sourceLine" id="cb104-6" title="6">x&lt;-<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-7" title="7">y&lt;-<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-8" title="8"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;p&quot;</span>)</a>
<a class="sourceLine" id="cb104-9" title="9"></a>
<a class="sourceLine" id="cb104-10" title="10"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;h&quot;</span>)</a>
<a class="sourceLine" id="cb104-11" title="11"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</a>
<a class="sourceLine" id="cb104-12" title="12"><span class="kw">plot</span>(x[<span class="kw">order</span>(x)],y[<span class="kw">order</span>(x)],<span class="dt">type=</span><span class="st">&quot;l&quot;</span>)</a>
<a class="sourceLine" id="cb104-13" title="13"><span class="kw">plot</span>(x,y,<span class="dt">type =</span> <span class="st">&quot;b&quot;</span>)</a>
<a class="sourceLine" id="cb104-14" title="14"><span class="kw">plot</span>(x,y,<span class="dt">type =</span> <span class="st">&quot;o&quot;</span>)</a>
<a class="sourceLine" id="cb104-15" title="15"></a>
<a class="sourceLine" id="cb104-16" title="16"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb104-17" title="17"><span class="kw">plot</span>(x,y,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">main=</span><span class="st">&quot;c/PUNTOS&quot;</span>)</a>
<a class="sourceLine" id="cb104-18" title="18"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">main =</span> <span class="st">&quot;S/puntos&quot;</span>)</a>
<a class="sourceLine" id="cb104-19" title="19"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb104-20" title="20">     <span class="dt">axes =</span> F,<span class="dt">main=</span><span class="st">&quot;sin ejes&quot;</span>)</a>
<a class="sourceLine" id="cb104-21" title="21"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb104-22" title="22">     <span class="dt">axes =</span> F,<span class="dt">ann =</span> F,<span class="dt">main =</span> <span class="st">&quot;blanco&quot;</span>)</a>
<a class="sourceLine" id="cb104-23" title="23"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb104-24" title="24"></a>
<a class="sourceLine" id="cb104-25" title="25"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb104-26" title="26">     <span class="dt">axes =</span> F,<span class="dt">ann =</span> F)</a>
<a class="sourceLine" id="cb104-27" title="27"><span class="kw">points</span>(x,y,<span class="dt">cex=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)<span class="op">+</span><span class="dv">1</span>)     </a>
<a class="sourceLine" id="cb104-28" title="28"><span class="kw">points</span>(x,y,<span class="dt">cex=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)<span class="op">+</span><span class="dv">1</span>,<span class="dt">pch=</span><span class="dv">15</span>)     </a>
<a class="sourceLine" id="cb104-29" title="29"><span class="kw">points</span>(x,y,<span class="dt">cex=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)<span class="op">+</span><span class="dv">1</span>,<span class="dt">pch=</span><span class="dv">15</span>,<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)     </a>
<a class="sourceLine" id="cb104-30" title="30"><span class="kw">points</span>(x,y,<span class="dt">cex=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)<span class="op">+</span><span class="dv">1</span>,<span class="dt">pch=</span><span class="dv">0</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb104-31" title="31">       <span class="dt">col=</span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;darkblue&quot;</span>,<span class="st">&quot;pink&quot;</span>,<span class="st">&quot;darkgreen&quot;</span>))</a>
<a class="sourceLine" id="cb104-32" title="32"><span class="co">#points(x,y,cex=2)     </span></a>
<a class="sourceLine" id="cb104-33" title="33"><span class="kw">pdf</span>(<span class="st">&quot;figura1.pdf&quot;</span>,<span class="dt">width =</span> <span class="dv">15</span>,<span class="dt">height =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb104-34" title="34"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),</a>
<a class="sourceLine" id="cb104-35" title="35">     <span class="dt">axes =</span> F,<span class="dt">ann =</span> F)</a>
<a class="sourceLine" id="cb104-36" title="36"><span class="kw">points</span>(<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),<span class="dt">type=</span><span class="st">&quot;p&quot;</span>,<span class="dt">lwd=</span><span class="dv">4</span>,</a>
<a class="sourceLine" id="cb104-37" title="37">       <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>,<span class="dt">lty=</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb104-38" title="38"><span class="kw">text</span>(<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),</a>
<a class="sourceLine" id="cb104-39" title="39">     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;p1&quot;</span>,<span class="st">&quot;p2&quot;</span>,<span class="st">&quot;p3&quot;</span>,<span class="st">&quot;p4&quot;</span>,<span class="st">&quot;p5&quot;</span>),<span class="dt">pos=</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb104-40" title="40">     <span class="dt">cex=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dt">col=</span><span class="st">&quot;brown&quot;</span>)</a>
<a class="sourceLine" id="cb104-41" title="41"><span class="kw">axis</span>(<span class="dv">1</span>,<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">10</span>),<span class="dt">lwd=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb104-42" title="42"><span class="kw">axis</span>(<span class="dv">2</span>,<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">5</span>),<span class="dt">lwd=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-43" title="43"><span class="kw">axis</span>(<span class="dv">4</span>,<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">5</span>),<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">400</span>,<span class="dv">100</span>),<span class="dt">lwd=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-44" title="44"><span class="kw">axis</span>(<span class="dv">3</span>,<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">20</span>,<span class="dv">10</span>),<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>),<span class="dt">lwd=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-45" title="45"><span class="kw">title</span>(<span class="dt">main=</span><span class="st">&quot;Plot en R&quot;</span>,<span class="dt">col.main=</span><span class="st">&quot;darkred&quot;</span>,</a>
<a class="sourceLine" id="cb104-46" title="46">      <span class="dt">cex.main=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb104-47" title="47"><span class="kw">title</span>(<span class="dt">xlab =</span> <span class="st">&quot;Eje X&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Eje Y&quot;</span>,<span class="dt">cex.lab=</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb104-48" title="48">      <span class="dt">col.lab=</span><span class="st">&quot;gray&quot;</span>)</a>
<a class="sourceLine" id="cb104-49" title="49"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>,<span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>),</a>
<a class="sourceLine" id="cb104-50" title="50">       <span class="dt">lwd=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="dt">col=</span><span class="kw">c</span>(<span class="st">&quot;darkred&quot;</span>,<span class="st">&quot;black&quot;</span>,<span class="st">&quot;gray&quot;</span>))</a>
<a class="sourceLine" id="cb104-51" title="51"><span class="kw">dev.off</span>()</a>
<a class="sourceLine" id="cb104-52" title="52"><span class="kw">getwd</span>()</a>
<a class="sourceLine" id="cb104-53" title="53"></a>
<a class="sourceLine" id="cb104-54" title="54"><span class="kw">png</span>(<span class="st">&quot;figura1.png&quot;</span>)</a>
<a class="sourceLine" id="cb104-55" title="55"><span class="kw">plot</span>(x,y,<span class="dt">type=</span><span class="st">&quot;n&quot;</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">20</span>),</a>
<a class="sourceLine" id="cb104-56" title="56">     <span class="dt">axes =</span> F,<span class="dt">ann =</span> F)</a>
<a class="sourceLine" id="cb104-57" title="57"><span class="kw">points</span>(<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>),<span class="dt">type=</span><span class="st">&quot;p&quot;</span>,<span class="dt">lwd=</span><span class="dv">4</span>,</a>
<a class="sourceLine" id="cb104-58" title="58">       <span class="dt">col=</span><span class="st">&quot;blue&quot;</span>,<span class="dt">lty=</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb104-59" title="59"><span class="kw">dev.off</span>()</a>
<a class="sourceLine" id="cb104-60" title="60"></a>
<a class="sourceLine" id="cb104-61" title="61"><span class="kw">pdf</span>(<span class="st">&quot;sec.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb104-62" title="62"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb104-63" title="63">  <span class="kw">plot</span>(i,<span class="dv">0</span>,<span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb104-64" title="64">}</a>
<a class="sourceLine" id="cb104-65" title="65"><span class="kw">dev.off</span>()</a>
<a class="sourceLine" id="cb104-66" title="66"></a>
<a class="sourceLine" id="cb104-67" title="67"></a>
<a class="sourceLine" id="cb104-68" title="68"><span class="kw">abline</span>(<span class="dt">h=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="dt">lty=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb104-69" title="69"><span class="kw">abline</span>(<span class="dt">v=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb104-70" title="70"></a>
<a class="sourceLine" id="cb104-71" title="71">bd&lt;-<span class="kw">as.data.frame</span>(state.x77)</a>
<a class="sourceLine" id="cb104-72" title="72">bd<span class="op">$</span>name&lt;-<span class="kw">row.names</span>(bd)</a>
<a class="sourceLine" id="cb104-73" title="73"><span class="kw">head</span>(bd)</a></code></pre></div>
</div>
<div id="ggplot" class="section level2">
<h2><span class="header-section-number">1.9</span> ggplot</h2>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="co">#######################################</span></a>
<a class="sourceLine" id="cb105-2" title="2"><span class="co"># Clase: gráficos en R, ggplot</span></a>
<a class="sourceLine" id="cb105-3" title="3"><span class="co"># Materia: Programación Estadística I</span></a>
<a class="sourceLine" id="cb105-4" title="4"><span class="co"># Fecha: 9 de Marzo</span></a>
<a class="sourceLine" id="cb105-5" title="5"><span class="co">#######################################</span></a>
<a class="sourceLine" id="cb105-6" title="6"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb105-7" title="7"><span class="co">#######################################</span></a>
<a class="sourceLine" id="cb105-8" title="8"><span class="co">#install.packages(&quot;ggplot2&quot;)</span></a>
<a class="sourceLine" id="cb105-9" title="9"><span class="co">#install.packages(&quot;dplyr&quot;)</span></a>
<a class="sourceLine" id="cb105-10" title="10"><span class="co">#install.packages(&quot;maps&quot;)</span></a>
<a class="sourceLine" id="cb105-11" title="11"><span class="co">#install.packages(&quot;ggvis&quot;)</span></a>
<a class="sourceLine" id="cb105-12" title="12"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb105-13" title="13"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb105-14" title="14"><span class="kw">library</span>(maps)</a>
<a class="sourceLine" id="cb105-15" title="15"><span class="kw">library</span>(ggvis)</a>
<a class="sourceLine" id="cb105-16" title="16"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb105-17" title="17"><span class="co">#######################################</span></a>
<a class="sourceLine" id="cb105-18" title="18">urlfile&lt;-<span class="kw">url</span>(<span class="st">&#39;https://raw.githubusercontent.com/AlvaroLimber/EST-383/master/data/oct20.RData&#39;</span>)</a>
<a class="sourceLine" id="cb105-19" title="19"><span class="kw">load</span>(urlfile)</a>
<a class="sourceLine" id="cb105-20" title="20"><span class="kw">names</span>(computo)[<span class="dv">18</span>]&lt;-<span class="st">&quot;MAS&quot;</span></a>
<a class="sourceLine" id="cb105-21" title="21"><span class="co">#######################################</span></a>
<a class="sourceLine" id="cb105-22" title="22"><span class="co">#The grammar of graphics is an answer to a question: what is a statistical graphic? </span></a>
<a class="sourceLine" id="cb105-23" title="23"></a>
<a class="sourceLine" id="cb105-24" title="24"><span class="co">#base graphics 1983</span></a>
<a class="sourceLine" id="cb105-25" title="25"><span class="co">#grid 2000</span></a>
<a class="sourceLine" id="cb105-26" title="26"><span class="co">#lattice 1993</span></a>
<a class="sourceLine" id="cb105-27" title="27"><span class="co">#ggplot 2005</span></a>
<a class="sourceLine" id="cb105-28" title="28"><span class="co">#ggvis 2014</span></a>
<a class="sourceLine" id="cb105-29" title="29"></a>
<a class="sourceLine" id="cb105-30" title="30"><span class="co">## Datos, estetica y geometria (layers)</span></a>
<a class="sourceLine" id="cb105-31" title="31"></a>
<a class="sourceLine" id="cb105-32" title="32"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb105-33" title="33">mpg</a>
<a class="sourceLine" id="cb105-34" title="34"></a>
<a class="sourceLine" id="cb105-35" title="35"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-36" title="36"><span class="st">  </span><span class="kw">geom_area</span>()</a>
<a class="sourceLine" id="cb105-37" title="37"></a>
<a class="sourceLine" id="cb105-38" title="38"><span class="kw">ggplot</span>(computo,<span class="kw">aes</span>(MAS,CC))<span class="op">+</span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-39" title="39"></a>
<a class="sourceLine" id="cb105-40" title="40"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-41" title="41"><span class="st">  </span><span class="kw">geom_line</span>()</a>
<a class="sourceLine" id="cb105-42" title="42"></a>
<a class="sourceLine" id="cb105-43" title="43"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-44" title="44"><span class="st">  </span><span class="kw">geom_histogram</span>()</a>
<a class="sourceLine" id="cb105-45" title="45"></a>
<a class="sourceLine" id="cb105-46" title="46"><span class="co">#Color tamaño y forma</span></a>
<a class="sourceLine" id="cb105-47" title="47"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy,<span class="dt">colour =</span> class)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-48" title="48"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-49" title="49"></a>
<a class="sourceLine" id="cb105-50" title="50"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy,<span class="dt">shape =</span> drv)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-51" title="51"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-52" title="52"></a>
<a class="sourceLine" id="cb105-53" title="53"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy,<span class="dt">size =</span> cyl)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-54" title="54"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-55" title="55"></a>
<a class="sourceLine" id="cb105-56" title="56"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>))</a>
<a class="sourceLine" id="cb105-57" title="57"></a>
<a class="sourceLine" id="cb105-58" title="58"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>)</a>
<a class="sourceLine" id="cb105-59" title="59"></a>
<a class="sourceLine" id="cb105-60" title="60"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-61" title="61"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-62" title="62"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>class)</a>
<a class="sourceLine" id="cb105-63" title="63"></a>
<a class="sourceLine" id="cb105-64" title="64"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-65" title="65"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-66" title="66"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>class<span class="op">+</span>drv)</a>
<a class="sourceLine" id="cb105-67" title="67"></a>
<a class="sourceLine" id="cb105-68" title="68"><span class="co">#geoms</span></a>
<a class="sourceLine" id="cb105-69" title="69"><span class="kw">geom_smooth</span>() <span class="co"># ajuste y en x</span></a>
<a class="sourceLine" id="cb105-70" title="70"><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb105-71" title="71"><span class="kw">geom_histogram</span>()</a>
<a class="sourceLine" id="cb105-72" title="72"><span class="kw">geom_freqpoly</span>()</a>
<a class="sourceLine" id="cb105-73" title="73"><span class="kw">geom_bar</span>()</a>
<a class="sourceLine" id="cb105-74" title="74"><span class="kw">geom_path</span>()</a>
<a class="sourceLine" id="cb105-75" title="75"><span class="kw">geom_line</span>()</a>
<a class="sourceLine" id="cb105-76" title="76"></a>
<a class="sourceLine" id="cb105-77" title="77"><span class="co">#ajuste de un modelo</span></a>
<a class="sourceLine" id="cb105-78" title="78"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-79" title="79"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-80" title="80"><span class="st">  </span><span class="kw">geom_smooth</span>()</a>
<a class="sourceLine" id="cb105-81" title="81"></a>
<a class="sourceLine" id="cb105-82" title="82"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-83" title="83"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-84" title="84"><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</a>
<a class="sourceLine" id="cb105-85" title="85"></a>
<a class="sourceLine" id="cb105-86" title="86"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-87" title="87"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-88" title="88"></a>
<a class="sourceLine" id="cb105-89" title="89"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_jitter</span>()</a>
<a class="sourceLine" id="cb105-90" title="90"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</a>
<a class="sourceLine" id="cb105-91" title="91"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_violin</span>()</a>
<a class="sourceLine" id="cb105-92" title="92"></a>
<a class="sourceLine" id="cb105-93" title="93"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>()</a>
<a class="sourceLine" id="cb105-94" title="94"><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></a>
<a class="sourceLine" id="cb105-95" title="95"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_freqpoly</span>()</a>
<a class="sourceLine" id="cb105-96" title="96"><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></a>
<a class="sourceLine" id="cb105-97" title="97"></a>
<a class="sourceLine" id="cb105-98" title="98"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-99" title="99"><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="fl">2.5</span>)</a>
<a class="sourceLine" id="cb105-100" title="100"></a>
<a class="sourceLine" id="cb105-101" title="101"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-102" title="102"><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb105-103" title="103"></a>
<a class="sourceLine" id="cb105-104" title="104"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(hwy)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-105" title="105"><span class="st">  </span><span class="kw">geom_density</span>()</a>
<a class="sourceLine" id="cb105-106" title="106"></a>
<a class="sourceLine" id="cb105-107" title="107"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, <span class="dt">colour =</span> drv)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-108" title="108"><span class="st">  </span><span class="kw">geom_freqpoly</span>(<span class="dt">binwidth =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb105-109" title="109"></a>
<a class="sourceLine" id="cb105-110" title="110"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, <span class="dt">fill =</span> drv)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-111" title="111"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.5</span>) </a>
<a class="sourceLine" id="cb105-112" title="112"></a>
<a class="sourceLine" id="cb105-113" title="113"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, <span class="dt">fill =</span> drv)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-114" title="114"><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-115" title="115"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>drv, <span class="dt">ncol =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb105-116" title="116"></a>
<a class="sourceLine" id="cb105-117" title="117"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(manufacturer)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-118" title="118"><span class="st">  </span><span class="kw">geom_bar</span>()</a>
<a class="sourceLine" id="cb105-119" title="119"></a>
<a class="sourceLine" id="cb105-120" title="120">aa&lt;-<span class="kw">as.data.frame</span>(<span class="kw">table</span>(mpg<span class="op">$</span>class))</a>
<a class="sourceLine" id="cb105-121" title="121">aa</a>
<a class="sourceLine" id="cb105-122" title="122"><span class="kw">ggplot</span>(aa,<span class="kw">aes</span>(Var1,Freq))<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-123" title="123"><span class="st">  </span><span class="kw">geom_bar</span>()</a>
<a class="sourceLine" id="cb105-124" title="124"></a>
<a class="sourceLine" id="cb105-125" title="125"><span class="kw">ggplot</span>(aa,<span class="kw">aes</span>(Var1,Freq)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)</a>
<a class="sourceLine" id="cb105-126" title="126"><span class="kw">ggplot</span>(drugs, <span class="kw">aes</span>(drug, effect)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-127" title="127"></a>
<a class="sourceLine" id="cb105-128" title="128"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-129" title="129"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb105-130" title="130"></a>
<a class="sourceLine" id="cb105-131" title="131"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-132" title="132"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-133" title="133"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;city driving (mpg)&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-134" title="134"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;highway driving (mpg)&quot;</span>)</a>
<a class="sourceLine" id="cb105-135" title="135"></a>
<a class="sourceLine" id="cb105-136" title="136"><span class="co"># Remove the axis labels with NULL</span></a>
<a class="sourceLine" id="cb105-137" title="137"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(cty, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-138" title="138"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-139" title="139"><span class="st">  </span><span class="kw">xlab</span>(<span class="ot">NULL</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-140" title="140"><span class="st">  </span><span class="kw">ylab</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb105-141" title="141"></a>
<a class="sourceLine" id="cb105-142" title="142"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-143" title="143"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.25</span>)</a>
<a class="sourceLine" id="cb105-144" title="144"></a>
<a class="sourceLine" id="cb105-145" title="145"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-146" title="146"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.25</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-147" title="147"><span class="st">  </span><span class="kw">xlim</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;r&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-148" title="148"><span class="st">  </span><span class="kw">ylim</span>(<span class="dv">20</span>, <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb105-149" title="149"><span class="co">#&gt; Warning: Removed 137 rows containing missing values (geom_point).</span></a>
<a class="sourceLine" id="cb105-150" title="150"></a>
<a class="sourceLine" id="cb105-151" title="151"><span class="co"># For continuous scales, use NA to set only one limit</span></a>
<a class="sourceLine" id="cb105-152" title="152"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(drv, hwy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-153" title="153"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-154" title="154"><span class="st">  </span><span class="kw">ylim</span>(<span class="ot">NA</span>, <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb105-155" title="155"></a>
<a class="sourceLine" id="cb105-156" title="156"></a>
<a class="sourceLine" id="cb105-157" title="157"><span class="co">#output</span></a>
<a class="sourceLine" id="cb105-158" title="158">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy, <span class="dt">colour =</span> <span class="kw">factor</span>(cyl))) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-159" title="159"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb105-160" title="160"></a>
<a class="sourceLine" id="cb105-161" title="161"><span class="co"># Save png to disk</span></a>
<a class="sourceLine" id="cb105-162" title="162"></a>
<a class="sourceLine" id="cb105-163" title="163"></a>
<a class="sourceLine" id="cb105-164" title="164"><span class="kw">ggsave</span>(<span class="st">&quot;plot.png&quot;</span>, p, <span class="dt">width =</span> <span class="dv">5</span>, <span class="dt">height =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb105-165" title="165"></a>
<a class="sourceLine" id="cb105-166" title="166"><span class="kw">saveRDS</span>(p, <span class="st">&quot;plot.rds&quot;</span>)</a>
<a class="sourceLine" id="cb105-167" title="167">q &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;plot.rds&quot;</span>)</a>
<a class="sourceLine" id="cb105-168" title="168"></a>
<a class="sourceLine" id="cb105-169" title="169"><span class="kw">ggplot</span>(faithfuld, <span class="kw">aes</span>(eruptions, waiting)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-170" title="170"><span class="st">  </span><span class="kw">geom_contour</span>(<span class="kw">aes</span>(<span class="dt">z =</span> density, <span class="dt">colour =</span> ..level..))</a>
<a class="sourceLine" id="cb105-171" title="171"></a>
<a class="sourceLine" id="cb105-172" title="172">mi_counties &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;world&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-173" title="173"><span class="st">  </span><span class="kw">select</span>(<span class="dt">lon =</span> long, lat, group, <span class="dt">id =</span> subregion)</a>
<a class="sourceLine" id="cb105-174" title="174"></a>
<a class="sourceLine" id="cb105-175" title="175"><span class="kw">ggplot</span>(mi_counties, <span class="kw">aes</span>(lon, lat)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-176" title="176"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="fl">.25</span>, <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-177" title="177"><span class="st">  </span><span class="kw">coord_quickmap</span>()</a>
<a class="sourceLine" id="cb105-178" title="178"></a>
<a class="sourceLine" id="cb105-179" title="179"><span class="kw">ggplot</span>(mi_counties, <span class="kw">aes</span>(lon, lat, <span class="dt">group =</span> group)) <span class="op">+</span></a>
<a class="sourceLine" id="cb105-180" title="180"><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;grey50&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb105-181" title="181"><span class="st">  </span><span class="kw">coord_quickmap</span>()</a>
<a class="sourceLine" id="cb105-182" title="182"></a>
<a class="sourceLine" id="cb105-183" title="183"><span class="co">#temas</span></a>
<a class="sourceLine" id="cb105-184" title="184"><span class="kw">theme_bw</span>()</a>
<a class="sourceLine" id="cb105-185" title="185"><span class="kw">theme_grey</span>()</a>
<a class="sourceLine" id="cb105-186" title="186"><span class="kw">theme_linedraw</span>()</a>
<a class="sourceLine" id="cb105-187" title="187"><span class="kw">theme_light</span>()</a>
<a class="sourceLine" id="cb105-188" title="188"><span class="kw">theme_dark</span>()</a>
<a class="sourceLine" id="cb105-189" title="189"><span class="kw">theme_minimal</span>()</a>
<a class="sourceLine" id="cb105-190" title="190"><span class="kw">theme_classic</span>()</a>
<a class="sourceLine" id="cb105-191" title="191"><span class="kw">theme_void</span>()</a></code></pre></div>
</div>
<div id="r-markdown" class="section level2">
<h2><span class="header-section-number">1.10</span> R Markdown</h2>
<p><strong>“R Markdown”</strong> se introdujo por primera vez en el paquete knitr a principios de 2012. La idea era incrustar fragmentos de código (de R u otros) en los documentos de Markdown. De hecho, knitr soportó varios lenguajes de autoría desde el principio además de Markdown, incluidos LaTeX, HTML, AsciiDoc, reStructuredText y Textile.</p>
<p>Markdown se ha convertido en el formato de documento más popular. La simplicidad de Markdown se destaca claramente entre estos formatos de documentos.</p>
<div id="instalación" class="section level3">
<h3><span class="header-section-number">1.10.1</span> Instalación</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1"><span class="kw">install.packages</span>(<span class="st">&#39;rmarkdown&#39;</span>)</a>
<a class="sourceLine" id="cb106-2" title="2"></a>
<a class="sourceLine" id="cb106-3" title="3"><span class="co"># Si se prefiere la versión en desarrollo</span></a>
<a class="sourceLine" id="cb106-4" title="4"><span class="cf">if</span> (<span class="op">!</span><span class="kw">requireNamespace</span>(<span class="st">&quot;devtools&quot;</span>))</a>
<a class="sourceLine" id="cb106-5" title="5">  <span class="kw">install.packages</span>(<span class="st">&#39;devtools&#39;</span>)</a>
<a class="sourceLine" id="cb106-6" title="6">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&#39;rstudio/rmarkdown&#39;</span>)</a></code></pre></div>
<p>Si el objetivo es usar Markdown para generar documentos PDF se necesita instalar Latex.</p>
<p>Existen cheatsheets utiles para usar markdown, como: <a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf">cheatsheets</a></p>
</div>
<div id="yaml-header" class="section level3">
<h3><span class="header-section-number">1.10.2</span> YAML Header</h3>
<p>Al inicio del archivo y entre las lineas —</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="op">---</span></a>
<a class="sourceLine" id="cb107-2" title="2">title<span class="op">:</span><span class="st"> </span>Mi documento</a>
<a class="sourceLine" id="cb107-3" title="3">author<span class="op">:</span><span class="st"> </span>Juan Perez</a>
<a class="sourceLine" id="cb107-4" title="4">date<span class="op">:</span><span class="st"> </span>Marzo <span class="dv">22</span>, <span class="dv">20220</span></a>
<a class="sourceLine" id="cb107-5" title="5">output<span class="op">:</span><span class="st"> </span>html_document</a>
<a class="sourceLine" id="cb107-6" title="6"><span class="op">---</span></a></code></pre></div>
</div>
<div id="sintaxis-básica" class="section level3">
<h3><span class="header-section-number">1.10.3</span> Sintaxis básica</h3>
<p>Énfasis sobre el texto,</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1"><span class="op">*</span>italic<span class="op">*</span><span class="st">   </span><span class="er">**</span>bold<span class="op">**</span></a>
<a class="sourceLine" id="cb108-2" title="2">_italic_   __bold__</a></code></pre></div>
<p>Secciones,</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1"><span class="co"># Header 1</span></a>
<a class="sourceLine" id="cb109-2" title="2"><span class="co">## Header 2</span></a>
<a class="sourceLine" id="cb109-3" title="3"><span class="co">### Header 3</span></a></code></pre></div>
<p>Items (viñetas) no ordenadas y ordenadas,</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" title="1"><span class="op">*</span><span class="st"> </span>Item <span class="dv">1</span></a>
<a class="sourceLine" id="cb110-2" title="2"><span class="op">*</span><span class="st"> </span>Item <span class="dv">2</span></a>
<a class="sourceLine" id="cb110-3" title="3">    <span class="op">+</span><span class="st"> </span>Item 2a</a>
<a class="sourceLine" id="cb110-4" title="4">    <span class="op">+</span><span class="st"> </span>Item 2b</a>
<a class="sourceLine" id="cb110-5" title="5"></a>
<a class="sourceLine" id="cb110-6" title="6"><span class="fl">1.</span> Item <span class="dv">1</span></a>
<a class="sourceLine" id="cb110-7" title="7"><span class="fl">2.</span> Item <span class="dv">2</span></a>
<a class="sourceLine" id="cb110-8" title="8"><span class="fl">3.</span> Item <span class="dv">3</span></a>
<a class="sourceLine" id="cb110-9" title="9">    <span class="op">+</span><span class="st"> </span>Item 3a</a>
<a class="sourceLine" id="cb110-10" title="10">    <span class="op">+</span><span class="st"> </span>Item 3b</a></code></pre></div>
<p>Palabras clave con referencias web,</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1">[linked phrase](http<span class="op">:</span><span class="er">//</span>example.com)</a></code></pre></div>
<p>Imágenes simples o con titulo,</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="op">!</span>[](http<span class="op">:</span><span class="er">//</span>example.com<span class="op">/</span>logo.png)</a>
<a class="sourceLine" id="cb112-2" title="2"></a>
<a class="sourceLine" id="cb112-3" title="3"><span class="op">!</span>[optional caption text](figures<span class="op">/</span>img.png)</a></code></pre></div>
<p>Blockquotes</p>
<blockquote>
<p>It’s always better to give than to receive.</p>
</blockquote>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" title="1">A friend once said<span class="op">:</span></a>
<a class="sourceLine" id="cb113-2" title="2"></a>
<a class="sourceLine" id="cb113-3" title="3"><span class="er">&gt;</span><span class="st"> </span>It<span class="st">&#39;s always better to give than to receive.</span></a></code></pre></div>
<p>Ecuaciones en linea y en párrafo,</p>
<p>En linea <span class="math inline">\(\sum_i{x^2}\)</span> o en párrafo:</p>
<p><span class="math display">\[\sum_i{x^2}\]</span></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="op">$</span>equation<span class="op">$</span></a>
<a class="sourceLine" id="cb114-2" title="2"></a>
<a class="sourceLine" id="cb114-3" title="3"><span class="er">$$</span><span class="st"> </span>equation <span class="op">$</span><span class="er">$</span></a></code></pre></div>
</div>
<div id="tipos-de-documentos" class="section level3">
<h3><span class="header-section-number">1.10.4</span> Tipos de documentos</h3>
<ul>
<li>beamer_presentation</li>
<li>github_document</li>
<li>html_document</li>
<li>ioslides_presentation</li>
<li>latex_document</li>
<li>md_document</li>
<li>odt_document</li>
<li>pdf_document</li>
<li>powerpoint_presentation</li>
<li>rtf_document</li>
<li>slidy_presentation</li>
<li>word_document</li>
</ul>
</div>
<div id="chunks" class="section level3">
<h3><span class="header-section-number">1.10.5</span> Chunks</h3>
<p>Los chunks son entornos que permiten incluir código en R dentro de las distintos tipos de documentos que genera Rmarkdown, los chunks inician con <code>```{r} y termina con ```</code>, también es posible introducir chunks en linea con el texto, esto se logra introduciendo</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" title="1">Texto ... <span class="st">`</span><span class="dt">r &lt;code&gt;</span><span class="st">`</span> ... texto</a></code></pre></div>
<p>La parte {r} del chunk sirve para introducir las distintas opciones que va a contener ese chunk, las opciones disponibles son:</p>
<ul>
<li>echo (default = TRUE), muestra el código del chunk en la salida del documento</li>
<li>eval (default = TRUE), corre el código del chunk</li>
<li>message (default = TRUE), muestra los mensajes que genera el chunk</li>
</ul>
<p>Existen funciones útiles para mejorar las salidas de tablas, tales como xtable y kable de la librería knitr.</p>
</div>
</div>
<div id="shiny" class="section level2">
<h2><span class="header-section-number">1.11</span> Shiny</h2>
<p>Shiny es una librería de RStudio orientada a crear aplicaciones web interactivas con R. Una vez instalada existen dos formas de crear una aplicación en Shiny.
Una alternativa cada vez mas popular es la de crear un documento shiny junto con Markdown.</p>
<ol style="list-style-type: decimal">
<li>Mediante un solo archivo denominando app.R</li>
<li>Mediante dos archivos separados, el server.R y ui.R</li>
</ol>
<p>Se recomienda que en cualquiera de las dos alternativas, estos archivos estén contenidos en alguna carpeta. Existen dos partes esenciales al momento de definir una app en Shiny, el UI que es una función que define la interfaz de la aplicación y el Server que define una función con instrucciones sobre cómo construir y reconstruir los objetos R que se mostraran en la UI. La composición básica según las formas de aplicarlas son:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="co"># app.R</span></a>
<a class="sourceLine" id="cb116-2" title="2"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb116-3" title="3">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb116-4" title="4"><span class="kw">numericInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;n&quot;</span>,</a>
<a class="sourceLine" id="cb116-5" title="5"><span class="st">&quot;Sample size&quot;</span>, <span class="dt">value =</span> <span class="dv">25</span>),</a>
<a class="sourceLine" id="cb116-6" title="6"><span class="kw">plotOutput</span>(<span class="dt">outputId =</span> <span class="st">&quot;hist&quot;</span>)</a>
<a class="sourceLine" id="cb116-7" title="7">)</a>
<a class="sourceLine" id="cb116-8" title="8">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb116-9" title="9">output<span class="op">$</span>hist &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb116-10" title="10"><span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>n))</a>
<a class="sourceLine" id="cb116-11" title="11">})</a>
<a class="sourceLine" id="cb116-12" title="12">}</a>
<a class="sourceLine" id="cb116-13" title="13"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" title="1"><span class="co"># ui.R</span></a>
<a class="sourceLine" id="cb117-2" title="2"></a>
<a class="sourceLine" id="cb117-3" title="3"><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb117-4" title="4"><span class="kw">numericInput</span>(<span class="dt">inputId =</span> <span class="st">&quot;n&quot;</span>,</a>
<a class="sourceLine" id="cb117-5" title="5"><span class="st">&quot;Sample size&quot;</span>, <span class="dt">value =</span> <span class="dv">25</span>),</a>
<a class="sourceLine" id="cb117-6" title="6"><span class="kw">plotOutput</span>(<span class="dt">outputId =</span> <span class="st">&quot;hist&quot;</span>)</a>
<a class="sourceLine" id="cb117-7" title="7">)</a>
<a class="sourceLine" id="cb117-8" title="8"></a>
<a class="sourceLine" id="cb117-9" title="9"><span class="co"># server.R</span></a>
<a class="sourceLine" id="cb117-10" title="10"></a>
<a class="sourceLine" id="cb117-11" title="11"><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb117-12" title="12">output<span class="op">$</span>hist &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb117-13" title="13"><span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>n))</a>
<a class="sourceLine" id="cb117-14" title="14">})</a></code></pre></div>
<div id="ui" class="section level3">
<h3><span class="header-section-number">1.11.1</span> UI</h3>
<p>Al ser UI la interfaz esta permite la interacción directa con el usuario, a estas se las denominan los entradas <span class="math inline">\(input\)</span>, las opciones de <em>input</em> son:</p>
<ul>
<li><strong>Botón de acción:</strong> actionButton(inputId, label, icon)</li>
<li><strong>Enlace:</strong> actionLink(inputId, label, icon,)</li>
<li><strong>Check box múltiple:</strong> checkboxGroupInput(inputId,label, choices, selected, inline)</li>
<li><strong>Check box simple:</strong> checkboxInput(inputId, label,value)</li>
<li><strong>Fecha:</strong> dateInput(inputId, label, value,min, max, format, startview,weekstart, language)</li>
<li><strong>Rango de fecha:</strong> dateRangeInput(inputId, label,start, end, min, max, format,startview, weekstart, language,separator)</li>
<li><strong>Cargar archivo:</strong> fileInput(inputId, label, multiple,accept)</li>
<li><strong>Entrada numérica:</strong> numericInput(inputId, label, value,min, max, step)</li>
<li><strong>Tipo contraseña:</strong> passwordInput(inputId, label,value)</li>
<li><strong>Selección tipo botones:</strong> radioButtons(inputId, label,choices, selected, inline)</li>
<li><strong>Seleccionable:</strong> selectInput(inputId, label, choices,selected, multiple, selectize,width, size)</li>
<li><strong>Slider:</strong> sliderInput(inputId, label, min,max, value, step, round, format,locale, ticks, animate, * width,sep,pre, post)</li>
<li><strong>Enviar</strong> submitButton(text, icon)</li>
<li><strong>Entrada de texto</strong> textInput(inputId, label, value)</li>
</ul>
<p>Los inputs principalmente tienen dos argumentos el <strong>inputId</strong> que se refiere al identificador del input, este se utiliza en el server, y el <strong>label</strong> que es la etiqueta que aparece en la interfaz visual, estos inputs se asignan a algún objeto (xx&lt;-input()). En el server se tiene acceso al input mediante input$xx.</p>
</div>
<div id="server" class="section level3">
<h3><span class="header-section-number">1.11.2</span> Server</h3>
<p>En cuanto el server, este usa los distintos inputs para generar las salidas (outputs), las opciones de salidas disponibles son:</p>
<ul>
<li>DT::renderDataTable(expr, options,callback, escape, env, quoted)</li>
<li>renderImage(expr, env, quoted,deleteFile)</li>
<li>renderPlot(expr, width, height, res, …,env, quoted, func)</li>
<li>renderPrint(expr, env, quoted, func,width)</li>
<li>renderTable(expr,…, env, quoted, func)</li>
<li>renderText(expr, env, quoted, func)</li>
<li>renderUI(expr, env, quoted, func)</li>
</ul>
<p>Estos outputs “render” se asignan a un objeto y luego ellos deben ser incluidos dentro del UI con su correspondiente Output:</p>
<ul>
<li>dataTableOutput(outputId, icon, …)</li>
<li>imageOutput(outputId, width, height,click, dblclick, hover, hoverDelay, inline,hoverDelayType, brush, clickId,hoverId)</li>
<li>plotOutput(outputId, width, height, click,dblclick, hover, hoverDelay, inline,hoverDelayType, brush, clickId,hoverId)</li>
<li>verbatimTextOutput(outputId)</li>
<li>tableOutput(outputId)</li>
<li>textOutput(outputId, container, inline)</li>
<li>uiOutput(outputId, inline, container, …) y htmlOutput(outputId, inline, container, …)</li>
</ul>
</div>
</div>
<div id="ejercicios-propuestos" class="section level2">
<h2><span class="header-section-number">1.12</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Crear una función que devuelva los <span class="math inline">\(k\)</span> primeros números primos</li>
<li>Crear una función que calcule la mediana para tablas de frecuencias con intervalos de clases</li>
<li>Crear una función que calcule los Quantiles para tablas de frecuencias con intervalos de clases</li>
<li>Realice una función para el calculo del tamaño de muestra para el muestreo aleatorio simple, considere la media, el margen de error relativo y coeficientes de confianza.</li>
<li>Crear una función que realice la prueba de independencia Chi-cuadrado</li>
<li>Empleando la ENDSA muestre por año y departamento el porcentaje de personas que fuman</li>
<li>Utilizando la base de datos del COVID-19 genere un gráfico de evolución de contagios, muertes y recuperados. Use los gráficos de origen</li>
<li>Utilizando la base de datos del COVID-19 genere un gráfico de evolución de contagios, muertes y recuperados. Use ggplot</li>
<li>Utilizando la encuesta 2018, genere un reporte que presente:
<ul>
<li>Total de población y viviendas por departamento y área</li>
<li>Pobreza moderada por Departamento y área</li>
<li>Indice de Gini por departamento</li>
</ul></li>
<li>Realice una función en Shiny empleando la base de datos electoral del <span class="math inline">\(20o\)</span> que permita ver los resultados por recinto, seleccionando, su país, departamento, municipio, recinto.</li>
<li>Usando la EH 2018, determine el porcentaje de personas que sufrieron un Atraco (Robo a personas) en la vía pública en los últimos 12 meses.</li>
</ol>
<!--chapter:end:1_introR.Rmd-->
</div>
</div>
<div id="scraping-web" class="section level1">
<h1><span class="header-section-number">2</span> Scraping Web</h1>
<p>La definición del scraping web que se toma en este documento proviene de <span class="citation">(<span class="citeproc-not-found" data-reference-id="Mitchell2015"><strong>???</strong></span>)</span> que expresa:</p>
<p><strong>
El Web Scraping es la recolección automática de información de los sitios web. (obviamente no a través de un humano usando un navegador web).
</strong></p>
<p>Un tema dentro del scraping web son las denominadas APIs (Application Programming Interface), estas son entradas a las paginas web diseñadas por los administradores de la pagina web, por lo mismo no siempre contienen toda la información que se desea. Aunque las API no son tan ubicuas como deberían, puede encontrar API para muchos tipos de información. Interesado en la música? Hay algunas API diferentes que pueden darle canciones, artistas, álbumes e incluso información sobre estilos musicales y artistas relacionados. ¿Necesitas datos deportivos? ESPN proporciona API para información de atletas, puntajes de juegos y más. Google tiene docenas de API en su sección de Desarrolladores para traducciones de idiomas, análisis, geolocalización y más.</p>
<div id="pasos-para-la-recopilación-de-información" class="section level2">
<h2><span class="header-section-number">2.1</span> Pasos para la recopilación de información</h2>
<p>Siguiendo a <span class="citation">(<span class="citeproc-not-found" data-reference-id="Iacus2015"><strong>???</strong></span>)</span> que establece cinco pasos al momento de decidir recopilar información mediante el scraping web, estos pasos son:</p>
<ol style="list-style-type: decimal">
<li>Asegúrese de saber exactamente qué tipo de información necesita. Esto puede ser específico (<code>el producto interno bruto de todos los países de la OCDE durante los últimos 10 años'') o vago (</code>opinión de la gente sobre el teléfono de la empresa X’‘, ``colaboración entre miembros del Senado de los Estados Unidos’’).</li>
<li>Averigüe si hay fuentes de datos en la Web que puedan proporcionar información directa o indirecta sobre su problema. Si está buscando hechos concretos, esto probablemente sea fácil. Si está interesado en conceptos bastante vagos, esto es más difícil.</li>
</ol>
<p><strong>La página de inicio de la embajada de un país podría ser una fuente valiosa para la acción de política exterior que a menudo se oculta detrás del telón de la diplomacia. Los tweets pueden contener tendencias de opinión sobre casi todo, las plataformas comerciales pueden informar sobre la satisfacción de los clientes con los productos, las tarifas de alquiler en los sitios web de propiedades pueden contener información sobre el atractivo actual de los barrios de la ciudad …
</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Desarrolle una teoría del proceso de generación de datos cuando busque fuentes potenciales. ¿Cuándo se generaron los datos, cuándo se cargaron en la Web y quién lo hizo? ¿Existen áreas potenciales que no están cubiertas, son consistentes o precisas, y puede identificarlas y corregirlas?</li>
<li>Equilibrar las ventajas y desventajas de las posibles fuentes de datos. Los aspectos relevantes pueden ser la disponibilidad (¡y la legalidad!), los costos de recolección, la compatibilidad de nuevas fuentes con la investigación existente, pero también factores muy subjetivos como la aceptación de la fuente de datos por parte de otros. También piense en posibles formas de validar la calidad de sus datos. ¿Existen otras fuentes independientes que brinden información similar para que sean posibles verificaciones cruzadas aleatorias? En caso de datos secundarios, ¿puede identificar la fuente original y verificar los errores de transferencia?</li>
<li>¡Toma una decisión! Elija la fuente de datos que le parezca más adecuada, documente los motivos de la decisión y comience con los preparativos para la recopilación. Si es factible, recopile datos de varias fuentes para validar las fuentes de datos. Muchos problemas y beneficios de varias estrategias de recopilación de datos salen a la luz solo después de la recopilación real.</li>
</ol>
</div>
<div id="tecnologías-de-diseminación-extracción-y-almacenamiento-web" class="section level2">
<h2><span class="header-section-number">2.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</h2>
<p>Una vez elegida la fuente de datos (página web) y al menos con la intuición de lo que se quiere obtener, el siguiente paso es decidir el mecanismos para el scraping (raspado), esto esta relacionado al tipo de pagina web, ver si esta ofrece una entrada API y conocer sus limitaciones puede ser un punto de partida. Esto se denomina <em>Technologies for disseminating, extracting, and storing web data Collecting</em>, en el marco del uso de R la figura  muestra las interacciones entre ellas.</p>
<p><img src="images/scrap1.png" />
<em>Tecnologías para difundir, extraer y almacenar datos web (considerando el entorno de R)</em></p>
</div>
<div id="librerías-en-r" class="section level2">
<h2><span class="header-section-number">2.3</span> Librerías en R</h2>
<p>El siguiente cuadro presenta las librerías en R relacionadas al web Scraping, incluyendo los servicios API, que a la fecha del proyecto alcanza a 761 librerías, esto representa el <span class="math inline">\(5.02\)</span>% de las librerías en en R.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb118-2" title="2"><span class="kw">library</span>(packagefinder)</a>
<a class="sourceLine" id="cb118-3" title="3"><span class="kw">library</span>(xtable)</a>
<a class="sourceLine" id="cb118-4" title="4"><span class="kw">findPackage</span>(<span class="kw">c</span>(<span class="st">&quot;API&quot;</span>,<span class="st">&quot;scrape&quot;</span>),<span class="dt">limit.results=</span><span class="op">-</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## Your are searching packages for the terms &#39;API&#39;, &#39;scrape&#39; in or mode (at least one occurence of any of the search terms)
## 
## Please wait while index is being searched...
## 
## Results: 798 out of 15728 CRAN packages found in 169 seconds.</code></pre>
</div>
<div id="librería-rvest" class="section level2">
<h2><span class="header-section-number">2.4</span> Librería rvest</h2>
<p>Rvest es parte del universo tidyverse y esta orientada al scrape de páginas web. La instalación es usual:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="co">#desde CRAN</span></a>
<a class="sourceLine" id="cb120-2" title="2"><span class="kw">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</a>
<a class="sourceLine" id="cb120-3" title="3"><span class="co">#la versión en desarrollo desde github</span></a>
<a class="sourceLine" id="cb120-4" title="4">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/rvest&quot;</span>)</a></code></pre></div>
<p>Existe la herramienta selectorgadget disponible en <a href="http://selectorgadget.com/" class="uri">http://selectorgadget.com/</a>, esta permite interactuar con las paginas web para seleccionar partes del documento usando un CSS selector. Las funciones mas importantes dentro de rvest son:</p>
<ul>
<li>read_html para cargar la estructura de la página</li>
<li>html_nodes para extraer informacion de la pagina segun el CSS selector</li>
<li>html_text para extraer texto de un html_nodes</li>
<li>html_table para extraer tablas y ponerlas en data frame</li>
</ul>
</div>
<div id="ejemplo-ketal" class="section level2">
<h2><span class="header-section-number">2.5</span> Ejemplo: Ketal</h2>
<p>Una de las potencialidades del scraping es poder rescatar información contenida en páginas web, según la estructura de esta, en esta sección se presenta un ejemplo del código y la recolección de información que puede realizarse. Para esto se eligió la página de supermercados Ketal que es abierta y publica los precios de sus distintos productos de forma categorizada por tipo de productos.</p>
<p>El estudio de esta pagina tiene el principal objetivo de mostrar el proceso de extracción, el uso potencial de la información esta relacionada a tener la variación de los precios y para futuros estudios se podría completar el ejercicio incluyendo la parte de la demanda mediante la encuesta de presupuestos familiares y poder así pronosticar la inflación dentro de este sector y para la población potencial que acude a supermercados.</p>
<p>El ejemplo presenta el proceso del scraping para 8 grupo de productos:</p>
<ul>
<li>Carne de aves</li>
<li>Carne de cerdo</li>
<li>Carne de res</li>
<li>Pescado</li>
<li>Leches</li>
<li>Aceites</li>
<li>Frutas y verduras</li>
<li>Dulces</li>
</ul>
<p>Se emplea la libreria <em>rvest</em>, que es un paquete diseña para para facilitar la descarga y la manipulación de HTML y XML. También se utiliza la extensión Selector Gadget <a href="https://selectorgadget.com" class="uri">https://selectorgadget.com</a>, este permite la identificación de las estructuras de las páginas web.</p>
<p>El objetivo del raspado es obtener el nombre del producto, su código, y el precio. Utilizando el selector gadget se identifica que en <span class="math inline">\(.product-name\)</span> se guardan los nombres, en <span class="math inline">\(.price.product-price\)</span> el precio del producto y en <span class="math inline">\(data-id-product\)</span> el identificador del producto. En R el código es:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="co">#librerías para el raspado</span></a>
<a class="sourceLine" id="cb121-2" title="2"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb121-3" title="3"><span class="co">#Enlaces de los grupos de productos</span></a>
<a class="sourceLine" id="cb121-4" title="4">ave &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/209-aves&quot;</span>)</a>
<a class="sourceLine" id="cb121-5" title="5">cerdo&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/208-cerdo&quot;</span>)</a>
<a class="sourceLine" id="cb121-6" title="6">res&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/210-res&quot;</span>)</a>
<a class="sourceLine" id="cb121-7" title="7">fish&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/17060162-pescados&quot;</span>)</a>
<a class="sourceLine" id="cb121-8" title="8">leches&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/53-leches-liquidas&quot;</span>)</a>
<a class="sourceLine" id="cb121-9" title="9">aceites&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/272-aceites-y-vinagres&quot;</span>)</a>
<a class="sourceLine" id="cb121-10" title="10">frutaver&lt;-<span class="kw">read_html</span>(</a>
<a class="sourceLine" id="cb121-11" title="11">  <span class="st">&quot;https://www.ketal.com.bo/50-frutas-y-verduras?id_category=50&amp;n=150&quot;</span>)</a>
<a class="sourceLine" id="cb121-12" title="12">dulce&lt;-<span class="kw">read_html</span>(</a>
<a class="sourceLine" id="cb121-13" title="13">  <span class="st">&quot;https://www.ketal.com.bo/15-chocolates-y-golosinas?id_category=15&amp;n=150&quot;</span>)</a>
<a class="sourceLine" id="cb121-14" title="14"><span class="co">#definición de la base de datos que guarda la información</span></a>
<a class="sourceLine" id="cb121-15" title="15">bd&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb121-16" title="16"><span class="co">#Algoritmo del raspado de los 8 productos</span></a>
<a class="sourceLine" id="cb121-17" title="17">k&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb121-18" title="18"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">list</span>(ave,cerdo,res,fish,leches,aceites,frutaver,dulce)){</a>
<a class="sourceLine" id="cb121-19" title="19">  <span class="kw">print</span>(k)</a>
<a class="sourceLine" id="cb121-20" title="20">  name&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.product-name&quot;</span>),<span class="st">&quot;title&quot;</span>)[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb121-21" title="21">  precio&lt;-<span class="kw">html_text</span>(</a>
<a class="sourceLine" id="cb121-22" title="22">    <span class="kw">html_nodes</span>(i,<span class="st">&quot;.price.product-price&quot;</span>),<span class="dt">trim=</span>T)[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">length</span>(name)<span class="op">*</span><span class="dv">2</span>,<span class="dv">2</span>)]</a>
<a class="sourceLine" id="cb121-23" title="23">  code&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.add_to_compare&quot;</span>),<span class="st">&quot;data-id-product&quot;</span>)</a>
<a class="sourceLine" id="cb121-24" title="24">  bd&lt;-<span class="kw">rbind</span>(bd,<span class="kw">data.frame</span>(name,precio,code))</a>
<a class="sourceLine" id="cb121-25" title="25">  k&lt;-k<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb121-26" title="26">}</a>
<a class="sourceLine" id="cb121-27" title="27"><span class="co">#se identifica el día</span></a>
<a class="sourceLine" id="cb121-28" title="28">day&lt;-<span class="kw">substr</span>(<span class="kw">Sys.time</span>(),<span class="dv">1</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb121-29" title="29"><span class="co">#se guarda la informacion en base al dia del raspado</span></a>
<a class="sourceLine" id="cb121-30" title="30">bd<span class="op">$</span>day&lt;-day</a>
<a class="sourceLine" id="cb121-31" title="31"><span class="kw">save</span>(bd,<span class="dt">file =</span> <span class="kw">paste0</span>(day,<span class="st">&quot;.RData&quot;</span>))</a></code></pre></div>
</div>
<div id="ejemplo-ministerio-de-educación" class="section level2">
<h2><span class="header-section-number">2.6</span> Ejemplo: Ministerio de Educación</h2>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb122-2" title="2"><span class="kw">library</span>(foreign)</a>
<a class="sourceLine" id="cb122-3" title="3"><span class="kw">library</span>(xlsx)</a>
<a class="sourceLine" id="cb122-4" title="4"><span class="co">########################</span></a>
<a class="sourceLine" id="cb122-5" title="5">bd&lt;-<span class="kw">read.dta</span>(<span class="st">&quot;mmUE.dta&quot;</span>)</a>
<a class="sourceLine" id="cb122-6" title="6">rue&lt;-bd<span class="op">$</span>cod_ue_det</a>
<a class="sourceLine" id="cb122-7" title="7">rue&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(rue,<span class="st">&quot;;&quot;</span>))</a>
<a class="sourceLine" id="cb122-8" title="8">bd&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">78</span>))</a>
<a class="sourceLine" id="cb122-9" title="9">k&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb122-10" title="10"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">325</span><span class="op">:</span><span class="kw">length</span>(rue)){</a>
<a class="sourceLine" id="cb122-11" title="11"> <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb122-12" title="12">urlmin&lt;-<span class="kw">paste0</span>(<span class="st">&quot;http://seie.minedu.gob.bo/reportes/mapas_unidades_educativas/ficha/ver/&quot;</span>,rue[i])</a>
<a class="sourceLine" id="cb122-13" title="13"> ue &lt;-<span class="st"> </span><span class="kw">read_html</span>(urlmin,<span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</a>
<a class="sourceLine" id="cb122-14" title="14"></a>
<a class="sourceLine" id="cb122-15" title="15">jj&lt;-<span class="kw">grepl</span>(<span class="st">&quot;Error was&quot;</span>,<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>)])</a>
<a class="sourceLine" id="cb122-16" title="16"><span class="cf">if</span>(jj<span class="op">==</span>T){</a>
<a class="sourceLine" id="cb122-17" title="17">  <span class="cf">next</span>()</a>
<a class="sourceLine" id="cb122-18" title="18">}</a>
<a class="sourceLine" id="cb122-19" title="19"><span class="co">#nombre id (2)</span></a>
<a class="sourceLine" id="cb122-20" title="20">bd[k,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</a>
<a class="sourceLine" id="cb122-21" title="21"><span class="co">#Informacion administrativa (12)</span></a>
<a class="sourceLine" id="cb122-22" title="22">bd[k,<span class="dv">3</span><span class="op">:</span><span class="dv">14</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;dd&quot;</span>))</a>
<a class="sourceLine" id="cb122-23" title="23"><span class="co">#matricula #promovidos #reprobacion #abandono # (60)</span></a>
<a class="sourceLine" id="cb122-24" title="24"><span class="co">#matricula</span></a>
<a class="sourceLine" id="cb122-25" title="25"><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>){</a>
<a class="sourceLine" id="cb122-26" title="26">bd[k,(<span class="dv">15</span><span class="op">*</span>j)<span class="op">:</span>(<span class="dv">14</span><span class="op">+</span><span class="dv">15</span><span class="op">*</span>j)]&lt;-<span class="kw">as.integer</span>(<span class="kw">unlist</span>(<span class="kw">html_table</span>(ue)[j])[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)])</a>
<a class="sourceLine" id="cb122-27" title="27">}</a>
<a class="sourceLine" id="cb122-28" title="28"><span class="co">#servicios (4)</span></a>
<a class="sourceLine" id="cb122-29" title="29">bd[k,<span class="dv">75</span><span class="op">:</span><span class="dv">78</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">18</span><span class="op">:</span><span class="dv">21</span>]</a>
<a class="sourceLine" id="cb122-30" title="30">k&lt;-k<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb122-31" title="31">}</a>
<a class="sourceLine" id="cb122-32" title="32"><span class="kw">write.xlsx</span>(bd,<span class="st">&quot;ue2017.xlsx&quot;</span>,<span class="dt">row.names =</span> F)</a></code></pre></div>
</div>
<div id="ejemplo-informacion-covid-19-en-bolivia" class="section level2">
<h2><span class="header-section-number">2.7</span> Ejemplo, informacion COVID-19 en Bolivia</h2>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" title="1"><span class="kw">library</span>(rvest)</a></code></pre></div>
<pre><code>## Loading required package: xml2</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" title="1"><span class="co">#paso 0: Estadísticas del covid-19 en Bolivia</span></a>
<a class="sourceLine" id="cb125-2" title="2"><span class="co">#paso 1: cargar la www de interés</span></a>
<a class="sourceLine" id="cb125-3" title="3">bs&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.boliviasegura.gob.bo/&quot;</span>)</a>
<a class="sourceLine" id="cb125-4" title="4">ww&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.worldometers.info/coronavirus/&quot;</span>)</a>
<a class="sourceLine" id="cb125-5" title="5"><span class="co">#paso 2: Raspar la información de interés</span></a>
<a class="sourceLine" id="cb125-6" title="6">node0&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;h1&quot;</span>)</a>
<a class="sourceLine" id="cb125-7" title="7">node1&lt;-<span class="kw">html_text</span>(node0)</a>
<a class="sourceLine" id="cb125-8" title="8">node2&lt;-<span class="kw">as.numeric</span>(node1) </a>
<a class="sourceLine" id="cb125-9" title="9"><span class="kw">barplot</span>(node2,<span class="dt">legend.text =</span> <span class="kw">c</span>(<span class="st">&quot;Confirmados&quot;</span>,<span class="st">&quot;Recuperados&quot;</span>,<span class="st">&quot;Muertes&quot;</span>))</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1">aux&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;.mapanuevos&quot;</span>)</a>
<a class="sourceLine" id="cb126-2" title="2"><span class="co">#paso 3: trabajando con tablas</span></a>
<a class="sourceLine" id="cb126-3" title="3">tabla&lt;-<span class="kw">html_table</span>(bs,<span class="dt">fill =</span> T)</a>
<a class="sourceLine" id="cb126-4" title="4">tabla[[<span class="dv">2</span>]]</a></code></pre></div>
<pre><code>##   Departamento Hoy Acumulado Decesos Recuperados
## 1         Beni 151     1,506      84           8
## 2   Chuquisaca   0        25       2          11
## 3   Cochabamba  43       419      19          60
## 4       La Paz   8       423      26         234
## 5        Oruro   4       159      13          72
## 6        Pando   0        13       1           7
## 7       Potosí   2        46       1          20
## 8   Santa Cruz 408     5,774     144         319
## 9       Tarija   3        22       3           7</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1"><span class="co">#paso 4: limpieza</span></a>
<a class="sourceLine" id="cb128-2" title="2"><span class="co">#paso 5: Análisis</span></a></code></pre></div>
</div>
<div id="apis" class="section level2">
<h2><span class="header-section-number">2.8</span> APIs</h2>
<p>Conocida también por la sigla API,“application programming interface”, es un conjunto de subrutinas, funciones y procedimientos (o métodos, en la programación orientada a objetos) que ofrece cierta biblioteca para ser utilizado por otro software. Ofrece una entrada a los datos que distribuye el API.</p>
<div id="api-banco-mundial" class="section level3">
<h3><span class="header-section-number">2.8.1</span> API Banco Mundial</h3>
<p>La API ofrece acceso a las estadísticas que genera el Banco Mundial, existe un set extenso de estadisticas de la mayoria de los paises. La API ofrece mas de 16000 indicadores de series de tiempo, muchos de los indicadores tienen una cobertura de 50 años. La API incluye el acceso a 45 bases de datos, incluyendo:</p>
<ul>
<li>World Development Indicators</li>
<li>International Debt Statistcs</li>
<li>Doing Business</li>
<li>Human Capital Index</li>
<li>Subnational Poverty</li>
<li>Y otros, <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation">ver</a></li>
</ul>
<p>En R s epuede acceder mediante la libreria wbstats.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;wbstats&quot;</span>)</a>
<a class="sourceLine" id="cb129-2" title="2"><span class="kw">library</span>(wbstats)</a>
<a class="sourceLine" id="cb129-3" title="3"><span class="co">#acceso a todos los indicadores disponibles</span></a>
<a class="sourceLine" id="cb129-4" title="4"><span class="kw">wbindicators</span>(<span class="st">&quot;es&quot;</span>)</a>
<a class="sourceLine" id="cb129-5" title="5"><span class="co">#acceso al catalogo de datos</span></a>
<a class="sourceLine" id="cb129-6" title="6"><span class="kw">wbdatacatalog</span>()</a>
<a class="sourceLine" id="cb129-7" title="7"><span class="co">#búsqueda de indicador</span></a>
<a class="sourceLine" id="cb129-8" title="8"><span class="kw">wbsearch</span>(<span class="dt">pattern =</span> <span class="st">&quot;education&quot;</span>)</a>
<a class="sourceLine" id="cb129-9" title="9"><span class="co"># ver los países y sus códigos </span></a>
<a class="sourceLine" id="cb129-10" title="10"><span class="kw">wbcountries</span>()             </a>
<a class="sourceLine" id="cb129-11" title="11"><span class="co">#Comando para extraer los indicadores</span></a>
<a class="sourceLine" id="cb129-12" title="12"><span class="kw">wb</span>(<span class="dt">country =</span> <span class="st">&quot;BOL&quot;</span>,<span class="dt">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>, <span class="dt">startdate =</span> <span class="dv">2000</span>, <span class="dt">enddate =</span> <span class="dv">2016</span>)</a></code></pre></div>
</div>
<div id="api-google-trends" class="section level3">
<h3><span class="header-section-number">2.8.2</span> API Google trends</h3>
<p>La librari gtrendsR permite acceder a la API de <a href="https://trends.google.es/trends/?geo=ES">google trends</a>, esta permite acceder a las tendencias de busqueda que se realizan mediante el motor de busqueda de Google.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="co">#install.packages(&quot;gtrendsR&quot;)</span></a>
<a class="sourceLine" id="cb130-2" title="2"><span class="kw">library</span>(gtrendsR)</a>
<a class="sourceLine" id="cb130-3" title="3"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb130-4" title="4">res &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="st">&quot;Coronavirus&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;BO&quot;</span>))</a>
<a class="sourceLine" id="cb130-5" title="5"><span class="kw">plot</span>(res)</a>
<a class="sourceLine" id="cb130-6" title="6"></a>
<a class="sourceLine" id="cb130-7" title="7"><span class="kw">kable</span>(<span class="kw">head</span>(res<span class="op">$</span>interest_over_time,<span class="dv">10</span>))</a></code></pre></div>
</div>
<div id="api-google-maps" class="section level3">
<h3><span class="header-section-number">2.8.3</span> API Google Maps</h3>
<p>R tiene la librari googleway que permite tener acceso a la API de google maps, es necesario una llave de autentificación.</p>
<p>Para la llave seguir los pasos en el <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=es-419">enlace</a></p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" title="1"><span class="co">#install.packages(&quot;googleway&quot;)</span></a>
<a class="sourceLine" id="cb131-2" title="2"><span class="kw">library</span>(googleway)</a>
<a class="sourceLine" id="cb131-3" title="3">map_key &lt;-<span class="st"> &#39;xxx&#39;</span></a>
<a class="sourceLine" id="cb131-4" title="4"><span class="kw">google_map</span>(<span class="dt">key =</span> map_key,<span class="dt">location =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">16.5030161</span>,<span class="op">-</span><span class="fl">68.1292566</span>),<span class="dt">zoom =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_traffic</span>()</a></code></pre></div>
</div>
</div>
<div id="ejercicios-propuestos-1" class="section level2">
<h2><span class="header-section-number">2.9</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Extraer la fecha, y el precio de compra y venta del dolar de la página <a href="https://www.bcb.gob.bo" class="uri">https://www.bcb.gob.bo</a></li>
<li>Usando la página <a href="https://www.trabajopolis.bo/" class="uri">https://www.trabajopolis.bo/</a> seleccionar un departamento y armar una base de dato de ofertas laborales</li>
<li>Armar una base de datos en base a la página <a href="https://www.infocasas.com.bo" class="uri">https://www.infocasas.com.bo</a></li>
<li>Explorar librarias API con acceso a Youtube y encontrar los 10 videos con más visualizaciones que incluyan a Bolivia en su titulo.</li>
<li>Explorar la libraria gtrendsR y explorar en que meses en Bolivia es mas frecuente la búsqueda de</li>
<li>Usar la informacion de worldometers y generar un gráfico de contagios por millon de los distintos paises.</li>
</ol>
<!--chapter:end:2_scraping.Rmd-->
</div>
</div>
<div id="introduccion-al-big-data" class="section level1">
<h1><span class="header-section-number">3</span> Introduccion al Big Data</h1>
<div id="definiendo-al-big-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Definiendo al Big Data</h2>
<p>De forma simple el Big Data se define como:</p>
<p><strong>DATA&gt;RAM</strong></p>
<p>O de forma mas literal “cualquier cosa demasiado grande para caber en su computadora.”</p>
<p>La Asociación Americana de Investigación de Opinión Pública menciona: “El término” Big Data “es una descripción imprecisa de un conjunto rico y complicado de características, prácticas, técnicas, cuestiones éticas y resultados, todos asociados con los datos”.</p>
</div>
<div id="las-5-v-en-el-big-data" class="section level2">
<h2><span class="header-section-number">3.2</span> Las 5 V en el Big Data</h2>
<ul>
<li>Velocidad</li>
<li>Volumen</li>
<li>Valor</li>
<li>Variedad</li>
<li>Veracidad</li>
</ul>
</div>
<div id="ciclo-de-vida-de-un-proyecto-de-análisis-de-datos" class="section level2">
<h2><span class="header-section-number">3.3</span> Ciclo de vida de un proyecto de análisis de datos</h2>
<p>Se pueden identificar 4 fases:</p>
<ol style="list-style-type: decimal">
<li>Clarify: (Clarificar) Llegar a familiarizarse con los datos</li>
<li>Develop: (Desarrollar) Crear un modelop de trabajo</li>
<li>Productize: (Producir) Automatizar e integrar</li>
<li>Publish: (Publicar) Socializar</li>
</ol>
<p>Estas fases pueden contener nodos adicionales según el proyecto:</p>
<ol start="0" style="list-style-type: decimal">
<li>Subset: Extraer los datos a explorar, los datos de trabajo</li>
<li>Clarify: (Clarificar) Llegar a familiarizarse con los datos</li>
<li>Develop: (Desarrollar) Crear un modelop de trabajo
*. Scale Up: Generalizar a la base de datos completa</li>
<li>Productize: (Producir) Automatizar e integrar</li>
<li>Publish: (Publicar) Socializar</li>
</ol>
<p>Otros ciclos de trabajo puedes ser:</p>
<ol style="list-style-type: decimal">
<li>Identificar el problema</li>
<li>Diseño del requerimiento de datos</li>
<li>Procesar los datos</li>
<li>Desarrollo del analisis sobre los datos</li>
<li>Vizualizar los datos</li>
</ol>
</div>
<div id="inferencia-y-big-data" class="section level2">
<h2><span class="header-section-number">3.4</span> Inferencia y Big Data</h2>
<p>El objetivo de la inferencia es poder decir algo de la población objetivo a partir de la información disponibles. Se debe tener en cuenta los tipos de estudio provenientes; ya sean de encuestas probabilísticas, diseño experimentales o estudios de observación. Se debe estar seguro de la calidad de la base de datos proveniente, ya sean estos los errores de muestreo, procesos de calibración, ponderacion, post estratificación en el caso de muestreo o el el propensity score y la estratificacion principal para repara diseño experimentales rotos.</p>
<p>Se puede distinguir tres metas en el proceso de inferencia:</p>
<ul>
<li>Descriptivo</li>
<li>Causal</li>
<li>Predictivo</li>
</ul>
<div id="descriptivo" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Descriptivo</h3>
<p>La estadística descriptiva puede ser; (1) a un nivel simple de descripción de una base de datos sin la búsqueda de querer expandir los resultados (registros administrativos, censos, estudios de observación) o (2) para encuestas probabilisticas, realizar las estimaciones de la muestra con sus respectivos errores muestrales y a partir de estas estimaciones describir a la población</p>
<blockquote>
<p><strong>Ejemplo:</strong> El INE estima a partir de la EH-2018 que la incidencia de pobreza moderadara en Bolivia para el 2018 alcanza el …%</p>
</blockquote>
<p>Ejemplos como este muestra que el proposito es puramente descriptivo en cuanto a la pobreza.</p>
</div>
<div id="causal" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Causal</h3>
<p>Muchos investigadores buscan explorar hipotesis, aveces originadas en la teoria o en alguna relación observada de forma empírica, con la idea central de permitir la inferencia causal.</p>
<p>La data para esto proviene de diseños experimentales o fuertes estudios no experimentales (cuasi-experimentales), el interés de estos estudios es principalmente encontrar el efecto de de una variable entre otra.</p>
<p><span class="math display">\[X \rightarrow Y\]</span>
Aspecto que es logrado facilmente mediante los diseños experimentales. En este tipo de estudio el componente descriptvo no es tan importante como el metodo para identificar la causalidad. Es importante diferenciar en este punto <em>la causalidad de la correlación</em>.</p>
<blockquote>
<p><strong>Ejemplo:</strong> (3ie) Este informe se basa en un estudio de Dupas, Duflo y Kremer que se realizó en colaboración con el gobierno de Ghana. El estudio examinó los impactos a mediano plazo de otorgar becas de cuatro años a estudiantes que no podían matricularse en escuelas secundarias superiores (SHS) debido a limitaciones financieras. Los investigadores encontraron que el programa de becas tuvo un impacto significativo en el logro educativo y las habilidades cognitivas, particularmente entre las niñas. El programa también tuvo un mayor impacto en las tasas de finalización de SHS de las niñas en términos porcentuales.</p>
</blockquote>
<blockquote>
<p><strong>Ejemplo:</strong> UDAPE el 2013 realizó el calculo del impacto de la renta dignidad en Bolivia empleando el método de regresión discontinua un método cuasi-experimental.</p>
</blockquote>
<p>Una de las debilidades principales de estos estudios es la falta o poca de validez externa, es decir, es dificil poder generalizar los resultados.</p>
</div>
<div id="predictivo" class="section level3">
<h3><span class="header-section-number">3.4.3</span> Predictivo</h3>
<p>El pronóstico o predicción tiene un rol diferenciado según la ciencia de aplicación, teniendo un rol significativo dentro de las estadística oficiales, principalmente en lo social (proyecciones poblacionales) y económico (indicadores macroeconómicos), principalmente para hacedores de política, gobernates y empresarios. Similar a
En la configuración de inferencia causal, es de suma importancia que conozcamos el proceso que generó los datos, y podemos descartar cualquier mecanismo de selección sistemática desconocido o no observado.</p>
<blockquote>
<p><strong>Ejemplo:</strong> El Institute of Global Health, Faculty of Medicine, University of Geneva tiene una página web que realiza pronosticos por país para los casos de COVID-19. <a href="https://renkulab.shinyapps.io/COVID-19-Epidemic-Forecasting/">Enlace</a></p>
</blockquote>
</div>
</div>
<div id="calidad-de-dato-y-big-data" class="section level2">
<h2><span class="header-section-number">3.5</span> Calidad de dato y Big Data</h2>
<p>La mayoría de los datos en el mundo real son ruidosos, inconsistentes y adolecen de valores perdidos, independientemente de su origen. Incluso si la recopilación de datos es barata, los costos de crear datos de alta calidad a partir de la fuente (limpieza, conservación, estandarización e integración) son considerables. La calidad de los datos se puede caracterizar de múltiples maneras:</p>
<ul>
<li><strong>Precisión:</strong> ¿qué tan precisos son los valores de los atributos en los datos?</li>
<li><strong>Integridad:</strong> ¿están completos los datos?</li>
<li><strong>Consistencia:</strong> ¿Cuán consistentes son los valores en y entre las bases de datos?</li>
<li><strong>Puntualidad:</strong> ¿qué tan oportunos son los datos?</li>
<li><strong>Accesibilidad:</strong> ¿están disponibles todas las variables para el análisis?</li>
</ul>
<p>Los cientistas de datos tienen décadas de experiencia en la transformación de datos desordenados, ruidosos y no estructurados en un conjunto de datos bien definido, claramente estructurado y probado en calidad. El pre procesamiento es un proceso complejo y que lleva mucho tiempo porque es <em>práctico</em>: requiere juicio y no puede automatizarse de manera efectiva. Un flujo de trabajo típico comprende múltiples pasos desde la definición de datos hasta el análisis y termina con el filtrado. Es difícil exagerar el valor del pre-procesamiento para cualquier análisis de datos, pero esto es particularmente cierto en big data. Los datos deben analizarse, estandarizarse, deduplicarse y normalizarse.</p>
<ul>
<li><strong>Análisis (parsing):</strong> Exploración de datos</li>
<li><strong>Estandarización (Standardization):</strong> Identificar variables que requieren transformación y ajustes.</li>
<li><strong>Duplicación:</strong> Consiste en eliminar registros redundantes</li>
<li><strong>Normalización (Normalization):</strong> Es el proceso de garantizar que los campos que se comparan entre archivos sean lo más similares posible en el sentido de que podrían haber sido generados por el mismo proceso. Como mínimo, se deben aplicar las mismas reglas de estandarización a ambos archivos.</li>
</ul>
</div>
<div id="captura-y-preservación" class="section level2">
<h2><span class="header-section-number">3.6</span> Captura y preservación</h2>
<p>Se refiere al proceso de obtener la información de las distintas fuentes posibles y luego pasar a un proceso de preservacion.</p>
<div id="fuentes-convencionales" class="section level3">
<h3><span class="header-section-number">3.6.1</span> Fuentes convencionales</h3>
<p>Estas estan basadas en la información que se distribuye de forma tradicional mediante bases de datos estructuradas, normalmente estas las distribuyen instituciones con amplios conocimientos en la gestion de bases de datos, para el caso de Bolivia se puede citar algunas:</p>
<ul>
<li>Instituto Nacional de Estadística</li>
<li>SNIS</li>
<li>UDAPE</li>
</ul>
</div>
<div id="datos-web-y-apis" class="section level3">
<h3><span class="header-section-number">3.6.2</span> Datos web y APIs</h3>
</div>
<div id="record-linkage" class="section level3">
<h3><span class="header-section-number">3.6.3</span> Record Linkage</h3>
</div>
<div id="bases-de-datos-1" class="section level3">
<h3><span class="header-section-number">3.6.4</span> Bases de datos</h3>
</div>
<div id="programando-con-big-data" class="section level3">
<h3><span class="header-section-number">3.6.5</span> Programando con Big Data</h3>
</div>
</div>
<div id="análisis-y-modelado" class="section level2">
<h2><span class="header-section-number">3.7</span> Análisis y modelado</h2>
<div id="machine-learning" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Machine learning</h3>
</div>
<div id="análisis-de-texto" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Análisis de texto</h3>
</div>
<div id="networks" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Networks</h3>
</div>
</div>
<div id="inferencia-y-ética" class="section level2">
<h2><span class="header-section-number">3.8</span> Inferencia y ética</h2>
<div id="información-y-visualización" class="section level3">
<h3><span class="header-section-number">3.8.1</span> Información y visualización</h3>
</div>
<div id="error-e-inferencia" class="section level3">
<h3><span class="header-section-number">3.8.2</span> Error e inferencia</h3>
</div>
<div id="privacidad-y-confidencialidad" class="section level3">
<h3><span class="header-section-number">3.8.3</span> Privacidad y confidencialidad</h3>
</div>
<div id="workbooks" class="section level3">
<h3><span class="header-section-number">3.8.4</span> Workbooks</h3>
</div>
</div>
<div id="ejercicios-propuestos-2" class="section level2">
<h2><span class="header-section-number">3.9</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Explorar los métodos cuasi-experimentales que existen</li>
<li>Buscar informacion respecto a: los matriculados en educacion regular y universidad por año y departamento en Bolivia</li>
<li>Empleando la fuente anterior, generar en R el có
digo que cargue el archivo encontrado</li>
<li>Buscar dos papers (1) donde se uso machine learning y (2) análisis de texto y comentar con al menos 5000 caractéres</li>
<li>Buscar ejemplos (al menos uno) de bases de datos, páginas web u otros asociados a datos que no respeten los principios de privacidad y confidencialidad.</li>
</ol>
<!--chapter:end:3_introBD.Rmd-->
</div>
</div>
<div id="big-data-en-r-descubriendo-el-poder-dentro-de-r" class="section level1">
<h1><span class="header-section-number">4</span> Big Data en R (Descubriendo el poder dentro de R)</h1>
<p>R en un software que se adapta perfectamente con las fases del ciclo de vida de los proyectos de datos, ofreciendo herramientas para cada una de ellas; Entre las mas interesantes, R Markdown, Shiny, sweave, etc.</p>
<p>Adicionalmente existen multiples librerias que permite trabajar con otros software, principalmente los asociados a bases de datos.</p>
<p><img src="images/r1.png" /></p>
<p>En el capitulo 1 se enfatiza el uso de R para el manejo, procesamiento y análisis de bases de datos, sumado a esto el conocimiento de distintas estadísticas en base a los cursos de formación, en este capitulo se buscar unir ambos topicos y explicar como usar el poder del modelado matematico y de datos en R, considerando bases de datos <strong>grandes</strong>, esto sin necesidad de recurrir a otros equipos.</p>
<p>Lo que se espera a partir de este capitulo es:</p>
<ul>
<li>Conocer las limitaciones de R para el Big Data y como ellas pueden resolverse</li>
<li>El uso de las librerias ff, ffbase, ffbase2, y bigmemory, para el manejo de la memoria del equipo</li>
<li>El uso de metodos estadisticos para objetos grandes en R, atraves de las librerias bigglm y ffbase</li>
<li>Mejorar la velocidad del procesamiento de datos con librerias que permiten la computación paralela (parallel computing)</li>
<li>Manipulación de datos más rápidos con el uso de la libreria data.table</li>
</ul>
<div id="limitaciones-en-r" class="section level2">
<h2><span class="header-section-number">4.1</span> Limitaciones en R</h2>
<p>A manera que uno va aprendiendo mas del R en la universidad o en el trabajo se valora cada vez mas la flexibilidad de R, su constante crecimiento, la ventaja de ser de codigo abierto, etc. Sin embargo, es importante tener en cuenta las limitaciones de R:</p>
<ul>
<li>Los datos se ajustan a la RAM</li>
<li>R es generalmente muy lento comparado con otros lenguajes</li>
</ul>
<div id="memoria" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Memoria</h3>
</div>
<div id="velocidad-de-procesamiento" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Velocidad de procesamiento</h3>
</div>
</div>
<div id="a-los-límites-de-la-memoria-y-más-allá" class="section level2">
<h2><span class="header-section-number">4.2</span> A los límites de la memoria y más allá</h2>
<div id="transformacion-y-agregacion-de-datos-con-la-libraria-ff-y-ffbase" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Transformacion y agregacion de datos con la libraria ff y ffbase</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;ff&quot;</span>)</a>
<a class="sourceLine" id="cb132-2" title="2"><span class="kw">install.packages</span>(<span class="st">&quot;ffbase&quot;</span>)</a>
<a class="sourceLine" id="cb132-3" title="3"><span class="kw">install.packages</span>(<span class="st">&quot;ffbase2&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" title="1"><span class="kw">library</span>(ff)</a>
<a class="sourceLine" id="cb133-2" title="2"><span class="kw">library</span>(ffbase)</a>
<a class="sourceLine" id="cb133-3" title="3"><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">ALVARO</span><span class="ch">\\</span><span class="st">Desktop</span><span class="ch">\\</span><span class="st">db_bolivia</span><span class="ch">\\</span><span class="st">bigdata&quot;</span>)</a>
<a class="sourceLine" id="cb133-4" title="4"><span class="kw">system</span>(<span class="st">&quot;mkdir ffdf&quot;</span>)</a>
<a class="sourceLine" id="cb133-5" title="5">df&lt;-<span class="kw">read.csv.ffdf</span>(<span class="st">&quot;2018.csv&quot;</span>)</a></code></pre></div>
</div>
<div id="modelogs-glm-con-la-las-librerias-ff-y-ffbase" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Modelogs GLM con la las librerias ff y ffbase</h3>
</div>
<div id="expandiendo-la-memoria-con-la-libreria-bigmemory" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Expandiendo la memoria con la libreria bigmemory</h3>
</div>
</div>
<div id="parallel-r" class="section level2">
<h2><span class="header-section-number">4.3</span> Parallel R</h2>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1"><span class="co">#install.packages(&quot;parallel&quot;)</span></a>
<a class="sourceLine" id="cb134-2" title="2"><span class="kw">library</span>()</a></code></pre></div>
</div>
<div id="aumento-del-rendimiento-de-r-con-la-libreria-data.table-y-otras-herramientas" class="section level2">
<h2><span class="header-section-number">4.4</span> Aumento del rendimiento de R con la libreria data.table y otras herramientas</h2>
</div>
<div id="ejercicios-propuestos-3" class="section level2">
<h2><span class="header-section-number">4.5</span> Ejercicios Propuestos</h2>
<!--chapter:end:4_BDinR.Rmd-->
</div>
</div>
<div id="r-y-spark" class="section level1">
<h1><span class="header-section-number">5</span> R y Spark</h1>
<div id="introducción" class="section level2">
<h2><span class="header-section-number">5.1</span> Introducción</h2>
</div>
<div id="arrancando-spark" class="section level2">
<h2><span class="header-section-number">5.2</span> Arrancando Spark</h2>
</div>
<div id="análisis-con-spark" class="section level2">
<h2><span class="header-section-number">5.3</span> Análisis con Spark</h2>
</div>
<div id="ejercicios-propuestos-4" class="section level2">
<h2><span class="header-section-number">5.4</span> Ejercicios Propuestos</h2>
<!--chapter:end:5_RandSpark.Rmd-->
</div>
</div>
<div id="prefacio-1" class="section level1 unnumbered">
<h1>Prefacio</h1>
<p>Placeholder</p>
<div id="audiencia-1" class="section level2 unnumbered">
<h2>Audiencia</h2>
</div>
<div id="estructura-del-libro-1" class="section level2 unnumbered">
<h2>Estructura del libro</h2>
</div>
<div id="software-y-acuerdos-1" class="section level2 unnumbered">
<h2>Software y acuerdos</h2>
</div>
<div id="bases-de-datos-2" class="section level2 unnumbered">
<h2>Bases de datos</h2>
</div>
<div id="agradecimiento-1" class="section level2 unnumbered">
<h2>Agradecimiento</h2>
<!--chapter:end:index.Rmd-->
</div>
</div>
<div id="introR" class="section level1">
<h1><span class="header-section-number">6</span> Introducción a R</h1>
<p>Placeholder</p>
<div id="tipos-de-estructuras-1" class="section level2">
<h2><span class="header-section-number">6.1</span> Tipos de estructuras</h2>
</div>
<div id="loops-y-condiciones-1" class="section level2">
<h2><span class="header-section-number">6.2</span> Loops y condiciones</h2>
</div>
<div id="funciones-1" class="section level2">
<h2><span class="header-section-number">6.3</span> Funciones</h2>
</div>
<div id="importacion-de-datos-1" class="section level2">
<h2><span class="header-section-number">6.4</span> Importacion de datos</h2>
</div>
<div id="dataframe-y-exploración-1" class="section level2">
<h2><span class="header-section-number">6.5</span> Dataframe y exploración</h2>
</div>
<div id="estadística-descriptiva-1" class="section level2">
<h2><span class="header-section-number">6.6</span> Estadística descriptiva</h2>
</div>
<div id="muestreo-e-inferencia-1" class="section level2">
<h2><span class="header-section-number">6.7</span> Muestreo e inferencia</h2>
</div>
<div id="gráficos-de-origen-1" class="section level2">
<h2><span class="header-section-number">6.8</span> Gráficos de origen</h2>
</div>
<div id="ggplot-1" class="section level2">
<h2><span class="header-section-number">6.9</span> ggplot</h2>
</div>
<div id="r-markdown-1" class="section level2">
<h2><span class="header-section-number">6.10</span> R Markdown</h2>
<div id="instalación-1" class="section level3">
<h3><span class="header-section-number">6.10.1</span> Instalación</h3>
</div>
<div id="yaml-header-1" class="section level3">
<h3><span class="header-section-number">6.10.2</span> YAML Header</h3>
</div>
<div id="sintaxis-básica-1" class="section level3">
<h3><span class="header-section-number">6.10.3</span> Sintaxis básica</h3>
</div>
<div id="tipos-de-documentos-1" class="section level3">
<h3><span class="header-section-number">6.10.4</span> Tipos de documentos</h3>
</div>
<div id="chunks-1" class="section level3">
<h3><span class="header-section-number">6.10.5</span> Chunks</h3>
</div>
</div>
<div id="shiny-1" class="section level2">
<h2><span class="header-section-number">6.11</span> Shiny</h2>
<div id="ui-1" class="section level3">
<h3><span class="header-section-number">6.11.1</span> UI</h3>
</div>
<div id="server-1" class="section level3">
<h3><span class="header-section-number">6.11.2</span> Server</h3>
</div>
</div>
<div id="ejercicios-propuestos-5" class="section level2">
<h2><span class="header-section-number">6.12</span> Ejercicios Propuestos</h2>
<!--chapter:end:1_introR.Rmd-->
</div>
</div>
<div id="scraping-web-1" class="section level1">
<h1><span class="header-section-number">7</span> Scraping Web</h1>
<p>La definición del scraping web que se toma en este documento proviene de <span class="citation">(<span class="citeproc-not-found" data-reference-id="Mitchell2015"><strong>???</strong></span>)</span> que expresa:</p>
<p><strong>
El Web Scraping es la recolección automática de información de los sitios web. (obviamente no a través de un humano usando un navegador web).
</strong></p>
<p>Un tema dentro del scraping web son las denominadas APIs (Application Programming Interface), estas son entradas a las paginas web diseñadas por los administradores de la pagina web, por lo mismo no siempre contienen toda la información que se desea. Aunque las API no son tan ubicuas como deberían, puede encontrar API para muchos tipos de información. Interesado en la música? Hay algunas API diferentes que pueden darle canciones, artistas, álbumes e incluso información sobre estilos musicales y artistas relacionados. ¿Necesitas datos deportivos? ESPN proporciona API para información de atletas, puntajes de juegos y más. Google tiene docenas de API en su sección de Desarrolladores para traducciones de idiomas, análisis, geolocalización y más.</p>
<div id="pasos-para-la-recopilación-de-información-1" class="section level2">
<h2><span class="header-section-number">7.1</span> Pasos para la recopilación de información</h2>
<p>Siguiendo a <span class="citation">(<span class="citeproc-not-found" data-reference-id="Iacus2015"><strong>???</strong></span>)</span> que establece cinco pasos al momento de decidir recopilar información mediante el scraping web, estos pasos son:</p>
<ol style="list-style-type: decimal">
<li>Asegúrese de saber exactamente qué tipo de información necesita. Esto puede ser específico (<code>el producto interno bruto de todos los países de la OCDE durante los últimos 10 años'') o vago (</code>opinión de la gente sobre el teléfono de la empresa X’‘, ``colaboración entre miembros del Senado de los Estados Unidos’’).</li>
<li>Averigüe si hay fuentes de datos en la Web que puedan proporcionar información directa o indirecta sobre su problema. Si está buscando hechos concretos, esto probablemente sea fácil. Si está interesado en conceptos bastante vagos, esto es más difícil.</li>
</ol>
<p><strong>La página de inicio de la embajada de un país podría ser una fuente valiosa para la acción de política exterior que a menudo se oculta detrás del telón de la diplomacia. Los tweets pueden contener tendencias de opinión sobre casi todo, las plataformas comerciales pueden informar sobre la satisfacción de los clientes con los productos, las tarifas de alquiler en los sitios web de propiedades pueden contener información sobre el atractivo actual de los barrios de la ciudad …
</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Desarrolle una teoría del proceso de generación de datos cuando busque fuentes potenciales. ¿Cuándo se generaron los datos, cuándo se cargaron en la Web y quién lo hizo? ¿Existen áreas potenciales que no están cubiertas, son consistentes o precisas, y puede identificarlas y corregirlas?</li>
<li>Equilibrar las ventajas y desventajas de las posibles fuentes de datos. Los aspectos relevantes pueden ser la disponibilidad (¡y la legalidad!), los costos de recolección, la compatibilidad de nuevas fuentes con la investigación existente, pero también factores muy subjetivos como la aceptación de la fuente de datos por parte de otros. También piense en posibles formas de validar la calidad de sus datos. ¿Existen otras fuentes independientes que brinden información similar para que sean posibles verificaciones cruzadas aleatorias? En caso de datos secundarios, ¿puede identificar la fuente original y verificar los errores de transferencia?</li>
<li>¡Toma una decisión! Elija la fuente de datos que le parezca más adecuada, documente los motivos de la decisión y comience con los preparativos para la recopilación. Si es factible, recopile datos de varias fuentes para validar las fuentes de datos. Muchos problemas y beneficios de varias estrategias de recopilación de datos salen a la luz solo después de la recopilación real.</li>
</ol>
</div>
<div id="tecnologías-de-diseminación-extracción-y-almacenamiento-web-1" class="section level2">
<h2><span class="header-section-number">7.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</h2>
<p>Una vez elegida la fuente de datos (página web) y al menos con la intuición de lo que se quiere obtener, el siguiente paso es decidir el mecanismos para el scraping (raspado), esto esta relacionado al tipo de pagina web, ver si esta ofrece una entrada API y conocer sus limitaciones puede ser un punto de partida. Esto se denomina <em>Technologies for disseminating, extracting, and storing web data Collecting</em>, en el marco del uso de R la figura  muestra las interacciones entre ellas.</p>
<p><img src="images/scrap1.png" />
<em>Tecnologías para difundir, extraer y almacenar datos web (considerando el entorno de R)</em></p>
</div>
<div id="librerías-en-r-1" class="section level2">
<h2><span class="header-section-number">7.3</span> Librerías en R</h2>
<p>El siguiente cuadro presenta las librerías en R relacionadas al web Scraping, incluyendo los servicios API, que a la fecha del proyecto alcanza a 761 librerías, esto representa el <span class="math inline">\(5.02\)</span>% de las librerías en en R.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" title="1"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb135-2" title="2"><span class="kw">library</span>(packagefinder)</a>
<a class="sourceLine" id="cb135-3" title="3"><span class="kw">library</span>(xtable)</a>
<a class="sourceLine" id="cb135-4" title="4"><span class="kw">findPackage</span>(<span class="kw">c</span>(<span class="st">&quot;API&quot;</span>,<span class="st">&quot;scrape&quot;</span>),<span class="dt">limit.results=</span><span class="op">-</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## Your are searching packages for the terms &#39;API&#39;, &#39;scrape&#39; in or mode (at least one occurence of any of the search terms)
## 
## Please wait while index is being searched...
## 
## Results: 798 out of 15728 CRAN packages found in 186 seconds.</code></pre>
</div>
<div id="librería-rvest-1" class="section level2">
<h2><span class="header-section-number">7.4</span> Librería rvest</h2>
<p>Rvest es parte del universo tidyverse y esta orientada al scrape de páginas web. La instalación es usual:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1"><span class="co">#desde CRAN</span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="kw">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</a>
<a class="sourceLine" id="cb137-3" title="3"><span class="co">#la versión en desarrollo desde github</span></a>
<a class="sourceLine" id="cb137-4" title="4">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/rvest&quot;</span>)</a></code></pre></div>
<p>Existe la herramienta selectorgadget disponible en <a href="http://selectorgadget.com/" class="uri">http://selectorgadget.com/</a>, esta permite interactuar con las paginas web para seleccionar partes del documento usando un CSS selector. Las funciones mas importantes dentro de rvest son:</p>
<ul>
<li>read_html para cargar la estructura de la página</li>
<li>html_nodes para extraer informacion de la pagina segun el CSS selector</li>
<li>html_text para extraer texto de un html_nodes</li>
<li>html_table para extraer tablas y ponerlas en data frame</li>
</ul>
</div>
<div id="ejemplo-ketal-1" class="section level2">
<h2><span class="header-section-number">7.5</span> Ejemplo: Ketal</h2>
<p>Una de las potencialidades del scraping es poder rescatar información contenida en páginas web, según la estructura de esta, en esta sección se presenta un ejemplo del código y la recolección de información que puede realizarse. Para esto se eligió la página de supermercados Ketal que es abierta y publica los precios de sus distintos productos de forma categorizada por tipo de productos.</p>
<p>El estudio de esta pagina tiene el principal objetivo de mostrar el proceso de extracción, el uso potencial de la información esta relacionada a tener la variación de los precios y para futuros estudios se podría completar el ejercicio incluyendo la parte de la demanda mediante la encuesta de presupuestos familiares y poder así pronosticar la inflación dentro de este sector y para la población potencial que acude a supermercados.</p>
<p>El ejemplo presenta el proceso del scraping para 8 grupo de productos:</p>
<ul>
<li>Carne de aves</li>
<li>Carne de cerdo</li>
<li>Carne de res</li>
<li>Pescado</li>
<li>Leches</li>
<li>Aceites</li>
<li>Frutas y verduras</li>
<li>Dulces</li>
</ul>
<p>Se emplea la libreria <em>rvest</em>, que es un paquete diseña para para facilitar la descarga y la manipulación de HTML y XML. También se utiliza la extensión Selector Gadget <a href="https://selectorgadget.com" class="uri">https://selectorgadget.com</a>, este permite la identificación de las estructuras de las páginas web.</p>
<p>El objetivo del raspado es obtener el nombre del producto, su código, y el precio. Utilizando el selector gadget se identifica que en <span class="math inline">\(.product-name\)</span> se guardan los nombres, en <span class="math inline">\(.price.product-price\)</span> el precio del producto y en <span class="math inline">\(data-id-product\)</span> el identificador del producto. En R el código es:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1"><span class="co">#librerías para el raspado</span></a>
<a class="sourceLine" id="cb138-2" title="2"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb138-3" title="3"><span class="co">#Enlaces de los grupos de productos</span></a>
<a class="sourceLine" id="cb138-4" title="4">ave &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/209-aves&quot;</span>)</a>
<a class="sourceLine" id="cb138-5" title="5">cerdo&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/208-cerdo&quot;</span>)</a>
<a class="sourceLine" id="cb138-6" title="6">res&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/210-res&quot;</span>)</a>
<a class="sourceLine" id="cb138-7" title="7">fish&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/17060162-pescados&quot;</span>)</a>
<a class="sourceLine" id="cb138-8" title="8">leches&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/53-leches-liquidas&quot;</span>)</a>
<a class="sourceLine" id="cb138-9" title="9">aceites&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/272-aceites-y-vinagres&quot;</span>)</a>
<a class="sourceLine" id="cb138-10" title="10">frutaver&lt;-<span class="kw">read_html</span>(</a>
<a class="sourceLine" id="cb138-11" title="11">  <span class="st">&quot;https://www.ketal.com.bo/50-frutas-y-verduras?id_category=50&amp;n=150&quot;</span>)</a>
<a class="sourceLine" id="cb138-12" title="12">dulce&lt;-<span class="kw">read_html</span>(</a>
<a class="sourceLine" id="cb138-13" title="13">  <span class="st">&quot;https://www.ketal.com.bo/15-chocolates-y-golosinas?id_category=15&amp;n=150&quot;</span>)</a>
<a class="sourceLine" id="cb138-14" title="14"><span class="co">#definición de la base de datos que guarda la información</span></a>
<a class="sourceLine" id="cb138-15" title="15">bd&lt;-<span class="ot">NULL</span></a>
<a class="sourceLine" id="cb138-16" title="16"><span class="co">#Algoritmo del raspado de los 8 productos</span></a>
<a class="sourceLine" id="cb138-17" title="17">k&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb138-18" title="18"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">list</span>(ave,cerdo,res,fish,leches,aceites,frutaver,dulce)){</a>
<a class="sourceLine" id="cb138-19" title="19">  <span class="kw">print</span>(k)</a>
<a class="sourceLine" id="cb138-20" title="20">  name&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.product-name&quot;</span>),<span class="st">&quot;title&quot;</span>)[<span class="op">-</span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb138-21" title="21">  precio&lt;-<span class="kw">html_text</span>(</a>
<a class="sourceLine" id="cb138-22" title="22">    <span class="kw">html_nodes</span>(i,<span class="st">&quot;.price.product-price&quot;</span>),<span class="dt">trim=</span>T)[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">length</span>(name)<span class="op">*</span><span class="dv">2</span>,<span class="dv">2</span>)]</a>
<a class="sourceLine" id="cb138-23" title="23">  code&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.add_to_compare&quot;</span>),<span class="st">&quot;data-id-product&quot;</span>)</a>
<a class="sourceLine" id="cb138-24" title="24">  bd&lt;-<span class="kw">rbind</span>(bd,<span class="kw">data.frame</span>(name,precio,code))</a>
<a class="sourceLine" id="cb138-25" title="25">  k&lt;-k<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb138-26" title="26">}</a>
<a class="sourceLine" id="cb138-27" title="27"><span class="co">#se identifica el día</span></a>
<a class="sourceLine" id="cb138-28" title="28">day&lt;-<span class="kw">substr</span>(<span class="kw">Sys.time</span>(),<span class="dv">1</span>,<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb138-29" title="29"><span class="co">#se guarda la informacion en base al dia del raspado</span></a>
<a class="sourceLine" id="cb138-30" title="30">bd<span class="op">$</span>day&lt;-day</a>
<a class="sourceLine" id="cb138-31" title="31"><span class="kw">save</span>(bd,<span class="dt">file =</span> <span class="kw">paste0</span>(day,<span class="st">&quot;.RData&quot;</span>))</a></code></pre></div>
</div>
<div id="ejemplo-ministerio-de-educación-1" class="section level2">
<h2><span class="header-section-number">7.6</span> Ejemplo: Ministerio de Educación</h2>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb139-2" title="2"><span class="kw">library</span>(foreign)</a>
<a class="sourceLine" id="cb139-3" title="3"><span class="kw">library</span>(xlsx)</a>
<a class="sourceLine" id="cb139-4" title="4"><span class="co">########################</span></a>
<a class="sourceLine" id="cb139-5" title="5">bd&lt;-<span class="kw">read.dta</span>(<span class="st">&quot;mmUE.dta&quot;</span>)</a>
<a class="sourceLine" id="cb139-6" title="6">rue&lt;-bd<span class="op">$</span>cod_ue_det</a>
<a class="sourceLine" id="cb139-7" title="7">rue&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(rue,<span class="st">&quot;;&quot;</span>))</a>
<a class="sourceLine" id="cb139-8" title="8">bd&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">78</span>))</a>
<a class="sourceLine" id="cb139-9" title="9">k&lt;-<span class="dv">1</span></a>
<a class="sourceLine" id="cb139-10" title="10"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">325</span><span class="op">:</span><span class="kw">length</span>(rue)){</a>
<a class="sourceLine" id="cb139-11" title="11"> <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb139-12" title="12">urlmin&lt;-<span class="kw">paste0</span>(<span class="st">&quot;http://seie.minedu.gob.bo/reportes/mapas_unidades_educativas/ficha/ver/&quot;</span>,rue[i])</a>
<a class="sourceLine" id="cb139-13" title="13"> ue &lt;-<span class="st"> </span><span class="kw">read_html</span>(urlmin,<span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</a>
<a class="sourceLine" id="cb139-14" title="14"></a>
<a class="sourceLine" id="cb139-15" title="15">jj&lt;-<span class="kw">grepl</span>(<span class="st">&quot;Error was&quot;</span>,<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>)])</a>
<a class="sourceLine" id="cb139-16" title="16"><span class="cf">if</span>(jj<span class="op">==</span>T){</a>
<a class="sourceLine" id="cb139-17" title="17">  <span class="cf">next</span>()</a>
<a class="sourceLine" id="cb139-18" title="18">}</a>
<a class="sourceLine" id="cb139-19" title="19"><span class="co">#nombre id (2)</span></a>
<a class="sourceLine" id="cb139-20" title="20">bd[k,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</a>
<a class="sourceLine" id="cb139-21" title="21"><span class="co">#Informacion administrativa (12)</span></a>
<a class="sourceLine" id="cb139-22" title="22">bd[k,<span class="dv">3</span><span class="op">:</span><span class="dv">14</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;dd&quot;</span>))</a>
<a class="sourceLine" id="cb139-23" title="23"><span class="co">#matricula #promovidos #reprobacion #abandono # (60)</span></a>
<a class="sourceLine" id="cb139-24" title="24"><span class="co">#matricula</span></a>
<a class="sourceLine" id="cb139-25" title="25"><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>){</a>
<a class="sourceLine" id="cb139-26" title="26">bd[k,(<span class="dv">15</span><span class="op">*</span>j)<span class="op">:</span>(<span class="dv">14</span><span class="op">+</span><span class="dv">15</span><span class="op">*</span>j)]&lt;-<span class="kw">as.integer</span>(<span class="kw">unlist</span>(<span class="kw">html_table</span>(ue)[j])[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)])</a>
<a class="sourceLine" id="cb139-27" title="27">}</a>
<a class="sourceLine" id="cb139-28" title="28"><span class="co">#servicios (4)</span></a>
<a class="sourceLine" id="cb139-29" title="29">bd[k,<span class="dv">75</span><span class="op">:</span><span class="dv">78</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">18</span><span class="op">:</span><span class="dv">21</span>]</a>
<a class="sourceLine" id="cb139-30" title="30">k&lt;-k<span class="op">+</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb139-31" title="31">}</a>
<a class="sourceLine" id="cb139-32" title="32"><span class="kw">write.xlsx</span>(bd,<span class="st">&quot;ue2017.xlsx&quot;</span>,<span class="dt">row.names =</span> F)</a></code></pre></div>
</div>
<div id="apis-1" class="section level2">
<h2><span class="header-section-number">7.7</span> APIs</h2>
<p>Conocida también por la sigla API,“application programming interface”, es un conjunto de subrutinas, funciones y procedimientos (o métodos, en la programación orientada a objetos) que ofrece cierta biblioteca para ser utilizado por otro software. Ofrece una entrada a los datos que distribuye el API.</p>
<div id="api-banco-mundial-1" class="section level3">
<h3><span class="header-section-number">7.7.1</span> API Banco Mundial</h3>
<p>La API ofrece acceso a las estadísticas que genera el Banco Mundial, existe un set extenso de estadisticas de la mayoria de los paises. La API ofrece mas de 16000 indicadores de series de tiempo, muchos de los indicadores tienen una cobertura de 50 años. La API incluye el acceso a 45 bases de datos, incluyendo:</p>
<ul>
<li>World Development Indicators</li>
<li>International Debt Statistcs</li>
<li>Doing Business</li>
<li>Human Capital Index</li>
<li>Subnational Poverty</li>
<li>Y otros, <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation">ver</a></li>
</ul>
<p>En R s epuede acceder mediante la libreria wbstats.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;wbstats&quot;</span>)</a>
<a class="sourceLine" id="cb140-2" title="2"><span class="kw">library</span>(wbstats)</a>
<a class="sourceLine" id="cb140-3" title="3"><span class="co">#acceso a todos los indicadores disponibles</span></a>
<a class="sourceLine" id="cb140-4" title="4"><span class="kw">wbindicators</span>(<span class="st">&quot;es&quot;</span>)</a>
<a class="sourceLine" id="cb140-5" title="5"><span class="co">#acceso al catalogo de datos</span></a>
<a class="sourceLine" id="cb140-6" title="6"><span class="kw">wbdatacatalog</span>()</a>
<a class="sourceLine" id="cb140-7" title="7"><span class="co">#búsqueda de indicador</span></a>
<a class="sourceLine" id="cb140-8" title="8"><span class="kw">wbsearch</span>(<span class="dt">pattern =</span> <span class="st">&quot;education&quot;</span>)</a>
<a class="sourceLine" id="cb140-9" title="9"><span class="co"># ver los países y sus códigos </span></a>
<a class="sourceLine" id="cb140-10" title="10"><span class="kw">wbcountries</span>()             </a>
<a class="sourceLine" id="cb140-11" title="11"><span class="co">#Comando para extraer los indicadores</span></a>
<a class="sourceLine" id="cb140-12" title="12"><span class="kw">wb</span>(<span class="dt">country =</span> <span class="st">&quot;BOL&quot;</span>,<span class="dt">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>, <span class="dt">startdate =</span> <span class="dv">2000</span>, <span class="dt">enddate =</span> <span class="dv">2016</span>)</a></code></pre></div>
</div>
<div id="api-google-trends-1" class="section level3">
<h3><span class="header-section-number">7.7.2</span> API Google trends</h3>
<p>La librari gtrendsR permite acceder a la API de <a href="https://trends.google.es/trends/?geo=ES">google trends</a>, esta permite acceder a las tendencias de busqueda que se realizan mediante el motor de busqueda de Google.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1"><span class="co">#install.packages(&quot;gtrendsR&quot;)</span></a>
<a class="sourceLine" id="cb141-2" title="2"><span class="kw">library</span>(gtrendsR)</a>
<a class="sourceLine" id="cb141-3" title="3"><span class="kw">library</span>(knitr)</a>
<a class="sourceLine" id="cb141-4" title="4">res &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="st">&quot;Coronavirus&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;BO&quot;</span>))</a>
<a class="sourceLine" id="cb141-5" title="5"><span class="kw">plot</span>(res)</a>
<a class="sourceLine" id="cb141-6" title="6"></a>
<a class="sourceLine" id="cb141-7" title="7"><span class="kw">kable</span>(<span class="kw">head</span>(res<span class="op">$</span>interest_over_time,<span class="dv">10</span>))</a></code></pre></div>
</div>
<div id="api-google-maps-1" class="section level3">
<h3><span class="header-section-number">7.7.3</span> API Google Maps</h3>
<p>R tiene la librari googleway que permite tener acceso a la API de google maps, es necesario una llave de autentificación.</p>
<p>Para la llave seguir los pasos en el <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=es-419">enlace</a></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="co">#install.packages(&quot;googleway&quot;)</span></a>
<a class="sourceLine" id="cb142-2" title="2"><span class="kw">library</span>(googleway)</a>
<a class="sourceLine" id="cb142-3" title="3">map_key &lt;-<span class="st"> &#39;xxx&#39;</span></a>
<a class="sourceLine" id="cb142-4" title="4"><span class="kw">google_map</span>(<span class="dt">key =</span> map_key,<span class="dt">location =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">16.5030161</span>,<span class="op">-</span><span class="fl">68.1292566</span>),<span class="dt">zoom =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_traffic</span>()</a></code></pre></div>
</div>
</div>
<div id="ejercicios-propuestos-6" class="section level2">
<h2><span class="header-section-number">7.8</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Extraer la fecha, y el precio de compra y venta del dolar de la página <a href="https://www.bcb.gob.bo" class="uri">https://www.bcb.gob.bo</a></li>
<li>Usando la página <a href="https://www.trabajopolis.bo/" class="uri">https://www.trabajopolis.bo/</a> seleccionar un departamento y armar una base de dato de ofertas laborales</li>
<li>Armar una base de datos en base a la página <a href="https://www.infocasas.com.bo" class="uri">https://www.infocasas.com.bo</a></li>
<li>Explorar librarias API con acceso a Youtube y encontrar los 10 videos con más visualizaciones que incluyan a Bolivia en su titulo.</li>
<li>Explorar la libraria gtrendsR y explorar en que meses en Bolivia es mas frecuente la búsqueda de</li>
</ol>
<!--chapter:end:2_scraping.Rmd-->
</div>
</div>
<div id="introduccion-al-big-data-1" class="section level1">
<h1><span class="header-section-number">8</span> Introduccion al Big Data</h1>
<p>Placeholder</p>
<div id="definiendo-al-big-data-1" class="section level2">
<h2><span class="header-section-number">8.1</span> Definiendo al Big Data</h2>
</div>
<div id="las-5-v-en-el-big-data-1" class="section level2">
<h2><span class="header-section-number">8.2</span> Las 5 V en el Big Data</h2>
</div>
<div id="ciclo-de-vida-de-un-proyecto-de-análisis-de-datos-1" class="section level2">
<h2><span class="header-section-number">8.3</span> Ciclo de vida de un proyecto de análisis de datos</h2>
</div>
<div id="inferencia-y-big-data-1" class="section level2">
<h2><span class="header-section-number">8.4</span> Inferencia y Big Data</h2>
<div id="descriptivo-1" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Descriptivo</h3>
</div>
<div id="causal-1" class="section level3">
<h3><span class="header-section-number">8.4.2</span> Causal</h3>
</div>
<div id="predictivo-1" class="section level3">
<h3><span class="header-section-number">8.4.3</span> Predictivo</h3>
</div>
</div>
<div id="calidad-de-dato-y-big-data-1" class="section level2">
<h2><span class="header-section-number">8.5</span> Calidad de dato y Big Data</h2>
</div>
<div id="captura-y-preservación-1" class="section level2">
<h2><span class="header-section-number">8.6</span> Captura y preservación</h2>
<div id="fuentes-convencionales-1" class="section level3">
<h3><span class="header-section-number">8.6.1</span> Fuentes convencionales</h3>
</div>
<div id="datos-web-y-apis-1" class="section level3">
<h3><span class="header-section-number">8.6.2</span> Datos web y APIs</h3>
</div>
<div id="record-linkage-1" class="section level3">
<h3><span class="header-section-number">8.6.3</span> Record Linkage</h3>
</div>
<div id="bases-de-datos-3" class="section level3">
<h3><span class="header-section-number">8.6.4</span> Bases de datos</h3>
</div>
<div id="programando-con-big-data-1" class="section level3">
<h3><span class="header-section-number">8.6.5</span> Programando con Big Data</h3>
</div>
</div>
<div id="análisis-y-modelado-1" class="section level2">
<h2><span class="header-section-number">8.7</span> Análisis y modelado</h2>
<div id="machine-learning-1" class="section level3">
<h3><span class="header-section-number">8.7.1</span> Machine learning</h3>
</div>
<div id="análisis-de-texto-1" class="section level3">
<h3><span class="header-section-number">8.7.2</span> Análisis de texto</h3>
</div>
<div id="networks-1" class="section level3">
<h3><span class="header-section-number">8.7.3</span> Networks</h3>
</div>
</div>
<div id="inferencia-y-ética-1" class="section level2">
<h2><span class="header-section-number">8.8</span> Inferencia y ética</h2>
<div id="información-y-visualización-1" class="section level3">
<h3><span class="header-section-number">8.8.1</span> Información y visualización</h3>
</div>
<div id="error-e-inferencia-1" class="section level3">
<h3><span class="header-section-number">8.8.2</span> Error e inferencia</h3>
</div>
<div id="privacidad-y-confidencialidad-1" class="section level3">
<h3><span class="header-section-number">8.8.3</span> Privacidad y confidencialidad</h3>
</div>
<div id="workbooks-1" class="section level3">
<h3><span class="header-section-number">8.8.4</span> Workbooks</h3>
</div>
</div>
<div id="ejercicios-propuestos-7" class="section level2">
<h2><span class="header-section-number">8.9</span> Ejercicios Propuestos</h2>
<!--chapter:end:3_introBD.Rmd-->
</div>
</div>
<div id="big-data-en-r-descubriendo-el-poder-dentro-de-r-1" class="section level1">
<h1><span class="header-section-number">9</span> Big Data en R (Descubriendo el poder dentro de R)</h1>
<p>Placeholder</p>
<div id="limitaciones-en-r-1" class="section level2">
<h2><span class="header-section-number">9.1</span> Limitaciones en R</h2>
<div id="memoria-1" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Memoria</h3>
</div>
<div id="velocidad-de-procesamiento-1" class="section level3">
<h3><span class="header-section-number">9.1.2</span> Velocidad de procesamiento</h3>
</div>
</div>
<div id="a-los-límites-de-la-memoria-y-más-allá-1" class="section level2">
<h2><span class="header-section-number">9.2</span> A los límites de la memoria y más allá</h2>
<div id="transformacion-y-agregacion-de-datos-con-la-libraria-ff-y-ffbase-1" class="section level3">
<h3><span class="header-section-number">9.2.1</span> Transformacion y agregacion de datos con la libraria ff y ffbase</h3>
</div>
<div id="modelogs-glm-con-la-las-librerias-ff-y-ffbase-1" class="section level3">
<h3><span class="header-section-number">9.2.2</span> Modelogs GLM con la las librerias ff y ffbase</h3>
</div>
<div id="expandiendo-la-memoria-con-la-libreria-bigmemory-1" class="section level3">
<h3><span class="header-section-number">9.2.3</span> Expandiendo la memoria con la libreria bigmemory</h3>
</div>
</div>
<div id="parallel-r-1" class="section level2">
<h2><span class="header-section-number">9.3</span> Parallel R</h2>
</div>
<div id="aumento-del-rendimiento-de-r-con-la-libreria-data.table-y-otras-herramientas-1" class="section level2">
<h2><span class="header-section-number">9.4</span> Aumento del rendimiento de R con la libreria data.table y otras herramientas</h2>
</div>
<div id="ejercicios-propuestos-8" class="section level2">
<h2><span class="header-section-number">9.5</span> Ejercicios Propuestos</h2>
<!--chapter:end:4_BDinR.Rmd-->
</div>
</div>
<div id="r-y-spark-1" class="section level1">
<h1><span class="header-section-number">10</span> R y Spark</h1>
<div id="introducción-1" class="section level2">
<h2><span class="header-section-number">10.1</span> Introducción</h2>
</div>
<div id="arrancando-spark-1" class="section level2">
<h2><span class="header-section-number">10.2</span> Arrancando Spark</h2>
</div>
<div id="análisis-con-spark-1" class="section level2">
<h2><span class="header-section-number">10.3</span> Análisis con Spark</h2>
</div>
<div id="ejercicios-propuestos-9" class="section level2">
<h2><span class="header-section-number">10.4</span> Ejercicios Propuestos</h2>
<!--chapter:end:5_RandSpark.Rmd-->
<!--chapter:end:bigdata.Rmd-->
<div id="refs" class="references">
<div id="ref-R-rmarkdown">
<p>Allaire, JJ, Yihui Xie, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, Hadley Wickham, Joe Cheng, Winston Chang, and Richard Iannone. 2020. <em>Rmarkdown: Dynamic Documents for R</em>. <a href="https://CRAN.R-project.org/package=rmarkdown">https://CRAN.R-project.org/package=rmarkdown</a>.</p>
</div>
<div id="ref-R-base">
<p>R Core Team. 2019. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.</p>
</div>
<div id="ref-R-knitr">
<p>Xie, Yihui. 2019. <em>Knitr: A General-Purpose Package for Dynamic Report Generation in R</em>. <a href="https://CRAN.R-project.org/package=knitr">https://CRAN.R-project.org/package=knitr</a>.</p>
</div>
<div id="ref-R-bookdown">
<p>———. 2020. <em>Bookdown: Authoring Books and Technical Documents with R Markdown</em>. <a href="https://CRAN.R-project.org/package=bookdown">https://CRAN.R-project.org/package=bookdown</a>.</p>
</div>
<div id="ref-Xie2018">
<p>Xie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. “How to Read This Book.” <em>Transforming Climate Finance and Green Investment with Blockchains</em>, 1. <a href="https://doi.org/10.1016/b978-0-12-814447-3.00041-0">https://doi.org/10.1016/b978-0-12-814447-3.00041-0</a>.</p>
</div>
</div>
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
