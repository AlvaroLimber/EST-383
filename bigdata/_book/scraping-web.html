<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Scraping Web | Big Data en R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Scraping Web | Big Data en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/EST-383" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Scraping Web | Big Data en R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-07-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introR.html"/>
<link rel="next" href="introducción-al-big-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audiencia"><i class="fa fa-check"></i>Audiencia</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-y-acuerdos"><i class="fa fa-check"></i>Software y acuerdos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos"><i class="fa fa-check"></i>Bases de datos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimiento"><i class="fa fa-check"></i>Agradecimiento</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html"><i class="fa fa-check"></i>Acerca del autor</a></li>
<li class="chapter" data-level="1" data-path="introR.html"><a href="introR.html"><i class="fa fa-check"></i><b>1</b> Introducción a R</a><ul>
<li class="chapter" data-level="1.1" data-path="introR.html"><a href="introR.html#tipos-de-estructuras"><i class="fa fa-check"></i><b>1.1</b> Tipos de estructuras</a></li>
<li class="chapter" data-level="1.2" data-path="introR.html"><a href="introR.html#loops-y-condiciones"><i class="fa fa-check"></i><b>1.2</b> Loops y condiciones</a></li>
<li class="chapter" data-level="1.3" data-path="introR.html"><a href="introR.html#funciones"><i class="fa fa-check"></i><b>1.3</b> Funciones</a></li>
<li class="chapter" data-level="1.4" data-path="introR.html"><a href="introR.html#importacion-de-datos"><i class="fa fa-check"></i><b>1.4</b> Importacion de datos</a></li>
<li class="chapter" data-level="1.5" data-path="introR.html"><a href="introR.html#dataframe-y-exploración"><i class="fa fa-check"></i><b>1.5</b> Dataframe y exploración</a></li>
<li class="chapter" data-level="1.6" data-path="introR.html"><a href="introR.html#estadística-descriptiva"><i class="fa fa-check"></i><b>1.6</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="1.7" data-path="introR.html"><a href="introR.html#muestreo-e-inferencia"><i class="fa fa-check"></i><b>1.7</b> Muestreo e inferencia</a></li>
<li class="chapter" data-level="1.8" data-path="introR.html"><a href="introR.html#gráficos-de-origen"><i class="fa fa-check"></i><b>1.8</b> Gráficos de origen</a></li>
<li class="chapter" data-level="1.9" data-path="introR.html"><a href="introR.html#ggplot"><i class="fa fa-check"></i><b>1.9</b> ggplot</a></li>
<li class="chapter" data-level="1.10" data-path="introR.html"><a href="introR.html#r-markdown"><i class="fa fa-check"></i><b>1.10</b> R Markdown</a><ul>
<li class="chapter" data-level="1.10.1" data-path="introR.html"><a href="introR.html#instalación"><i class="fa fa-check"></i><b>1.10.1</b> Instalación</a></li>
<li class="chapter" data-level="1.10.2" data-path="introR.html"><a href="introR.html#yaml-header"><i class="fa fa-check"></i><b>1.10.2</b> YAML Header</a></li>
<li class="chapter" data-level="1.10.3" data-path="introR.html"><a href="introR.html#sintaxis-básica"><i class="fa fa-check"></i><b>1.10.3</b> Sintaxis básica</a></li>
<li class="chapter" data-level="1.10.4" data-path="introR.html"><a href="introR.html#tipos-de-documentos"><i class="fa fa-check"></i><b>1.10.4</b> Tipos de documentos</a></li>
<li class="chapter" data-level="1.10.5" data-path="introR.html"><a href="introR.html#chunks"><i class="fa fa-check"></i><b>1.10.5</b> Chunks</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="introR.html"><a href="introR.html#shiny"><i class="fa fa-check"></i><b>1.11</b> Shiny</a><ul>
<li class="chapter" data-level="1.11.1" data-path="introR.html"><a href="introR.html#ui"><i class="fa fa-check"></i><b>1.11.1</b> UI</a></li>
<li class="chapter" data-level="1.11.2" data-path="introR.html"><a href="introR.html#server"><i class="fa fa-check"></i><b>1.11.2</b> Server</a></li>
</ul></li>
<li class="chapter" data-level="1.12" data-path="introR.html"><a href="introR.html#ejercicios-propuestos"><i class="fa fa-check"></i><b>1.12</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scraping-web.html"><a href="scraping-web.html"><i class="fa fa-check"></i><b>2</b> Scraping Web</a><ul>
<li class="chapter" data-level="2.1" data-path="scraping-web.html"><a href="scraping-web.html#pasos-para-la-recopilación-de-información"><i class="fa fa-check"></i><b>2.1</b> Pasos para la recopilación de información</a></li>
<li class="chapter" data-level="2.2" data-path="scraping-web.html"><a href="scraping-web.html#tecnologías-de-diseminación-extracción-y-almacenamiento-web"><i class="fa fa-check"></i><b>2.2</b> Tecnologías de diseminación, extracción y almacenamiento Web</a></li>
<li class="chapter" data-level="2.3" data-path="scraping-web.html"><a href="scraping-web.html#librerías-en-r"><i class="fa fa-check"></i><b>2.3</b> Librerías en R</a></li>
<li class="chapter" data-level="2.4" data-path="scraping-web.html"><a href="scraping-web.html#librería-rvest"><i class="fa fa-check"></i><b>2.4</b> Librería rvest</a></li>
<li class="chapter" data-level="2.5" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ketal"><i class="fa fa-check"></i><b>2.5</b> Ejemplo: Ketal</a></li>
<li class="chapter" data-level="2.6" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ministerio-de-educación"><i class="fa fa-check"></i><b>2.6</b> Ejemplo: Ministerio de Educación</a></li>
<li class="chapter" data-level="2.7" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-informacion-covid-19-en-bolivia"><i class="fa fa-check"></i><b>2.7</b> Ejemplo, informacion COVID-19 en Bolivia</a></li>
<li class="chapter" data-level="2.8" data-path="scraping-web.html"><a href="scraping-web.html#apis"><i class="fa fa-check"></i><b>2.8</b> APIs</a><ul>
<li class="chapter" data-level="2.8.1" data-path="scraping-web.html"><a href="scraping-web.html#api-banco-mundial"><i class="fa fa-check"></i><b>2.8.1</b> API Banco Mundial</a></li>
<li class="chapter" data-level="2.8.2" data-path="scraping-web.html"><a href="scraping-web.html#api-google-trends"><i class="fa fa-check"></i><b>2.8.2</b> API Google trends</a></li>
<li class="chapter" data-level="2.8.3" data-path="scraping-web.html"><a href="scraping-web.html#api-google-maps"><i class="fa fa-check"></i><b>2.8.3</b> API Google Maps</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="scraping-web.html"><a href="scraping-web.html#ejercicios-propuestos-1"><i class="fa fa-check"></i><b>2.9</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html"><i class="fa fa-check"></i><b>3</b> Introducción al Big Data</a><ul>
<li class="chapter" data-level="3.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#definiendo-al-big-data"><i class="fa fa-check"></i><b>3.1</b> Definiendo al Big Data</a></li>
<li class="chapter" data-level="3.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#las-5-v-en-el-big-data"><i class="fa fa-check"></i><b>3.2</b> Las 5 V en el Big Data</a></li>
<li class="chapter" data-level="3.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ciclo-de-vida-de-un-proyecto-de-análisis-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ciclo de vida de un proyecto de análisis de datos</a></li>
<li class="chapter" data-level="3.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-big-data"><i class="fa fa-check"></i><b>3.4</b> Inferencia y Big Data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#descriptivo"><i class="fa fa-check"></i><b>3.4.1</b> Descriptivo</a></li>
<li class="chapter" data-level="3.4.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#causal"><i class="fa fa-check"></i><b>3.4.2</b> Causal</a></li>
<li class="chapter" data-level="3.4.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#predictivo"><i class="fa fa-check"></i><b>3.4.3</b> Predictivo</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#calidad-de-dato-y-big-data"><i class="fa fa-check"></i><b>3.5</b> Calidad de dato y Big Data</a></li>
<li class="chapter" data-level="3.6" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#captura-y-preservación"><i class="fa fa-check"></i><b>3.6</b> Captura y preservación</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#fuentes-convencionales"><i class="fa fa-check"></i><b>3.6.1</b> Fuentes convencionales</a></li>
<li class="chapter" data-level="3.6.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#datos-web-y-apis"><i class="fa fa-check"></i><b>3.6.2</b> Datos web y APIs</a></li>
<li class="chapter" data-level="3.6.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#record-linkage"><i class="fa fa-check"></i><b>3.6.3</b> Record Linkage</a></li>
<li class="chapter" data-level="3.6.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#bases-de-datos-1"><i class="fa fa-check"></i><b>3.6.4</b> Bases de datos</a></li>
<li class="chapter" data-level="3.6.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#programando-con-big-data"><i class="fa fa-check"></i><b>3.6.5</b> Programando con Big Data</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-y-modelado"><i class="fa fa-check"></i><b>3.7</b> Análisis y modelado</a><ul>
<li class="chapter" data-level="3.7.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#machine-learning"><i class="fa fa-check"></i><b>3.7.1</b> Machine learning</a></li>
<li class="chapter" data-level="3.7.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-de-texto-entendiendo-lo-que-la-gente-escribe"><i class="fa fa-check"></i><b>3.7.2</b> Análisis de texto: Entendiendo lo que la gente escribe</a></li>
<li class="chapter" data-level="3.7.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#networks"><i class="fa fa-check"></i><b>3.7.3</b> Networks</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-ética"><i class="fa fa-check"></i><b>3.8</b> Inferencia y ética</a><ul>
<li class="chapter" data-level="3.8.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#información-y-visualización"><i class="fa fa-check"></i><b>3.8.1</b> Información y visualización</a></li>
<li class="chapter" data-level="3.8.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#error-e-inferencia"><i class="fa fa-check"></i><b>3.8.2</b> Error e inferencia</a></li>
<li class="chapter" data-level="3.8.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#privacidad-y-confidencialidad"><i class="fa fa-check"></i><b>3.8.3</b> Privacidad y confidencialidad</a></li>
<li class="chapter" data-level="3.8.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#workbooks"><i class="fa fa-check"></i><b>3.8.4</b> Workbooks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ejercicios-propuestos-2"><i class="fa fa-check"></i><b>3.9</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="big-data-en-r.html"><a href="big-data-en-r.html"><i class="fa fa-check"></i><b>4</b> Big Data en R</a><ul>
<li class="chapter" data-level="4.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#limitaciones-en-r"><i class="fa fa-check"></i><b>4.1</b> Limitaciones en R</a><ul>
<li class="chapter" data-level="4.1.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#memoria"><i class="fa fa-check"></i><b>4.1.1</b> Memoria</a></li>
<li class="chapter" data-level="4.1.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#velocidad-de-procesamiento"><i class="fa fa-check"></i><b>4.1.2</b> Velocidad de procesamiento</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#a-los-límites-de-la-memoria-y-más-allá"><i class="fa fa-check"></i><b>4.2</b> A los límites de la memoria y más allá</a><ul>
<li class="chapter" data-level="4.2.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#transformacion-y-agregación-de-datos-con-la-librería-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.1</b> Transformacion y agregación de datos con la librería ff y ffbase</a></li>
<li class="chapter" data-level="4.2.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#modelos-glm-con-la-las-librerias-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.2</b> Modelos GLM con la las librerias ff y ffbase</a></li>
<li class="chapter" data-level="4.2.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#expandiendo-la-memoria-con-la-libreria-bigmemory"><i class="fa fa-check"></i><b>4.2.3</b> Expandiendo la memoria con la libreria bigmemory</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#parallel-r"><i class="fa fa-check"></i><b>4.3</b> Parallel R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#libreria-parallel"><i class="fa fa-check"></i><b>4.3.1</b> Libreria parallel</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-y-spark.html"><a href="r-y-spark.html"><i class="fa fa-check"></i><b>5</b> R y Spark</a><ul>
<li class="chapter" data-level="5.1" data-path="r-y-spark.html"><a href="r-y-spark.html#introducción"><i class="fa fa-check"></i><b>5.1</b> Introducción</a><ul>
<li class="chapter" data-level="5.1.1" data-path="r-y-spark.html"><a href="r-y-spark.html#hadoop"><i class="fa fa-check"></i><b>5.1.1</b> Hadoop</a></li>
<li class="chapter" data-level="5.1.2" data-path="r-y-spark.html"><a href="r-y-spark.html#spark"><i class="fa fa-check"></i><b>5.1.2</b> Spark</a></li>
<li class="chapter" data-level="5.1.3" data-path="r-y-spark.html"><a href="r-y-spark.html#sparklyr"><i class="fa fa-check"></i><b>5.1.3</b> Sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="r-y-spark.html"><a href="r-y-spark.html#arrancando-spark"><i class="fa fa-check"></i><b>5.2</b> Arrancando Spark</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-y-spark.html"><a href="r-y-spark.html#prerequisitos"><i class="fa fa-check"></i><b>5.2.1</b> Prerequisitos</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-y-spark.html"><a href="r-y-spark.html#instalación-1"><i class="fa fa-check"></i><b>5.2.2</b> Instalación</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-y-spark.html"><a href="r-y-spark.html#creando-una-sesión-en-spark"><i class="fa fa-check"></i><b>5.2.3</b> Creando una sesión en Spark</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-y-spark.html"><a href="r-y-spark.html#interface-web"><i class="fa fa-check"></i><b>5.2.4</b> Interface web</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-y-spark.html"><a href="r-y-spark.html#análisis-con-spark"><i class="fa fa-check"></i><b>5.3</b> Análisis con Spark</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-y-spark.html"><a href="r-y-spark.html#importando-los-datos"><i class="fa fa-check"></i><b>5.3.1</b> Importando los datos</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-y-spark.html"><a href="r-y-spark.html#librería-dplyr-gramática-de-manipulación-de-datos"><i class="fa fa-check"></i><b>5.3.2</b> Librería DPLYR (Gramática de manipulación de datos)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scraping-web" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Scraping Web</h1>
<p>La definición del scraping web que se toma en este documento proviene de <span class="citation">(<span class="citeproc-not-found" data-reference-id="Mitchell2015"><strong>???</strong></span>)</span> que expresa:</p>
<p><strong>
El Web Scraping es la recolección automática de información de los sitios web. (obviamente no a través de un humano usando un navegador web).
</strong></p>
<p>Un tema dentro del scraping web son las denominadas APIs (Application Programming Interface), estas son entradas a las paginas web diseñadas por los administradores de la pagina web, por lo mismo no siempre contienen toda la información que se desea. Aunque las API no son tan ubicuas como deberían, puede encontrar API para muchos tipos de información. Interesado en la música? Hay algunas API diferentes que pueden darle canciones, artistas, álbumes e incluso información sobre estilos musicales y artistas relacionados. ¿Necesitas datos deportivos? ESPN proporciona API para información de atletas, puntajes de juegos y más. Google tiene docenas de API en su sección de Desarrolladores para traducciones de idiomas, análisis, geolocalización y más.</p>
<div id="pasos-para-la-recopilación-de-información" class="section level2">
<h2><span class="header-section-number">2.1</span> Pasos para la recopilación de información</h2>
<p>Siguiendo a <span class="citation">(<span class="citeproc-not-found" data-reference-id="Iacus2015"><strong>???</strong></span>)</span> que establece cinco pasos al momento de decidir recopilar información mediante el scraping web, estos pasos son:</p>
<ol style="list-style-type: decimal">
<li>Asegúrese de saber exactamente qué tipo de información necesita. Esto puede ser específico (<code>el producto interno bruto de todos los países de la OCDE durante los últimos 10 años'') o vago (</code>opinión de la gente sobre el teléfono de la empresa X’‘, ``colaboración entre miembros del Senado de los Estados Unidos’’).</li>
<li>Averigüe si hay fuentes de datos en la Web que puedan proporcionar información directa o indirecta sobre su problema. Si está buscando hechos concretos, esto probablemente sea fácil. Si está interesado en conceptos bastante vagos, esto es más difícil.</li>
</ol>
<p><strong>La página de inicio de la embajada de un país podría ser una fuente valiosa para la acción de política exterior que a menudo se oculta detrás del telón de la diplomacia. Los tweets pueden contener tendencias de opinión sobre casi todo, las plataformas comerciales pueden informar sobre la satisfacción de los clientes con los productos, las tarifas de alquiler en los sitios web de propiedades pueden contener información sobre el atractivo actual de los barrios de la ciudad …
</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Desarrolle una teoría del proceso de generación de datos cuando busque fuentes potenciales. ¿Cuándo se generaron los datos, cuándo se cargaron en la Web y quién lo hizo? ¿Existen áreas potenciales que no están cubiertas, son consistentes o precisas, y puede identificarlas y corregirlas?</li>
<li>Equilibrar las ventajas y desventajas de las posibles fuentes de datos. Los aspectos relevantes pueden ser la disponibilidad (¡y la legalidad!), los costos de recolección, la compatibilidad de nuevas fuentes con la investigación existente, pero también factores muy subjetivos como la aceptación de la fuente de datos por parte de otros. También piense en posibles formas de validar la calidad de sus datos. ¿Existen otras fuentes independientes que brinden información similar para que sean posibles verificaciones cruzadas aleatorias? En caso de datos secundarios, ¿puede identificar la fuente original y verificar los errores de transferencia?</li>
<li>¡Toma una decisión! Elija la fuente de datos que le parezca más adecuada, documente los motivos de la decisión y comience con los preparativos para la recopilación. Si es factible, recopile datos de varias fuentes para validar las fuentes de datos. Muchos problemas y beneficios de varias estrategias de recopilación de datos salen a la luz solo después de la recopilación real.</li>
</ol>
</div>
<div id="tecnologías-de-diseminación-extracción-y-almacenamiento-web" class="section level2">
<h2><span class="header-section-number">2.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</h2>
<p>Una vez elegida la fuente de datos (página web) y al menos con la intuición de lo que se quiere obtener, el siguiente paso es decidir el mecanismos para el scraping (raspado), esto esta relacionado al tipo de pagina web, ver si esta ofrece una entrada API y conocer sus limitaciones puede ser un punto de partida. Esto se denomina <em>Technologies for disseminating, extracting, and storing web data Collecting</em>, en el marco del uso de R la figura  muestra las interacciones entre ellas.</p>
<p><img src="images/scrap1.png" />
<em>Tecnologías para difundir, extraer y almacenar datos web (considerando el entorno de R)</em></p>
</div>
<div id="librerías-en-r" class="section level2">
<h2><span class="header-section-number">2.3</span> Librerías en R</h2>
<p>El siguiente cuadro presenta las librerías en R relacionadas al web Scraping, incluyendo los servicios API, que a la fecha del proyecto alcanza a 761 librerías, esto representa el <span class="math inline">\(5.02\)</span>% de las librerías en en R.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="scraping-web.html#cb118-1"></a><span class="kw">library</span>(knitr)</span>
<span id="cb118-2"><a href="scraping-web.html#cb118-2"></a><span class="kw">library</span>(packagefinder)</span>
<span id="cb118-3"><a href="scraping-web.html#cb118-3"></a><span class="kw">library</span>(xtable)</span>
<span id="cb118-4"><a href="scraping-web.html#cb118-4"></a><span class="kw">findPackage</span>(<span class="kw">c</span>(<span class="st">&quot;API&quot;</span>,<span class="st">&quot;scrape&quot;</span>),<span class="dt">limit.results=</span><span class="op">-</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="librería-rvest" class="section level2">
<h2><span class="header-section-number">2.4</span> Librería rvest</h2>
<p>Rvest es parte del universo tidyverse y esta orientada al scrape de páginas web. La instalación es usual:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="scraping-web.html#cb119-1"></a><span class="co">#desde CRAN</span></span>
<span id="cb119-2"><a href="scraping-web.html#cb119-2"></a><span class="kw">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</span>
<span id="cb119-3"><a href="scraping-web.html#cb119-3"></a><span class="co">#la versión en desarrollo desde github</span></span>
<span id="cb119-4"><a href="scraping-web.html#cb119-4"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/rvest&quot;</span>)</span></code></pre></div>
<p>Existe la herramienta selectorgadget disponible en <a href="http://selectorgadget.com/" class="uri">http://selectorgadget.com/</a>, esta permite interactuar con las paginas web para seleccionar partes del documento usando un CSS selector. Las funciones mas importantes dentro de rvest son:</p>
<ul>
<li>read_html para cargar la estructura de la página</li>
<li>html_nodes para extraer informacion de la pagina segun el CSS selector</li>
<li>html_text para extraer texto de un html_nodes</li>
<li>html_table para extraer tablas y ponerlas en data frame</li>
</ul>
</div>
<div id="ejemplo-ketal" class="section level2">
<h2><span class="header-section-number">2.5</span> Ejemplo: Ketal</h2>
<p>Una de las potencialidades del scraping es poder rescatar información contenida en páginas web, según la estructura de esta, en esta sección se presenta un ejemplo del código y la recolección de información que puede realizarse. Para esto se eligió la página de supermercados Ketal que es abierta y publica los precios de sus distintos productos de forma categorizada por tipo de productos.</p>
<p>El estudio de esta pagina tiene el principal objetivo de mostrar el proceso de extracción, el uso potencial de la información esta relacionada a tener la variación de los precios y para futuros estudios se podría completar el ejercicio incluyendo la parte de la demanda mediante la encuesta de presupuestos familiares y poder así pronosticar la inflación dentro de este sector y para la población potencial que acude a supermercados.</p>
<p>El ejemplo presenta el proceso del scraping para 8 grupo de productos:</p>
<ul>
<li>Carne de aves</li>
<li>Carne de cerdo</li>
<li>Carne de res</li>
<li>Pescado</li>
<li>Leches</li>
<li>Aceites</li>
<li>Frutas y verduras</li>
<li>Dulces</li>
</ul>
<p>Se emplea la libreria <em>rvest</em>, que es un paquete diseña para para facilitar la descarga y la manipulación de HTML y XML. También se utiliza la extensión Selector Gadget <a href="https://selectorgadget.com" class="uri">https://selectorgadget.com</a>, este permite la identificación de las estructuras de las páginas web.</p>
<p>El objetivo del raspado es obtener el nombre del producto, su código, y el precio. Utilizando el selector gadget se identifica que en <span class="math inline">\(.product-name\)</span> se guardan los nombres, en <span class="math inline">\(.price.product-price\)</span> el precio del producto y en <span class="math inline">\(data-id-product\)</span> el identificador del producto. En R el código es:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="scraping-web.html#cb120-1"></a><span class="co">#librerías para el raspado</span></span>
<span id="cb120-2"><a href="scraping-web.html#cb120-2"></a><span class="kw">library</span>(rvest)</span>
<span id="cb120-3"><a href="scraping-web.html#cb120-3"></a><span class="co">#Enlaces de los grupos de productos</span></span>
<span id="cb120-4"><a href="scraping-web.html#cb120-4"></a>ave &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/209-aves&quot;</span>)</span>
<span id="cb120-5"><a href="scraping-web.html#cb120-5"></a>cerdo&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/208-cerdo&quot;</span>)</span>
<span id="cb120-6"><a href="scraping-web.html#cb120-6"></a>res&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/210-res&quot;</span>)</span>
<span id="cb120-7"><a href="scraping-web.html#cb120-7"></a>fish&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/17060162-pescados&quot;</span>)</span>
<span id="cb120-8"><a href="scraping-web.html#cb120-8"></a>leches&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/53-leches-liquidas&quot;</span>)</span>
<span id="cb120-9"><a href="scraping-web.html#cb120-9"></a>aceites&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/272-aceites-y-vinagres&quot;</span>)</span>
<span id="cb120-10"><a href="scraping-web.html#cb120-10"></a>frutaver&lt;-<span class="kw">read_html</span>(</span>
<span id="cb120-11"><a href="scraping-web.html#cb120-11"></a>  <span class="st">&quot;https://www.ketal.com.bo/50-frutas-y-verduras?id_category=50&amp;n=150&quot;</span>)</span>
<span id="cb120-12"><a href="scraping-web.html#cb120-12"></a>dulce&lt;-<span class="kw">read_html</span>(</span>
<span id="cb120-13"><a href="scraping-web.html#cb120-13"></a>  <span class="st">&quot;https://www.ketal.com.bo/15-chocolates-y-golosinas?id_category=15&amp;n=150&quot;</span>)</span>
<span id="cb120-14"><a href="scraping-web.html#cb120-14"></a><span class="co">#definición de la base de datos que guarda la información</span></span>
<span id="cb120-15"><a href="scraping-web.html#cb120-15"></a>bd&lt;-<span class="ot">NULL</span></span>
<span id="cb120-16"><a href="scraping-web.html#cb120-16"></a><span class="co">#Algoritmo del raspado de los 8 productos</span></span>
<span id="cb120-17"><a href="scraping-web.html#cb120-17"></a>k&lt;-<span class="dv">1</span></span>
<span id="cb120-18"><a href="scraping-web.html#cb120-18"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">list</span>(ave,cerdo,res,fish,leches,aceites,frutaver,dulce)){</span>
<span id="cb120-19"><a href="scraping-web.html#cb120-19"></a>  <span class="kw">print</span>(k)</span>
<span id="cb120-20"><a href="scraping-web.html#cb120-20"></a>  name&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.product-name&quot;</span>),<span class="st">&quot;title&quot;</span>)[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb120-21"><a href="scraping-web.html#cb120-21"></a>  precio&lt;-<span class="kw">html_text</span>(</span>
<span id="cb120-22"><a href="scraping-web.html#cb120-22"></a>    <span class="kw">html_nodes</span>(i,<span class="st">&quot;.price.product-price&quot;</span>),<span class="dt">trim=</span>T)[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">length</span>(name)<span class="op">*</span><span class="dv">2</span>,<span class="dv">2</span>)]</span>
<span id="cb120-23"><a href="scraping-web.html#cb120-23"></a>  code&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.add_to_compare&quot;</span>),<span class="st">&quot;data-id-product&quot;</span>)</span>
<span id="cb120-24"><a href="scraping-web.html#cb120-24"></a>  bd&lt;-<span class="kw">rbind</span>(bd,<span class="kw">data.frame</span>(name,precio,code))</span>
<span id="cb120-25"><a href="scraping-web.html#cb120-25"></a>  k&lt;-k<span class="op">+</span><span class="dv">1</span></span>
<span id="cb120-26"><a href="scraping-web.html#cb120-26"></a>}</span>
<span id="cb120-27"><a href="scraping-web.html#cb120-27"></a><span class="co">#se identifica el día</span></span>
<span id="cb120-28"><a href="scraping-web.html#cb120-28"></a>day&lt;-<span class="kw">substr</span>(<span class="kw">Sys.time</span>(),<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb120-29"><a href="scraping-web.html#cb120-29"></a><span class="co">#se guarda la informacion en base al dia del raspado</span></span>
<span id="cb120-30"><a href="scraping-web.html#cb120-30"></a>bd<span class="op">$</span>day&lt;-day</span>
<span id="cb120-31"><a href="scraping-web.html#cb120-31"></a><span class="kw">save</span>(bd,<span class="dt">file =</span> <span class="kw">paste0</span>(day,<span class="st">&quot;.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="ejemplo-ministerio-de-educación" class="section level2">
<h2><span class="header-section-number">2.6</span> Ejemplo: Ministerio de Educación</h2>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="scraping-web.html#cb121-1"></a><span class="kw">library</span>(rvest)</span>
<span id="cb121-2"><a href="scraping-web.html#cb121-2"></a><span class="kw">library</span>(foreign)</span>
<span id="cb121-3"><a href="scraping-web.html#cb121-3"></a><span class="kw">library</span>(xlsx)</span>
<span id="cb121-4"><a href="scraping-web.html#cb121-4"></a><span class="co">########################</span></span>
<span id="cb121-5"><a href="scraping-web.html#cb121-5"></a>bd&lt;-<span class="kw">read.dta</span>(<span class="st">&quot;mmUE.dta&quot;</span>)</span>
<span id="cb121-6"><a href="scraping-web.html#cb121-6"></a>rue&lt;-bd<span class="op">$</span>cod_ue_det</span>
<span id="cb121-7"><a href="scraping-web.html#cb121-7"></a>rue&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(rue,<span class="st">&quot;;&quot;</span>))</span>
<span id="cb121-8"><a href="scraping-web.html#cb121-8"></a>bd&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">78</span>))</span>
<span id="cb121-9"><a href="scraping-web.html#cb121-9"></a>k&lt;-<span class="dv">1</span></span>
<span id="cb121-10"><a href="scraping-web.html#cb121-10"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">325</span><span class="op">:</span><span class="kw">length</span>(rue)){</span>
<span id="cb121-11"><a href="scraping-web.html#cb121-11"></a> <span class="kw">print</span>(i)</span>
<span id="cb121-12"><a href="scraping-web.html#cb121-12"></a>urlmin&lt;-<span class="kw">paste0</span>(<span class="st">&quot;http://seie.minedu.gob.bo/reportes/mapas_unidades_educativas/ficha/ver/&quot;</span>,rue[i])</span>
<span id="cb121-13"><a href="scraping-web.html#cb121-13"></a> ue &lt;-<span class="st"> </span><span class="kw">read_html</span>(urlmin,<span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb121-14"><a href="scraping-web.html#cb121-14"></a></span>
<span id="cb121-15"><a href="scraping-web.html#cb121-15"></a>jj&lt;-<span class="kw">grepl</span>(<span class="st">&quot;Error was&quot;</span>,<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>)])</span>
<span id="cb121-16"><a href="scraping-web.html#cb121-16"></a><span class="cf">if</span>(jj<span class="op">==</span>T){</span>
<span id="cb121-17"><a href="scraping-web.html#cb121-17"></a>  <span class="cf">next</span>()</span>
<span id="cb121-18"><a href="scraping-web.html#cb121-18"></a>}</span>
<span id="cb121-19"><a href="scraping-web.html#cb121-19"></a><span class="co">#nombre id (2)</span></span>
<span id="cb121-20"><a href="scraping-web.html#cb121-20"></a>bd[k,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</span>
<span id="cb121-21"><a href="scraping-web.html#cb121-21"></a><span class="co">#Informacion administrativa (12)</span></span>
<span id="cb121-22"><a href="scraping-web.html#cb121-22"></a>bd[k,<span class="dv">3</span><span class="op">:</span><span class="dv">14</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;dd&quot;</span>))</span>
<span id="cb121-23"><a href="scraping-web.html#cb121-23"></a><span class="co">#matricula #promovidos #reprobacion #abandono # (60)</span></span>
<span id="cb121-24"><a href="scraping-web.html#cb121-24"></a><span class="co">#matricula</span></span>
<span id="cb121-25"><a href="scraping-web.html#cb121-25"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>){</span>
<span id="cb121-26"><a href="scraping-web.html#cb121-26"></a>bd[k,(<span class="dv">15</span><span class="op">*</span>j)<span class="op">:</span>(<span class="dv">14</span><span class="op">+</span><span class="dv">15</span><span class="op">*</span>j)]&lt;-<span class="kw">as.integer</span>(<span class="kw">unlist</span>(<span class="kw">html_table</span>(ue)[j])[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)])</span>
<span id="cb121-27"><a href="scraping-web.html#cb121-27"></a>}</span>
<span id="cb121-28"><a href="scraping-web.html#cb121-28"></a><span class="co">#servicios (4)</span></span>
<span id="cb121-29"><a href="scraping-web.html#cb121-29"></a>bd[k,<span class="dv">75</span><span class="op">:</span><span class="dv">78</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">18</span><span class="op">:</span><span class="dv">21</span>]</span>
<span id="cb121-30"><a href="scraping-web.html#cb121-30"></a>k&lt;-k<span class="op">+</span><span class="dv">1</span></span>
<span id="cb121-31"><a href="scraping-web.html#cb121-31"></a>}</span>
<span id="cb121-32"><a href="scraping-web.html#cb121-32"></a><span class="kw">write.xlsx</span>(bd,<span class="st">&quot;ue2017.xlsx&quot;</span>,<span class="dt">row.names =</span> F)</span></code></pre></div>
</div>
<div id="ejemplo-informacion-covid-19-en-bolivia" class="section level2">
<h2><span class="header-section-number">2.7</span> Ejemplo, informacion COVID-19 en Bolivia</h2>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="scraping-web.html#cb122-1"></a><span class="kw">library</span>(rvest)</span>
<span id="cb122-2"><a href="scraping-web.html#cb122-2"></a><span class="co">#paso 0: Estadísticas del covid-19 en Bolivia</span></span>
<span id="cb122-3"><a href="scraping-web.html#cb122-3"></a><span class="co">#paso 1: cargar la www de interés</span></span>
<span id="cb122-4"><a href="scraping-web.html#cb122-4"></a>bs&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.boliviasegura.gob.bo/&quot;</span>)</span>
<span id="cb122-5"><a href="scraping-web.html#cb122-5"></a>ww&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.worldometers.info/coronavirus/&quot;</span>)</span>
<span id="cb122-6"><a href="scraping-web.html#cb122-6"></a><span class="co">#paso 2: Raspar la información de interés</span></span>
<span id="cb122-7"><a href="scraping-web.html#cb122-7"></a>node0&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;h1&quot;</span>)</span>
<span id="cb122-8"><a href="scraping-web.html#cb122-8"></a>node1&lt;-<span class="kw">html_text</span>(node0)</span>
<span id="cb122-9"><a href="scraping-web.html#cb122-9"></a>node2&lt;-<span class="kw">as.numeric</span>(node1) </span>
<span id="cb122-10"><a href="scraping-web.html#cb122-10"></a><span class="kw">barplot</span>(node2,<span class="dt">legend.text =</span> <span class="kw">c</span>(<span class="st">&quot;Confirmados&quot;</span>,<span class="st">&quot;Recuperados&quot;</span>,<span class="st">&quot;Muertes&quot;</span>))</span>
<span id="cb122-11"><a href="scraping-web.html#cb122-11"></a></span>
<span id="cb122-12"><a href="scraping-web.html#cb122-12"></a>aux&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;.mapanuevos&quot;</span>)</span>
<span id="cb122-13"><a href="scraping-web.html#cb122-13"></a><span class="co">#paso 3: trabajando con tablas</span></span>
<span id="cb122-14"><a href="scraping-web.html#cb122-14"></a>tabla&lt;-<span class="kw">html_table</span>(bs,<span class="dt">fill =</span> T)</span>
<span id="cb122-15"><a href="scraping-web.html#cb122-15"></a>tabla[[<span class="dv">2</span>]]</span>
<span id="cb122-16"><a href="scraping-web.html#cb122-16"></a><span class="co">#paso 4: limpieza</span></span>
<span id="cb122-17"><a href="scraping-web.html#cb122-17"></a><span class="co">#paso 5: Análisis</span></span></code></pre></div>
</div>
<div id="apis" class="section level2">
<h2><span class="header-section-number">2.8</span> APIs</h2>
<p>Conocida también por la sigla API,“application programming interface”, es un conjunto de subrutinas, funciones y procedimientos (o métodos, en la programación orientada a objetos) que ofrece cierta biblioteca para ser utilizado por otro software. Ofrece una entrada a los datos que distribuye el API.</p>
<div id="api-banco-mundial" class="section level3">
<h3><span class="header-section-number">2.8.1</span> API Banco Mundial</h3>
<p>La API ofrece acceso a las estadísticas que genera el Banco Mundial, existe un set extenso de estadisticas de la mayoria de los paises. La API ofrece mas de 16000 indicadores de series de tiempo, muchos de los indicadores tienen una cobertura de 50 años. La API incluye el acceso a 45 bases de datos, incluyendo:</p>
<ul>
<li>World Development Indicators</li>
<li>International Debt Statistcs</li>
<li>Doing Business</li>
<li>Human Capital Index</li>
<li>Subnational Poverty</li>
<li>Y otros, <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation">ver</a></li>
</ul>
<p>En R s epuede acceder mediante la libreria wbstats.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="scraping-web.html#cb123-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;wbstats&quot;</span>)</span>
<span id="cb123-2"><a href="scraping-web.html#cb123-2"></a><span class="kw">library</span>(wbstats)</span>
<span id="cb123-3"><a href="scraping-web.html#cb123-3"></a><span class="co">#acceso a todos los indicadores disponibles</span></span>
<span id="cb123-4"><a href="scraping-web.html#cb123-4"></a><span class="kw">wbindicators</span>(<span class="st">&quot;es&quot;</span>)</span>
<span id="cb123-5"><a href="scraping-web.html#cb123-5"></a><span class="co">#acceso al catalogo de datos</span></span>
<span id="cb123-6"><a href="scraping-web.html#cb123-6"></a><span class="kw">wbdatacatalog</span>()</span>
<span id="cb123-7"><a href="scraping-web.html#cb123-7"></a><span class="co">#búsqueda de indicador</span></span>
<span id="cb123-8"><a href="scraping-web.html#cb123-8"></a><span class="kw">wbsearch</span>(<span class="dt">pattern =</span> <span class="st">&quot;education&quot;</span>)</span>
<span id="cb123-9"><a href="scraping-web.html#cb123-9"></a><span class="co"># ver los países y sus códigos </span></span>
<span id="cb123-10"><a href="scraping-web.html#cb123-10"></a><span class="kw">wbcountries</span>()             </span>
<span id="cb123-11"><a href="scraping-web.html#cb123-11"></a><span class="co">#Comando para extraer los indicadores</span></span>
<span id="cb123-12"><a href="scraping-web.html#cb123-12"></a><span class="kw">wb</span>(<span class="dt">country =</span> <span class="st">&quot;BOL&quot;</span>,<span class="dt">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>, <span class="dt">startdate =</span> <span class="dv">2000</span>, <span class="dt">enddate =</span> <span class="dv">2016</span>)</span></code></pre></div>
</div>
<div id="api-google-trends" class="section level3">
<h3><span class="header-section-number">2.8.2</span> API Google trends</h3>
<p>La librari gtrendsR permite acceder a la API de <a href="https://trends.google.es/trends/?geo=ES">google trends</a>, esta permite acceder a las tendencias de busqueda que se realizan mediante el motor de busqueda de Google.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="scraping-web.html#cb124-1"></a><span class="co">#install.packages(&quot;gtrendsR&quot;)</span></span>
<span id="cb124-2"><a href="scraping-web.html#cb124-2"></a><span class="kw">library</span>(gtrendsR)</span>
<span id="cb124-3"><a href="scraping-web.html#cb124-3"></a><span class="kw">library</span>(knitr)</span>
<span id="cb124-4"><a href="scraping-web.html#cb124-4"></a>res &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="st">&quot;Coronavirus&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;BO&quot;</span>))</span>
<span id="cb124-5"><a href="scraping-web.html#cb124-5"></a><span class="kw">plot</span>(res)</span>
<span id="cb124-6"><a href="scraping-web.html#cb124-6"></a></span>
<span id="cb124-7"><a href="scraping-web.html#cb124-7"></a><span class="kw">kable</span>(<span class="kw">head</span>(res<span class="op">$</span>interest_over_time,<span class="dv">10</span>))</span></code></pre></div>
</div>
<div id="api-google-maps" class="section level3">
<h3><span class="header-section-number">2.8.3</span> API Google Maps</h3>
<p>R tiene la librari googleway que permite tener acceso a la API de google maps, es necesario una llave de autentificación.</p>
<p>Para la llave seguir los pasos en el <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=es-419">enlace</a></p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="scraping-web.html#cb125-1"></a><span class="co">#install.packages(&quot;googleway&quot;)</span></span>
<span id="cb125-2"><a href="scraping-web.html#cb125-2"></a><span class="kw">library</span>(googleway)</span>
<span id="cb125-3"><a href="scraping-web.html#cb125-3"></a>map_key &lt;-<span class="st"> &#39;xxx&#39;</span></span>
<span id="cb125-4"><a href="scraping-web.html#cb125-4"></a><span class="kw">google_map</span>(<span class="dt">key =</span> map_key,<span class="dt">location =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">16.5030161</span>,<span class="op">-</span><span class="fl">68.1292566</span>),<span class="dt">zoom =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_traffic</span>()</span></code></pre></div>
</div>
</div>
<div id="ejercicios-propuestos-1" class="section level2">
<h2><span class="header-section-number">2.9</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Extraer la fecha, y el precio de compra y venta del dolar de la página <a href="https://www.bcb.gob.bo" class="uri">https://www.bcb.gob.bo</a></li>
<li>Usando la página <a href="https://www.trabajopolis.bo/" class="uri">https://www.trabajopolis.bo/</a> seleccionar un departamento y armar una base de dato de ofertas laborales</li>
<li>Armar una base de datos en base a la página <a href="https://www.infocasas.com.bo" class="uri">https://www.infocasas.com.bo</a></li>
<li>Explorar librarias API con acceso a Youtube y encontrar los 10 videos con más visualizaciones que incluyan a Bolivia en su titulo.</li>
<li>Explorar la libraria gtrendsR y explorar en que meses en Bolivia es mas frecuente la búsqueda de</li>
<li>Usar la informacion de worldometers y generar un gráfico de contagios por millon de los distintos paises.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introducción-al-big-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
