<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Scraping Web | Big Data en R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Scraping Web | Big Data en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/EST-383" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Scraping Web | Big Data en R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-11-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introR.html"/>
<link rel="next" href="introducción-al-big-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audiencia"><i class="fa fa-check"></i>Audiencia</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-y-acuerdos"><i class="fa fa-check"></i>Software y acuerdos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos"><i class="fa fa-check"></i>Bases de datos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimiento"><i class="fa fa-check"></i>Agradecimiento</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introR.html"><a href="introR.html"><i class="fa fa-check"></i><b>1</b> Introducción a R</a><ul>
<li class="chapter" data-level="1.1" data-path="introR.html"><a href="introR.html#qué-es-r"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introR.html"><a href="introR.html#acerca-de-r"><i class="fa fa-check"></i><b>1.1.1</b> Acerca de R</a></li>
<li class="chapter" data-level="1.1.2" data-path="introR.html"><a href="introR.html#qué-es-r-1"><i class="fa fa-check"></i><b>1.1.2</b> ¿Qué es R?</a></li>
<li class="chapter" data-level="1.1.3" data-path="introR.html"><a href="introR.html#algunas-referencias"><i class="fa fa-check"></i><b>1.1.3</b> Algunas referencias</a></li>
<li class="chapter" data-level="1.1.4" data-path="introR.html"><a href="introR.html#rstudio"><i class="fa fa-check"></i><b>1.1.4</b> RStudio</a></li>
<li class="chapter" data-level="1.1.5" data-path="introR.html"><a href="introR.html#instalación"><i class="fa fa-check"></i><b>1.1.5</b> Instalación</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introR.html"><a href="introR.html#r-básico"><i class="fa fa-check"></i><b>1.2</b> R básico</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introR.html"><a href="introR.html#lógica-de-los-comandos-en-r"><i class="fa fa-check"></i><b>1.2.1</b> Lógica de los comandos en R</a></li>
<li class="chapter" data-level="1.2.2" data-path="introR.html"><a href="introR.html#palabras-reservadas-y-simbolos-especiales-de-r"><i class="fa fa-check"></i><b>1.2.2</b> Palabras reservadas y simbolos especiales de R</a></li>
<li class="chapter" data-level="1.2.3" data-path="introR.html"><a href="introR.html#símbolos-lógicos"><i class="fa fa-check"></i><b>1.2.3</b> Símbolos Lógicos</a></li>
<li class="chapter" data-level="1.2.4" data-path="introR.html"><a href="introR.html#asignación-o-creación-de-objetos-estructuras-variables"><i class="fa fa-check"></i><b>1.2.4</b> Asignación o creación de objetos (estructuras, variables)</a></li>
<li class="chapter" data-level="1.2.5" data-path="introR.html"><a href="introR.html#clases-en-r"><i class="fa fa-check"></i><b>1.2.5</b> Clases en R</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introR.html"><a href="introR.html#tipos-de-estructuras"><i class="fa fa-check"></i><b>1.3</b> Tipos de estructuras</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introR.html"><a href="introR.html#homogéneas"><i class="fa fa-check"></i><b>1.3.1</b> Homogéneas</a></li>
<li class="chapter" data-level="1.3.2" data-path="introR.html"><a href="introR.html#heterogéneas"><i class="fa fa-check"></i><b>1.3.2</b> Heterogéneas</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introR.html"><a href="introR.html#loops-y-condiciones"><i class="fa fa-check"></i><b>1.4</b> Loops y condiciones</a></li>
<li class="chapter" data-level="1.5" data-path="introR.html"><a href="introR.html#funciones"><i class="fa fa-check"></i><b>1.5</b> Funciones</a></li>
<li class="chapter" data-level="1.6" data-path="introR.html"><a href="introR.html#importacion-de-datos"><i class="fa fa-check"></i><b>1.6</b> Importacion de datos</a></li>
<li class="chapter" data-level="1.7" data-path="introR.html"><a href="introR.html#dataframe-y-exploración"><i class="fa fa-check"></i><b>1.7</b> Dataframe y exploración</a></li>
<li class="chapter" data-level="1.8" data-path="introR.html"><a href="introR.html#estadística-descriptiva"><i class="fa fa-check"></i><b>1.8</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="1.9" data-path="introR.html"><a href="introR.html#muestreo-e-inferencia"><i class="fa fa-check"></i><b>1.9</b> Muestreo e inferencia</a></li>
<li class="chapter" data-level="1.10" data-path="introR.html"><a href="introR.html#gráficos-de-origen"><i class="fa fa-check"></i><b>1.10</b> Gráficos de origen</a></li>
<li class="chapter" data-level="1.11" data-path="introR.html"><a href="introR.html#ggplot"><i class="fa fa-check"></i><b>1.11</b> ggplot</a></li>
<li class="chapter" data-level="1.12" data-path="introR.html"><a href="introR.html#r-markdown"><i class="fa fa-check"></i><b>1.12</b> R Markdown</a><ul>
<li class="chapter" data-level="1.12.1" data-path="introR.html"><a href="introR.html#instalación-1"><i class="fa fa-check"></i><b>1.12.1</b> Instalación</a></li>
<li class="chapter" data-level="1.12.2" data-path="introR.html"><a href="introR.html#yaml-header"><i class="fa fa-check"></i><b>1.12.2</b> YAML Header</a></li>
<li class="chapter" data-level="1.12.3" data-path="introR.html"><a href="introR.html#sintaxis-básica"><i class="fa fa-check"></i><b>1.12.3</b> Sintaxis básica</a></li>
<li class="chapter" data-level="1.12.4" data-path="introR.html"><a href="introR.html#tipos-de-documentos"><i class="fa fa-check"></i><b>1.12.4</b> Tipos de documentos</a></li>
<li class="chapter" data-level="1.12.5" data-path="introR.html"><a href="introR.html#chunks"><i class="fa fa-check"></i><b>1.12.5</b> Chunks</a></li>
</ul></li>
<li class="chapter" data-level="1.13" data-path="introR.html"><a href="introR.html#shiny"><i class="fa fa-check"></i><b>1.13</b> Shiny</a><ul>
<li class="chapter" data-level="1.13.1" data-path="introR.html"><a href="introR.html#ui"><i class="fa fa-check"></i><b>1.13.1</b> UI</a></li>
<li class="chapter" data-level="1.13.2" data-path="introR.html"><a href="introR.html#server"><i class="fa fa-check"></i><b>1.13.2</b> Server</a></li>
</ul></li>
<li class="chapter" data-level="1.14" data-path="introR.html"><a href="introR.html#ejercicios-propuestos"><i class="fa fa-check"></i><b>1.14</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scraping-web.html"><a href="scraping-web.html"><i class="fa fa-check"></i><b>2</b> Scraping Web</a><ul>
<li class="chapter" data-level="2.1" data-path="scraping-web.html"><a href="scraping-web.html#pasos-para-la-recopilación-de-información"><i class="fa fa-check"></i><b>2.1</b> Pasos para la recopilación de información</a></li>
<li class="chapter" data-level="2.2" data-path="scraping-web.html"><a href="scraping-web.html#tecnologías-de-diseminación-extracción-y-almacenamiento-web"><i class="fa fa-check"></i><b>2.2</b> Tecnologías de diseminación, extracción y almacenamiento Web</a></li>
<li class="chapter" data-level="2.3" data-path="scraping-web.html"><a href="scraping-web.html#librerías-en-r"><i class="fa fa-check"></i><b>2.3</b> Librerías en R</a></li>
<li class="chapter" data-level="2.4" data-path="scraping-web.html"><a href="scraping-web.html#librería-rvest"><i class="fa fa-check"></i><b>2.4</b> Librería rvest</a></li>
<li class="chapter" data-level="2.5" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-covid-bolivia-segura-worldometers"><i class="fa fa-check"></i><b>2.5</b> Ejemplo: COVID, Bolivia segura, Worldometers</a></li>
<li class="chapter" data-level="2.6" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ultracasas"><i class="fa fa-check"></i><b>2.6</b> Ejemplo: Ultracasas</a></li>
<li class="chapter" data-level="2.7" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ketal"><i class="fa fa-check"></i><b>2.7</b> Ejemplo: Ketal</a></li>
<li class="chapter" data-level="2.8" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ministerio-de-educación"><i class="fa fa-check"></i><b>2.8</b> Ejemplo: Ministerio de Educación</a></li>
<li class="chapter" data-level="2.9" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-informacion-covid-19-en-bolivia"><i class="fa fa-check"></i><b>2.9</b> Ejemplo, informacion COVID-19 en Bolivia</a></li>
<li class="chapter" data-level="2.10" data-path="scraping-web.html"><a href="scraping-web.html#apis"><i class="fa fa-check"></i><b>2.10</b> APIs</a><ul>
<li class="chapter" data-level="2.10.1" data-path="scraping-web.html"><a href="scraping-web.html#api-banco-mundial"><i class="fa fa-check"></i><b>2.10.1</b> API Banco Mundial</a></li>
<li class="chapter" data-level="2.10.2" data-path="scraping-web.html"><a href="scraping-web.html#api-google-trends"><i class="fa fa-check"></i><b>2.10.2</b> API Google trends</a></li>
<li class="chapter" data-level="2.10.3" data-path="scraping-web.html"><a href="scraping-web.html#api-google-maps"><i class="fa fa-check"></i><b>2.10.3</b> API Google Maps</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="scraping-web.html"><a href="scraping-web.html#ejercicios-propuestos-1"><i class="fa fa-check"></i><b>2.11</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html"><i class="fa fa-check"></i><b>3</b> Introducción al Big Data</a><ul>
<li class="chapter" data-level="3.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#definiendo-al-big-data"><i class="fa fa-check"></i><b>3.1</b> Definiendo al Big Data</a></li>
<li class="chapter" data-level="3.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#las-5-v-en-el-big-data"><i class="fa fa-check"></i><b>3.2</b> Las 5 V en el Big Data</a></li>
<li class="chapter" data-level="3.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ciclo-de-vida-de-un-proyecto-de-análisis-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ciclo de vida de un proyecto de análisis de datos</a></li>
<li class="chapter" data-level="3.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-big-data"><i class="fa fa-check"></i><b>3.4</b> Inferencia y Big Data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#descriptivo"><i class="fa fa-check"></i><b>3.4.1</b> Descriptivo</a></li>
<li class="chapter" data-level="3.4.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#causal"><i class="fa fa-check"></i><b>3.4.2</b> Causal</a></li>
<li class="chapter" data-level="3.4.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#predictivo"><i class="fa fa-check"></i><b>3.4.3</b> Predictivo</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#calidad-de-dato-y-big-data"><i class="fa fa-check"></i><b>3.5</b> Calidad de dato y Big Data</a></li>
<li class="chapter" data-level="3.6" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#captura-y-preservación"><i class="fa fa-check"></i><b>3.6</b> Captura y preservación</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#fuentes-convencionales"><i class="fa fa-check"></i><b>3.6.1</b> Fuentes convencionales</a></li>
<li class="chapter" data-level="3.6.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#datos-web-y-apis"><i class="fa fa-check"></i><b>3.6.2</b> Datos web y APIs</a></li>
<li class="chapter" data-level="3.6.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#record-linkage"><i class="fa fa-check"></i><b>3.6.3</b> Record Linkage</a></li>
<li class="chapter" data-level="3.6.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#bases-de-datos-1"><i class="fa fa-check"></i><b>3.6.4</b> Bases de datos</a></li>
<li class="chapter" data-level="3.6.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#programando-con-big-data"><i class="fa fa-check"></i><b>3.6.5</b> Programando con Big Data</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-y-modelado"><i class="fa fa-check"></i><b>3.7</b> Análisis y modelado</a><ul>
<li class="chapter" data-level="3.7.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#machine-learning"><i class="fa fa-check"></i><b>3.7.1</b> Machine learning</a></li>
<li class="chapter" data-level="3.7.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-de-texto-entendiendo-lo-que-la-gente-escribe"><i class="fa fa-check"></i><b>3.7.2</b> Análisis de texto: Entendiendo lo que la gente escribe</a></li>
<li class="chapter" data-level="3.7.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#networks"><i class="fa fa-check"></i><b>3.7.3</b> Networks</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-ética"><i class="fa fa-check"></i><b>3.8</b> Inferencia y ética</a><ul>
<li class="chapter" data-level="3.8.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#información-y-visualización"><i class="fa fa-check"></i><b>3.8.1</b> Información y visualización</a></li>
<li class="chapter" data-level="3.8.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#error-e-inferencia"><i class="fa fa-check"></i><b>3.8.2</b> Error e inferencia</a></li>
<li class="chapter" data-level="3.8.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#privacidad-y-confidencialidad"><i class="fa fa-check"></i><b>3.8.3</b> Privacidad y confidencialidad</a></li>
<li class="chapter" data-level="3.8.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#workbooks"><i class="fa fa-check"></i><b>3.8.4</b> Workbooks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ejercicios-propuestos-2"><i class="fa fa-check"></i><b>3.9</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="big-data-en-r.html"><a href="big-data-en-r.html"><i class="fa fa-check"></i><b>4</b> Big Data en R</a><ul>
<li class="chapter" data-level="4.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#limitaciones-en-r"><i class="fa fa-check"></i><b>4.1</b> Limitaciones en R</a><ul>
<li class="chapter" data-level="4.1.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#memoria"><i class="fa fa-check"></i><b>4.1.1</b> Memoria</a></li>
<li class="chapter" data-level="4.1.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#velocidad-de-procesamiento"><i class="fa fa-check"></i><b>4.1.2</b> Velocidad de procesamiento</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#a-los-límites-de-la-memoria-y-más-allá"><i class="fa fa-check"></i><b>4.2</b> A los límites de la memoria y más allá</a><ul>
<li class="chapter" data-level="4.2.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#transformacion-y-agregación-de-datos-con-la-librería-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.1</b> Transformacion y agregación de datos con la librería ff y ffbase</a></li>
<li class="chapter" data-level="4.2.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#modelos-glm-con-la-las-librerias-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.2</b> Modelos GLM con la las librerias ff y ffbase</a></li>
<li class="chapter" data-level="4.2.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#expandiendo-la-memoria-con-la-libreria-bigmemory"><i class="fa fa-check"></i><b>4.2.3</b> Expandiendo la memoria con la libreria bigmemory</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#parallel-r"><i class="fa fa-check"></i><b>4.3</b> Parallel R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#libreria-parallel"><i class="fa fa-check"></i><b>4.3.1</b> Libreria parallel</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-y-spark.html"><a href="r-y-spark.html"><i class="fa fa-check"></i><b>5</b> R y Spark</a><ul>
<li class="chapter" data-level="5.1" data-path="r-y-spark.html"><a href="r-y-spark.html#introducción"><i class="fa fa-check"></i><b>5.1</b> Introducción</a><ul>
<li class="chapter" data-level="5.1.1" data-path="r-y-spark.html"><a href="r-y-spark.html#hadoop"><i class="fa fa-check"></i><b>5.1.1</b> Hadoop</a></li>
<li class="chapter" data-level="5.1.2" data-path="r-y-spark.html"><a href="r-y-spark.html#spark"><i class="fa fa-check"></i><b>5.1.2</b> Spark</a></li>
<li class="chapter" data-level="5.1.3" data-path="r-y-spark.html"><a href="r-y-spark.html#sparklyr"><i class="fa fa-check"></i><b>5.1.3</b> Sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="r-y-spark.html"><a href="r-y-spark.html#arrancando-spark"><i class="fa fa-check"></i><b>5.2</b> Arrancando Spark</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-y-spark.html"><a href="r-y-spark.html#prerequisitos"><i class="fa fa-check"></i><b>5.2.1</b> Prerequisitos</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-y-spark.html"><a href="r-y-spark.html#instalación-2"><i class="fa fa-check"></i><b>5.2.2</b> Instalación</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-y-spark.html"><a href="r-y-spark.html#creando-una-sesión-en-spark"><i class="fa fa-check"></i><b>5.2.3</b> Creando una sesión en Spark</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-y-spark.html"><a href="r-y-spark.html#interface-web"><i class="fa fa-check"></i><b>5.2.4</b> Interface web</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-y-spark.html"><a href="r-y-spark.html#análisis-con-spark"><i class="fa fa-check"></i><b>5.3</b> Análisis con Spark</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-y-spark.html"><a href="r-y-spark.html#importando-los-datos"><i class="fa fa-check"></i><b>5.3.1</b> Importando los datos</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-y-spark.html"><a href="r-y-spark.html#librería-dplyr-gramática-de-manipulación-de-datos"><i class="fa fa-check"></i><b>5.3.2</b> Librería DPLYR (Gramática de manipulación de datos)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scraping-web" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Scraping Web</h1>
<p>La definición del scraping web que se toma en este documento proviene de <span class="citation">(<span class="citeproc-not-found" data-reference-id="Mitchell2015"><strong>???</strong></span>)</span> que expresa:</p>
<p><strong>
El Web Scraping es la recolección automática de información de los sitios web. (obviamente no a través de un humano usando un navegador web).
</strong></p>
<p>Un tema dentro del scraping web son las denominadas APIs (Application Programming Interface), estas son entradas a las páginas web diseñadas por los administradores de la página web, por lo mismo no siempre contienen toda la información que se desea. Aunque las API no son tan ubicuas como deberían, puede encontrar API para muchos tipos de información. Interesado en la música? Hay algunas API diferentes que pueden darle canciones, artistas, álbumes e incluso información sobre estilos musicales y artistas relacionados. ¿Necesitas datos deportivos? ESPN proporciona API para información de atletas, puntajes de juegos y más. Google tiene docenas de API en su sección de Desarrolladores para traducciones de idiomas, análisis, geolocalización y más.</p>
<div id="pasos-para-la-recopilación-de-información" class="section level2">
<h2><span class="header-section-number">2.1</span> Pasos para la recopilación de información</h2>
<p>Siguiendo a <span class="citation">(<span class="citeproc-not-found" data-reference-id="Iacus2015"><strong>???</strong></span>)</span> que establece cinco pasos al momento de decidir recopilar información mediante el scraping web, estos pasos son:</p>
<ol style="list-style-type: decimal">
<li>Asegúrese de saber exactamente qué tipo de información necesita. Esto puede ser específico (<code>el producto interno bruto de todos los países de la OCDE durante los últimos 10 años'') o vago (</code>opinión de la gente sobre el teléfono de la empresa X’‘, ``colaboración entre miembros del Senado de los Estados Unidos’’).</li>
<li>Averigüe si hay fuentes de datos en la Web que puedan proporcionar información directa o indirecta sobre su problema. Si está buscando hechos concretos, esto probablemente sea fácil. Si está interesado en conceptos bastante vagos, esto es más difícil.</li>
</ol>
<p><strong>La página de inicio de la embajada de un país podría ser una fuente valiosa para la acción de política exterior que a menudo se oculta detrás del telón de la diplomacia. Los tweets pueden contener tendencias de opinión sobre casi todo, las plataformas comerciales pueden informar sobre la satisfacción de los clientes con los productos, las tarifas de alquiler en los sitios web de propiedades pueden contener información sobre el atractivo actual de los barrios de la ciudad …
</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Desarrolle una teoría del proceso de generación de datos cuando busque fuentes potenciales. ¿Cuándo se generaron los datos, cuándo se cargaron en la Web y quién lo hizo? ¿Existen áreas potenciales que no están cubiertas, son consistentes o precisas, y puede identificarlas y corregirlas?</li>
<li>Equilibrar las ventajas y desventajas de las posibles fuentes de datos. Los aspectos relevantes pueden ser la disponibilidad (¡y la legalidad!), los costos de recolección, la compatibilidad de nuevas fuentes con la investigación existente, pero también factores muy subjetivos como la aceptación de la fuente de datos por parte de otros. También piense en posibles formas de validar la calidad de sus datos. ¿Existen otras fuentes independientes que brinden información similar para que sean posibles verificaciones cruzadas aleatorias? En caso de datos secundarios, ¿puede identificar la fuente original y verificar los errores de transferencia?</li>
<li>¡Toma una decisión! Elija la fuente de datos que le parezca más adecuada, documente los motivos de la decisión y comience con los preparativos para la recopilación. Si es factible, recopile datos de varias fuentes para validar las fuentes de datos. Muchos problemas y beneficios de varias estrategias de recopilación de datos salen a la luz solo después de la recopilación real.</li>
</ol>
</div>
<div id="tecnologías-de-diseminación-extracción-y-almacenamiento-web" class="section level2">
<h2><span class="header-section-number">2.2</span> Tecnologías de diseminación, extracción y almacenamiento Web</h2>
<p>Una vez elegida la fuente de datos (página web) y al menos con la intuición de lo que se quiere obtener, el siguiente paso es decidir el mecanismos para el scraping (raspado), esto esta relacionado al tipo de pagina web, ver si esta ofrece una entrada API y conocer sus limitaciones puede ser un punto de partida. Esto se denomina <em>Technologies for disseminating, extracting, and storing web data Collecting</em>, en el marco del uso de R la figura  muestra las interacciones entre ellas.</p>
<p><img src="images/scrap1.png" />
<em>Tecnologías para difundir, extraer y almacenar datos web (considerando el entorno de R)</em></p>
</div>
<div id="librerías-en-r" class="section level2">
<h2><span class="header-section-number">2.3</span> Librerías en R</h2>
<p>El siguiente cuadro presenta las librerías en R relacionadas al web Scraping, incluyendo los servicios API, que a la fecha del proyecto alcanza a 761 librerías, esto representa el <span class="math inline">\(5.02\)</span>% de las librerías en en R.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="scraping-web.html#cb178-1"></a><span class="kw">library</span>(knitr)</span>
<span id="cb178-2"><a href="scraping-web.html#cb178-2"></a><span class="kw">library</span>(packagefinder)</span>
<span id="cb178-3"><a href="scraping-web.html#cb178-3"></a><span class="kw">library</span>(xtable)</span>
<span id="cb178-4"><a href="scraping-web.html#cb178-4"></a><span class="kw">findPackage</span>(<span class="kw">c</span>(<span class="st">&quot;API&quot;</span>,<span class="st">&quot;scrape&quot;</span>),<span class="dt">limit.results=</span><span class="op">-</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="librería-rvest" class="section level2">
<h2><span class="header-section-number">2.4</span> Librería rvest</h2>
<p>Rvest es parte del universo tidyverse y esta orientada al scrape de páginas web. La instalación es usual:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="scraping-web.html#cb179-1"></a><span class="co">#desde CRAN</span></span>
<span id="cb179-2"><a href="scraping-web.html#cb179-2"></a><span class="kw">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</span>
<span id="cb179-3"><a href="scraping-web.html#cb179-3"></a><span class="co">#la versión en desarrollo desde github</span></span>
<span id="cb179-4"><a href="scraping-web.html#cb179-4"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;tidyverse/rvest&quot;</span>)</span></code></pre></div>
<p>Existe la herramienta selectorgadget disponible en <a href="http://selectorgadget.com/" class="uri">http://selectorgadget.com/</a>, esta permite interactuar con las páginas web para seleccionar partes del documento usando un CSS selector. Las funciones mas importantes dentro de rvest son:</p>
<ul>
<li>read_html para cargar la estructura de la página</li>
<li>html_nodes para extraer información de la página según el CSS selector</li>
<li>html_text para extraer texto de un html_nodes</li>
<li>html_table para extraer tablas y ponerlas en data frame</li>
</ul>
</div>
<div id="ejemplo-covid-bolivia-segura-worldometers" class="section level2">
<h2><span class="header-section-number">2.5</span> Ejemplo: COVID, Bolivia segura, Worldometers</h2>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="scraping-web.html#cb180-1"></a><span class="kw">library</span>(rvest)</span></code></pre></div>
<pre><code>## Loading required package: xml2</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="scraping-web.html#cb182-1"></a>bs1&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.boliviasegura.gob.bo/index.php&quot;</span>)</span>
<span id="cb182-2"><a href="scraping-web.html#cb182-2"></a>bs2&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.boliviasegura.gob.bo/datos.php&quot;</span>)</span>
<span id="cb182-3"><a href="scraping-web.html#cb182-3"></a></span>
<span id="cb182-4"><a href="scraping-web.html#cb182-4"></a>aux&lt;-<span class="kw">html_nodes</span>(bs1,<span class="st">&quot;.casos&quot;</span>)</span>
<span id="cb182-5"><a href="scraping-web.html#cb182-5"></a>casos&lt;-<span class="kw">html_text</span>(aux)</span>
<span id="cb182-6"><a href="scraping-web.html#cb182-6"></a></span>
<span id="cb182-7"><a href="scraping-web.html#cb182-7"></a>aux&lt;-<span class="kw">html_nodes</span>(bs1,<span class="st">&quot;.recuperados&quot;</span>)</span>
<span id="cb182-8"><a href="scraping-web.html#cb182-8"></a>recup&lt;-<span class="kw">html_text</span>(aux)</span>
<span id="cb182-9"><a href="scraping-web.html#cb182-9"></a></span>
<span id="cb182-10"><a href="scraping-web.html#cb182-10"></a>aux&lt;-<span class="kw">html_nodes</span>(bs1,<span class="st">&quot;.decesos&quot;</span>)</span>
<span id="cb182-11"><a href="scraping-web.html#cb182-11"></a>muerte&lt;-<span class="kw">html_text</span>(aux)</span>
<span id="cb182-12"><a href="scraping-web.html#cb182-12"></a></span>
<span id="cb182-13"><a href="scraping-web.html#cb182-13"></a><span class="kw">html_text</span>(<span class="kw">html_nodes</span>(bs1,<span class="st">&quot;.card-text&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;Ministerio de Salud reporta 86 contagios nuevos de COVID-19 y el total sube a 142.561&quot;                                                                                                            
##  [2] &quot;Ministerio de Salud reporta 126 contagios nuevos de coronavirus en todo el país&quot;                                                                                                                  
##  [3] &quot;Sube a 112.055 el número de pacientes recuperados de coronavirus en una jornada con 34 nuevos contagios&quot;                                                                                          
##  [4] &quot;BENEFICIARIOS&quot;                                                                                                                                                                                    
##  [5] &quot;BENEFICIARIOS&quot;                                                                                                                                                                                    
##  [6] &quot;BENEFICIARIOS&quot;                                                                                                                                                                                    
##  [7] &quot;29 de Octubre de 2020&quot;                                                                                                                                                                            
##  [8] &quot;Medidas de carácter excepcional y temporal para fomentar la cultura de donación voluntaria, altruista e informada de plasma hiperinmune de personas que hayan superado el Coronavirus (COVID-19).&quot;
##  [9] &quot;28 de Octubre de 2020&quot;                                                                                                                                                                            
## [10] &quot;Se amplía la vigencia de las medidas de la fase de posconfinamiento con vigilancia comunitaria activa de casos de Coronavirus (COVID-19), hasta el 30 de noviembre.&quot;                              
## [11] &quot;29 de Septiembre de 2020&quot;                                                                                                                                                                         
## [12] &quot;Se Amplía la vigencia de las medidas de la fase posconfinamiento hasta el 31 de octubre y se extiende el horario de circulación de vehículos y personas de 5 de la mañana a media noche.&quot;</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="scraping-web.html#cb184-1"></a>tbs&lt;-<span class="kw">html_table</span>(bs2,<span class="dt">fill =</span> T)</span>
<span id="cb184-2"><a href="scraping-web.html#cb184-2"></a><span class="kw">View</span>(tbs)</span>
<span id="cb184-3"><a href="scraping-web.html#cb184-3"></a></span>
<span id="cb184-4"><a href="scraping-web.html#cb184-4"></a>mun&lt;-tbs[[<span class="dv">12</span>]]</span>
<span id="cb184-5"><a href="scraping-web.html#cb184-5"></a><span class="kw">table</span>(mun<span class="op">$</span><span class="st">`</span><span class="dt">Nivel Anterior</span><span class="st">`</span>,mun<span class="op">$</span><span class="st">`</span><span class="dt">Nivel Actual</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>##           
##            Alto Medio Moderado
##   Alto       32    10        1
##   Medio       1   210       21
##   Moderado    0     1       63</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="scraping-web.html#cb186-1"></a>t1&lt;-tbs[[<span class="dv">2</span>]]</span>
<span id="cb186-2"><a href="scraping-web.html#cb186-2"></a>global&lt;-<span class="kw">c</span>(casos, recup,muerte)</span>
<span id="cb186-3"><a href="scraping-web.html#cb186-3"></a></span>
<span id="cb186-4"><a href="scraping-web.html#cb186-4"></a><span class="kw">str</span>(t1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    9 obs. of  5 variables:
##  $ Departamento: chr  &quot;Beni&quot; &quot;Chuquisaca&quot; &quot;Cochabamba&quot; &quot;La Paz&quot; ...
##  $ Hoy         : int  0 8 6 21 2 0 4 31 31
##  $ Acumulado   : chr  &quot;7,314&quot; &quot;7,892&quot; &quot;14,033&quot; &quot;35,109&quot; ...
##  $ Decesos     : chr  &quot;374&quot; &quot;511&quot; &quot;1,301&quot; &quot;1,137&quot; ...
##  $ Recuperados : chr  &quot;5,173&quot; &quot;6,734&quot; &quot;12,222&quot; &quot;30,192&quot; ...</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="scraping-web.html#cb188-1"></a><span class="co">#herramientas para trabajar con texto</span></span>
<span id="cb188-2"><a href="scraping-web.html#cb188-2"></a></span>
<span id="cb188-3"><a href="scraping-web.html#cb188-3"></a>t1<span class="op">$</span>Acumulado</span></code></pre></div>
<pre><code>## [1] &quot;7,314&quot;  &quot;7,892&quot;  &quot;14,033&quot; &quot;35,109&quot; &quot;6,063&quot;  &quot;2,384&quot;  &quot;9,178&quot; 
## [8] &quot;44,275&quot; &quot;16,416&quot;</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="scraping-web.html#cb190-1"></a><span class="kw">nchar</span>(t1<span class="op">$</span>Acumulado)</span></code></pre></div>
<pre><code>## [1] 5 5 6 6 5 5 5 6 6</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="scraping-web.html#cb192-1"></a><span class="kw">substr</span>(t1<span class="op">$</span>Acumulado,<span class="dv">1</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;7,3&quot; &quot;7,8&quot; &quot;14,&quot; &quot;35,&quot; &quot;6,0&quot; &quot;2,3&quot; &quot;9,1&quot; &quot;44,&quot; &quot;16,&quot;</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="scraping-web.html#cb194-1"></a><span class="kw">grep</span>(<span class="st">&quot;53&quot;</span>,t1<span class="op">$</span>Acumulado)</span></code></pre></div>
<pre><code>## integer(0)</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="scraping-web.html#cb196-1"></a><span class="kw">gsub</span>(<span class="st">&quot;53&quot;</span>,<span class="st">&quot;XX&quot;</span>,t1<span class="op">$</span>Acumulado)</span></code></pre></div>
<pre><code>## [1] &quot;7,314&quot;  &quot;7,892&quot;  &quot;14,033&quot; &quot;35,109&quot; &quot;6,063&quot;  &quot;2,384&quot;  &quot;9,178&quot; 
## [8] &quot;44,275&quot; &quot;16,416&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="scraping-web.html#cb198-1"></a>t1<span class="op">$</span>Acumulado&lt;-<span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>,t1<span class="op">$</span>Acumulado))</span>
<span id="cb198-2"><a href="scraping-web.html#cb198-2"></a>t1<span class="op">$</span>Decesos&lt;-<span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>,t1<span class="op">$</span>Decesos))</span>
<span id="cb198-3"><a href="scraping-web.html#cb198-3"></a>t1<span class="op">$</span>Recuperados&lt;-<span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>,t1<span class="op">$</span>Recuperados))</span>
<span id="cb198-4"><a href="scraping-web.html#cb198-4"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb198-5"><a href="scraping-web.html#cb198-5"></a></span>
<span id="cb198-6"><a href="scraping-web.html#cb198-6"></a><span class="kw">ggplot</span>(t1,<span class="kw">aes</span>(Acumulado,Decesos))<span class="op">+</span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="bigdata_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="scraping-web.html#cb199-1"></a><span class="co">### worldometers</span></span>
<span id="cb199-2"><a href="scraping-web.html#cb199-2"></a>wm&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.worldometers.info/coronavirus/&quot;</span>)</span>
<span id="cb199-3"><a href="scraping-web.html#cb199-3"></a>tabla&lt;-<span class="kw">html_table</span>(wm)</span>
<span id="cb199-4"><a href="scraping-web.html#cb199-4"></a></span>
<span id="cb199-5"><a href="scraping-web.html#cb199-5"></a>t2&lt;-tabla[[<span class="dv">1</span>]]</span>
<span id="cb199-6"><a href="scraping-web.html#cb199-6"></a><span class="kw">str</span>(t2)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    235 obs. of  19 variables:
##  $ #                 : int  NA NA NA NA NA NA NA NA 1 2 ...
##  $ Country,Other     : chr  &quot;North America&quot; &quot;Asia&quot; &quot;South America&quot; &quot;Europe&quot; ...
##  $ TotalCases        : chr  &quot;12,515,058&quot; &quot;14,606,205&quot; &quot;10,075,827&quot; &quot;12,641,448&quot; ...
##  $ NewCases          : chr  &quot;+149,160&quot; &quot;+95,435&quot; &quot;+49,199&quot; &quot;+234,920&quot; ...
##  $ TotalDeaths       : chr  &quot;367,228&quot; &quot;258,412&quot; &quot;304,153&quot; &quot;301,708&quot; ...
##  $ NewDeaths         : chr  &quot;+1,679&quot; &quot;+1,543&quot; &quot;+757&quot; &quot;+4,863&quot; ...
##  $ TotalRecovered    : chr  &quot;8,068,688&quot; &quot;13,044,784&quot; &quot;8,986,952&quot; &quot;4,638,343&quot; ...
##  $ NewRecovered      : chr  &quot;+59,083&quot; &quot;+85,972&quot; &quot;+25,191&quot; &quot;+142,351&quot; ...
##  $ ActiveCases       : chr  &quot;4,079,142&quot; &quot;1,303,009&quot; &quot;784,722&quot; &quot;7,701,397&quot; ...
##  $ Serious,Critical  : chr  &quot;22,904&quot; &quot;23,634&quot; &quot;17,580&quot; &quot;28,293&quot; ...
##  $ Tot Cases/1M pop  : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Deaths/1M pop     : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ TotalTests        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Tests/1M pop      : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Population        : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ Continent         : chr  &quot;North America&quot; &quot;Asia&quot; &quot;South America&quot; &quot;Europe&quot; ...
##  $ 1 Caseevery X ppl : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ 1 Deathevery X ppl: chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##  $ 1 Testevery X ppl : chr  &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="scraping-web.html#cb201-1"></a>aux&lt;-<span class="kw">is.na</span>(t2<span class="op">$</span><span class="st">`</span><span class="dt">#</span><span class="st">`</span>)</span>
<span id="cb201-2"><a href="scraping-web.html#cb201-2"></a></span>
<span id="cb201-3"><a href="scraping-web.html#cb201-3"></a>t2&lt;-t2[<span class="op">!</span>aux,]</span>
<span id="cb201-4"><a href="scraping-web.html#cb201-4"></a></span>
<span id="cb201-5"><a href="scraping-web.html#cb201-5"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">c</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span><span class="op">:</span><span class="dv">19</span>)){</span>
<span id="cb201-6"><a href="scraping-web.html#cb201-6"></a>  <span class="kw">print</span>(i)</span>
<span id="cb201-7"><a href="scraping-web.html#cb201-7"></a>  t2[,i]&lt;-<span class="kw">gsub</span>(<span class="st">&quot;+&quot;</span>,<span class="st">&quot;&quot;</span>,t2[,i])</span>
<span id="cb201-8"><a href="scraping-web.html#cb201-8"></a>  t2[,i]&lt;-<span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>,t2[,i]))</span>
<span id="cb201-9"><a href="scraping-web.html#cb201-9"></a>}</span></code></pre></div>
<pre><code>## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7</code></pre>
<pre><code>## Warning: NAs introducidos por coerción</code></pre>
<pre><code>## [1] 8</code></pre>
<pre><code>## Warning: NAs introducidos por coerción</code></pre>
<pre><code>## [1] 9</code></pre>
<pre><code>## Warning: NAs introducidos por coerción</code></pre>
<pre><code>## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 17
## [1] 18
## [1] 19</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="scraping-web.html#cb209-1"></a>t2<span class="op">$</span><span class="st">`</span><span class="dt">Tests/1M pop</span><span class="st">`</span></span></code></pre></div>
<pre><code>##   [1]  484147   86371  102766  279353  449447  414750   72549  541193
##   [9]  107692  293569   19444  141851   84098  278886   62837  141135
##  [17]  242247   74944  456301   83605   17691  245248   14945  206174
##  [25]   46441  182120  246014   21318  531725  183376  265302   95268
##  [33]  259806   53342  370108   32500  271766  240244 1445549   28999
##  [41]  167666  365234  228112   57802  204664  126966   73108   65845
##  [49]  193326   25588    1310   22942  149809  287927   24334   13231
##  [57]  197007   77706 1076533   99007  117664  167215   32660  139769
##  [65]   51237   40957   54463  143251  165356  352114  107520   13913
##  [73]    3308   67473  244808      NA   15056  190070  109209  693184
##  [81] 1024135   17610  197490    3230   71039  132448   75811  357731
##  [89]   53114  413340  342270   48461  160363 1855324    5564    7524
##  [97]  298642    3292   16590   12709   28290   12419      NA    6484
## [105]   53128    5154    3678  277128      NA      NA   93624  257108
## [113]   34196  182523    2888  114865   11260  269937  185276   19787
## [121]  139584  831604   81841   96774   54431  213453      NA  429033
## [129]   47400    3461   24443      NA   87863 1892485  499266      NA
## [137]   43998   33946 1079305   47405    6731   66048  161084  400174
## [145]   28415      NA   62882   13997    4027    9048  100810    1071
## [153]   22008      NA   15553   13850      NA     554   10973  228492
## [161]      NA    5948    1620   12764   89566  351886  950740   30601
## [169]  163481  239861 2184374      NA  136306    4733  163822    3271
## [177]    4380      NA 1320514      NA 3243000      NA  218533   28689
## [185]  236696  198401   11874  736015  138162 1494887   52755  127437
## [193]  162764   69721   39757  385113   68886  171364   66134    6495
## [201]   14923   55469    8489   56808      NA    9501   63167  209045
## [209]  453665     166  115562  971843      NA      NA  120922      NA
## [217]      NA  102902  111163</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="scraping-web.html#cb211-1"></a><span class="kw">ggplot</span>(t2, <span class="kw">aes</span>(<span class="st">`</span><span class="dt">Tot Cases/1M pop</span><span class="st">`</span>,<span class="st">`</span><span class="dt">Tests/1M pop</span><span class="st">`</span>,))<span class="op">+</span><span class="kw">geom_point</span>()<span class="op">+</span><span class="kw">facet_wrap</span>(<span class="op">~</span>Continent)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values (geom_point).</code></pre>
<p><img src="bigdata_files/figure-html/unnamed-chunk-35-2.png" width="672" /></p>
</div>
<div id="ejemplo-ultracasas" class="section level2">
<h2><span class="header-section-number">2.6</span> Ejemplo: Ultracasas</h2>
<ul>
<li>Motivación: Explorar el mercado de casas en Bolivia</li>
</ul>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="scraping-web.html#cb213-1"></a>ultra&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ultracasas.com/buscar/casa-en-venta--en--la-paz---la-paz?page=1&quot;</span>)</span>
<span id="cb213-2"><a href="scraping-web.html#cb213-2"></a><span class="co">#titulo</span></span>
<span id="cb213-3"><a href="scraping-web.html#cb213-3"></a>aux1&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.line-height-30px&quot;</span>))[<span class="op">-</span><span class="dv">1</span>] <span class="co">#zona</span></span>
<span id="cb213-4"><a href="scraping-web.html#cb213-4"></a>aux2&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.text-ellipsis&quot;</span>))[<span class="op">-</span><span class="dv">1</span>][<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">24</span>,<span class="dv">2</span>)]</span>
<span id="cb213-5"><a href="scraping-web.html#cb213-5"></a><span class="co">#precio</span></span>
<span id="cb213-6"><a href="scraping-web.html#cb213-6"></a>aux3&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;h4&quot;</span>))[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">17</span>)]</span>
<span id="cb213-7"><a href="scraping-web.html#cb213-7"></a><span class="co">#metros, dormitorios, baños</span></span>
<span id="cb213-8"><a href="scraping-web.html#cb213-8"></a>aux&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.icon-default-color&quot;</span>))</span>
<span id="cb213-9"><a href="scraping-web.html#cb213-9"></a>aux4&lt;-aux[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#dormitorios</span></span>
<span id="cb213-10"><a href="scraping-web.html#cb213-10"></a>aux5&lt;-aux[<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#baños/duchas</span></span>
<span id="cb213-11"><a href="scraping-web.html#cb213-11"></a>aux6&lt;-aux[<span class="kw">seq</span>(<span class="dv">3</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#metros2</span></span>
<span id="cb213-12"><a href="scraping-web.html#cb213-12"></a><span class="co">#base inicial</span></span>
<span id="cb213-13"><a href="scraping-web.html#cb213-13"></a>bd0&lt;-<span class="kw">data.frame</span>(<span class="dt">titulo=</span>aux1,<span class="dt">zona=</span>aux2,<span class="dt">precio=</span>aux3,<span class="dt">bed=</span>aux4,<span class="dt">bath=</span>aux5,<span class="dt">m2=</span>aux6)</span>
<span id="cb213-14"><a href="scraping-web.html#cb213-14"></a></span>
<span id="cb213-15"><a href="scraping-web.html#cb213-15"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="op">:</span><span class="dv">26</span>){</span>
<span id="cb213-16"><a href="scraping-web.html#cb213-16"></a>  <span class="kw">print</span>(i)</span>
<span id="cb213-17"><a href="scraping-web.html#cb213-17"></a>  www&lt;-<span class="kw">paste0</span>(<span class="st">&quot;https://www.ultracasas.com/buscar/casa-en-venta--en--la-paz---la-paz?page=&quot;</span>,i)</span>
<span id="cb213-18"><a href="scraping-web.html#cb213-18"></a>  ultra&lt;-<span class="kw">read_html</span>(www)</span>
<span id="cb213-19"><a href="scraping-web.html#cb213-19"></a><span class="co">#titulo</span></span>
<span id="cb213-20"><a href="scraping-web.html#cb213-20"></a>aux1&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.line-height-30px&quot;</span>))[<span class="op">-</span><span class="dv">1</span>] <span class="co">#zona</span></span>
<span id="cb213-21"><a href="scraping-web.html#cb213-21"></a>aux2&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.text-ellipsis&quot;</span>))[<span class="op">-</span><span class="dv">1</span>][<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">24</span>,<span class="dv">2</span>)]</span>
<span id="cb213-22"><a href="scraping-web.html#cb213-22"></a><span class="co">#precio</span></span>
<span id="cb213-23"><a href="scraping-web.html#cb213-23"></a>aux3&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;h4&quot;</span>))[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">15</span><span class="op">:</span><span class="dv">17</span>)]</span>
<span id="cb213-24"><a href="scraping-web.html#cb213-24"></a><span class="co">#metros, dormitorios, baños</span></span>
<span id="cb213-25"><a href="scraping-web.html#cb213-25"></a>aux&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ultra,<span class="st">&quot;.icon-default-color&quot;</span>))</span>
<span id="cb213-26"><a href="scraping-web.html#cb213-26"></a>aux4&lt;-aux[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#dormitorios</span></span>
<span id="cb213-27"><a href="scraping-web.html#cb213-27"></a>aux5&lt;-aux[<span class="kw">seq</span>(<span class="dv">2</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#baños/duchas</span></span>
<span id="cb213-28"><a href="scraping-web.html#cb213-28"></a>aux6&lt;-aux[<span class="kw">seq</span>(<span class="dv">3</span>,<span class="dv">36</span>,<span class="dv">3</span>)]<span class="co">#metros2</span></span>
<span id="cb213-29"><a href="scraping-web.html#cb213-29"></a><span class="co">#base inicial</span></span>
<span id="cb213-30"><a href="scraping-web.html#cb213-30"></a>bd1&lt;-<span class="kw">data.frame</span>(<span class="dt">titulo=</span>aux1,<span class="dt">zona=</span>aux2,<span class="dt">precio=</span>aux3,<span class="dt">bed=</span>aux4,<span class="dt">bath=</span>aux5,<span class="dt">m2=</span>aux6)</span>
<span id="cb213-31"><a href="scraping-web.html#cb213-31"></a>bd0&lt;-<span class="kw">rbind</span>(bd0,bd1)</span>
<span id="cb213-32"><a href="scraping-web.html#cb213-32"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10
## [1] 11
## [1] 12
## [1] 13
## [1] 14
## [1] 15
## [1] 16
## [1] 17
## [1] 18
## [1] 19
## [1] 20
## [1] 21
## [1] 22
## [1] 23
## [1] 24
## [1] 25
## [1] 26</code></pre>
</div>
<div id="ejemplo-ketal" class="section level2">
<h2><span class="header-section-number">2.7</span> Ejemplo: Ketal</h2>
<p>Una de las potencialidades del scraping es poder rescatar información contenida en páginas web, según la estructura de esta, en esta sección se presenta un ejemplo del código y la recolección de información que puede realizarse. Para esto se eligió la página de supermercados Ketal que es abierta y publica los precios de sus distintos productos de forma categorizada por tipo de productos.</p>
<p>El estudio de esta pagina tiene el principal objetivo de mostrar el proceso de extracción, el uso potencial de la información esta relacionada a tener la variación de los precios y para futuros estudios se podría completar el ejercicio incluyendo la parte de la demanda mediante la encuesta de presupuestos familiares y poder así pronosticar la inflación dentro de este sector y para la población potencial que acude a supermercados.</p>
<p>El ejemplo presenta el proceso del scraping para 8 grupo de productos:</p>
<ul>
<li>Carne de aves</li>
<li>Carne de cerdo</li>
<li>Carne de res</li>
<li>Pescado</li>
<li>Leches</li>
<li>Aceites</li>
<li>Frutas y verduras</li>
<li>Dulces</li>
</ul>
<p>Se emplea la librería <em>rvest</em>, que es un paquete diseña para para facilitar la descarga y la manipulación de HTML y XML. También se utiliza la extensión Selector Gadget <a href="https://selectorgadget.com" class="uri">https://selectorgadget.com</a>, este permite la identificación de las estructuras de las páginas web.</p>
<p>El objetivo del raspado es obtener el nombre del producto, su código, y el precio. Utilizando el selector gadget se identifica que en <span class="math inline">\(.product-name\)</span> se guardan los nombres, en <span class="math inline">\(.price.product-price\)</span> el precio del producto y en <span class="math inline">\(data-id-product\)</span> el identificador del producto. En R el código es:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="scraping-web.html#cb215-1"></a><span class="co">#librerías para el raspado</span></span>
<span id="cb215-2"><a href="scraping-web.html#cb215-2"></a><span class="kw">library</span>(rvest)</span>
<span id="cb215-3"><a href="scraping-web.html#cb215-3"></a><span class="co">#Enlaces de los grupos de productos</span></span>
<span id="cb215-4"><a href="scraping-web.html#cb215-4"></a>ave &lt;-<span class="st"> </span><span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/209-aves&quot;</span>)</span>
<span id="cb215-5"><a href="scraping-web.html#cb215-5"></a>cerdo&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/208-cerdo&quot;</span>)</span>
<span id="cb215-6"><a href="scraping-web.html#cb215-6"></a>res&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/210-res&quot;</span>)</span>
<span id="cb215-7"><a href="scraping-web.html#cb215-7"></a>fish&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/17060162-pescados&quot;</span>)</span>
<span id="cb215-8"><a href="scraping-web.html#cb215-8"></a>leches&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/53-leches-liquidas&quot;</span>)</span>
<span id="cb215-9"><a href="scraping-web.html#cb215-9"></a>aceites&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.ketal.com.bo/272-aceites-y-vinagres&quot;</span>)</span>
<span id="cb215-10"><a href="scraping-web.html#cb215-10"></a>frutaver&lt;-<span class="kw">read_html</span>(</span>
<span id="cb215-11"><a href="scraping-web.html#cb215-11"></a>  <span class="st">&quot;https://www.ketal.com.bo/50-frutas-y-verduras?id_category=50&amp;n=150&quot;</span>)</span>
<span id="cb215-12"><a href="scraping-web.html#cb215-12"></a>dulce&lt;-<span class="kw">read_html</span>(</span>
<span id="cb215-13"><a href="scraping-web.html#cb215-13"></a>  <span class="st">&quot;https://www.ketal.com.bo/15-chocolates-y-golosinas?id_category=15&amp;n=150&quot;</span>)</span>
<span id="cb215-14"><a href="scraping-web.html#cb215-14"></a><span class="co">#definición de la base de datos que guarda la información</span></span>
<span id="cb215-15"><a href="scraping-web.html#cb215-15"></a>bd&lt;-<span class="ot">NULL</span></span>
<span id="cb215-16"><a href="scraping-web.html#cb215-16"></a><span class="co">#Algoritmo del raspado de los 8 productos</span></span>
<span id="cb215-17"><a href="scraping-web.html#cb215-17"></a>k&lt;-<span class="dv">1</span></span>
<span id="cb215-18"><a href="scraping-web.html#cb215-18"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">list</span>(ave,cerdo,res,fish,leches,aceites,frutaver,dulce)){</span>
<span id="cb215-19"><a href="scraping-web.html#cb215-19"></a>  <span class="kw">print</span>(k)</span>
<span id="cb215-20"><a href="scraping-web.html#cb215-20"></a>  name&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.product-name&quot;</span>),<span class="st">&quot;title&quot;</span>)[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb215-21"><a href="scraping-web.html#cb215-21"></a>  precio&lt;-<span class="kw">html_text</span>(</span>
<span id="cb215-22"><a href="scraping-web.html#cb215-22"></a>    <span class="kw">html_nodes</span>(i,<span class="st">&quot;.price.product-price&quot;</span>),<span class="dt">trim=</span>T)[<span class="kw">seq</span>(<span class="dv">1</span>,<span class="kw">length</span>(name)<span class="op">*</span><span class="dv">2</span>,<span class="dv">2</span>)]</span>
<span id="cb215-23"><a href="scraping-web.html#cb215-23"></a>  code&lt;-<span class="kw">html_attr</span>(<span class="kw">html_nodes</span>(i,<span class="st">&quot;.add_to_compare&quot;</span>),<span class="st">&quot;data-id-product&quot;</span>)</span>
<span id="cb215-24"><a href="scraping-web.html#cb215-24"></a>  bd&lt;-<span class="kw">rbind</span>(bd,<span class="kw">data.frame</span>(name,precio,code))</span>
<span id="cb215-25"><a href="scraping-web.html#cb215-25"></a>  k&lt;-k<span class="op">+</span><span class="dv">1</span></span>
<span id="cb215-26"><a href="scraping-web.html#cb215-26"></a>}</span>
<span id="cb215-27"><a href="scraping-web.html#cb215-27"></a><span class="co">#se identifica el día</span></span>
<span id="cb215-28"><a href="scraping-web.html#cb215-28"></a>day&lt;-<span class="kw">substr</span>(<span class="kw">Sys.time</span>(),<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb215-29"><a href="scraping-web.html#cb215-29"></a><span class="co">#se guarda la informacion en base al dia del raspado</span></span>
<span id="cb215-30"><a href="scraping-web.html#cb215-30"></a>bd<span class="op">$</span>day&lt;-day</span>
<span id="cb215-31"><a href="scraping-web.html#cb215-31"></a><span class="kw">save</span>(bd,<span class="dt">file =</span> <span class="kw">paste0</span>(day,<span class="st">&quot;.RData&quot;</span>))</span></code></pre></div>
</div>
<div id="ejemplo-ministerio-de-educación" class="section level2">
<h2><span class="header-section-number">2.8</span> Ejemplo: Ministerio de Educación</h2>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="scraping-web.html#cb216-1"></a><span class="kw">library</span>(rvest)</span>
<span id="cb216-2"><a href="scraping-web.html#cb216-2"></a><span class="kw">library</span>(foreign)</span>
<span id="cb216-3"><a href="scraping-web.html#cb216-3"></a><span class="kw">library</span>(xlsx)</span>
<span id="cb216-4"><a href="scraping-web.html#cb216-4"></a><span class="co">########################</span></span>
<span id="cb216-5"><a href="scraping-web.html#cb216-5"></a>bd&lt;-<span class="kw">read.dta</span>(<span class="st">&quot;mmUE.dta&quot;</span>)</span>
<span id="cb216-6"><a href="scraping-web.html#cb216-6"></a>rue&lt;-bd<span class="op">$</span>cod_ue_det</span>
<span id="cb216-7"><a href="scraping-web.html#cb216-7"></a>rue&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(rue,<span class="st">&quot;;&quot;</span>))</span>
<span id="cb216-8"><a href="scraping-web.html#cb216-8"></a>bd&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">78</span>))</span>
<span id="cb216-9"><a href="scraping-web.html#cb216-9"></a>k&lt;-<span class="dv">1</span></span>
<span id="cb216-10"><a href="scraping-web.html#cb216-10"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">325</span><span class="op">:</span><span class="kw">length</span>(rue)){</span>
<span id="cb216-11"><a href="scraping-web.html#cb216-11"></a> <span class="kw">print</span>(i)</span>
<span id="cb216-12"><a href="scraping-web.html#cb216-12"></a>urlmin&lt;-<span class="kw">paste0</span>(<span class="st">&quot;http://seie.minedu.gob.bo/reportes/mapas_unidades_educativas/ficha/ver/&quot;</span>,rue[i])</span>
<span id="cb216-13"><a href="scraping-web.html#cb216-13"></a> ue &lt;-<span class="st"> </span><span class="kw">read_html</span>(urlmin,<span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb216-14"><a href="scraping-web.html#cb216-14"></a></span>
<span id="cb216-15"><a href="scraping-web.html#cb216-15"></a>jj&lt;-<span class="kw">grepl</span>(<span class="st">&quot;Error was&quot;</span>,<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>)])</span>
<span id="cb216-16"><a href="scraping-web.html#cb216-16"></a><span class="cf">if</span>(jj<span class="op">==</span>T){</span>
<span id="cb216-17"><a href="scraping-web.html#cb216-17"></a>  <span class="cf">next</span>()</span>
<span id="cb216-18"><a href="scraping-web.html#cb216-18"></a>}</span>
<span id="cb216-19"><a href="scraping-web.html#cb216-19"></a><span class="co">#nombre id (2)</span></span>
<span id="cb216-20"><a href="scraping-web.html#cb216-20"></a>bd[k,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]&lt;-<span class="kw">unlist</span>(<span class="kw">strsplit</span>(<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],<span class="st">&quot;:&quot;</span>))[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</span>
<span id="cb216-21"><a href="scraping-web.html#cb216-21"></a><span class="co">#Informacion administrativa (12)</span></span>
<span id="cb216-22"><a href="scraping-web.html#cb216-22"></a>bd[k,<span class="dv">3</span><span class="op">:</span><span class="dv">14</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;dd&quot;</span>))</span>
<span id="cb216-23"><a href="scraping-web.html#cb216-23"></a><span class="co">#matricula #promovidos #reprobacion #abandono # (60)</span></span>
<span id="cb216-24"><a href="scraping-web.html#cb216-24"></a><span class="co">#matricula</span></span>
<span id="cb216-25"><a href="scraping-web.html#cb216-25"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>){</span>
<span id="cb216-26"><a href="scraping-web.html#cb216-26"></a>bd[k,(<span class="dv">15</span><span class="op">*</span>j)<span class="op">:</span>(<span class="dv">14</span><span class="op">+</span><span class="dv">15</span><span class="op">*</span>j)]&lt;-<span class="kw">as.integer</span>(<span class="kw">unlist</span>(<span class="kw">html_table</span>(ue)[j])[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)])</span>
<span id="cb216-27"><a href="scraping-web.html#cb216-27"></a>}</span>
<span id="cb216-28"><a href="scraping-web.html#cb216-28"></a><span class="co">#servicios (4)</span></span>
<span id="cb216-29"><a href="scraping-web.html#cb216-29"></a>bd[k,<span class="dv">75</span><span class="op">:</span><span class="dv">78</span>]&lt;-<span class="kw">html_text</span>(<span class="kw">html_nodes</span>(ue,<span class="st">&quot;strong&quot;</span>))[<span class="dv">18</span><span class="op">:</span><span class="dv">21</span>]</span>
<span id="cb216-30"><a href="scraping-web.html#cb216-30"></a>k&lt;-k<span class="op">+</span><span class="dv">1</span></span>
<span id="cb216-31"><a href="scraping-web.html#cb216-31"></a>}</span>
<span id="cb216-32"><a href="scraping-web.html#cb216-32"></a><span class="kw">write.xlsx</span>(bd,<span class="st">&quot;ue2017.xlsx&quot;</span>,<span class="dt">row.names =</span> F)</span></code></pre></div>
</div>
<div id="ejemplo-informacion-covid-19-en-bolivia" class="section level2">
<h2><span class="header-section-number">2.9</span> Ejemplo, informacion COVID-19 en Bolivia</h2>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="scraping-web.html#cb217-1"></a><span class="kw">library</span>(rvest)</span>
<span id="cb217-2"><a href="scraping-web.html#cb217-2"></a><span class="co">#paso 0: Estadísticas del covid-19 en Bolivia</span></span>
<span id="cb217-3"><a href="scraping-web.html#cb217-3"></a><span class="co">#paso 1: cargar la www de interés</span></span>
<span id="cb217-4"><a href="scraping-web.html#cb217-4"></a>bs&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.boliviasegura.gob.bo/&quot;</span>)</span>
<span id="cb217-5"><a href="scraping-web.html#cb217-5"></a>ww&lt;-<span class="kw">read_html</span>(<span class="st">&quot;https://www.worldometers.info/coronavirus/&quot;</span>)</span>
<span id="cb217-6"><a href="scraping-web.html#cb217-6"></a><span class="co">#paso 2: Raspar la información de interés</span></span>
<span id="cb217-7"><a href="scraping-web.html#cb217-7"></a>node0&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;h1&quot;</span>)</span>
<span id="cb217-8"><a href="scraping-web.html#cb217-8"></a>node1&lt;-<span class="kw">html_text</span>(node0)</span>
<span id="cb217-9"><a href="scraping-web.html#cb217-9"></a>node2&lt;-<span class="kw">as.numeric</span>(node1) </span>
<span id="cb217-10"><a href="scraping-web.html#cb217-10"></a><span class="kw">barplot</span>(node2,<span class="dt">legend.text =</span> <span class="kw">c</span>(<span class="st">&quot;Confirmados&quot;</span>,<span class="st">&quot;Recuperados&quot;</span>,<span class="st">&quot;Muertes&quot;</span>))</span>
<span id="cb217-11"><a href="scraping-web.html#cb217-11"></a></span>
<span id="cb217-12"><a href="scraping-web.html#cb217-12"></a>aux&lt;-<span class="kw">html_nodes</span>(bs,<span class="st">&quot;.mapanuevos&quot;</span>)</span>
<span id="cb217-13"><a href="scraping-web.html#cb217-13"></a><span class="co">#paso 3: trabajando con tablas</span></span>
<span id="cb217-14"><a href="scraping-web.html#cb217-14"></a>tabla&lt;-<span class="kw">html_table</span>(bs,<span class="dt">fill =</span> T)</span>
<span id="cb217-15"><a href="scraping-web.html#cb217-15"></a>tabla[[<span class="dv">2</span>]]</span>
<span id="cb217-16"><a href="scraping-web.html#cb217-16"></a><span class="co">#paso 4: limpieza</span></span>
<span id="cb217-17"><a href="scraping-web.html#cb217-17"></a><span class="co">#paso 5: Análisis</span></span></code></pre></div>
</div>
<div id="apis" class="section level2">
<h2><span class="header-section-number">2.10</span> APIs</h2>
<p>Conocida también por la sigla API,“application programming interface”, es un conjunto de sub rutinas, funciones y procedimientos (o métodos, en la programación orientada a objetos) que ofrece cierta biblioteca para ser utilizado por otro software. Ofrece una entrada a los datos que distribuye el API.</p>
<div id="api-banco-mundial" class="section level3">
<h3><span class="header-section-number">2.10.1</span> API Banco Mundial</h3>
<p>La API ofrece acceso a las estadísticas que genera el Banco Mundial, existe un set extenso de estadísticas de la mayoría de los países. La API ofrece mas de 16000 indicadores de series de tiempo, muchos de los indicadores tienen una cobertura de 50 años. La API incluye el acceso a 45 bases de datos, incluyendo:</p>
<ul>
<li>World Development Indicators</li>
<li>International Debt Statistcs</li>
<li>Doing Business</li>
<li>Human Capital Index</li>
<li>Subnational Poverty</li>
<li>Y otros, <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-about-the-indicators-api-documentation">ver</a></li>
</ul>
<p>En R se puede acceder mediante la librería wbstats.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="scraping-web.html#cb218-1"></a><span class="co">#install.packages(&quot;wbstats&quot;)</span></span>
<span id="cb218-2"><a href="scraping-web.html#cb218-2"></a></span>
<span id="cb218-3"><a href="scraping-web.html#cb218-3"></a><span class="co">#paso 1, instalar el rtools: https://cran.r-project.org/bin/windows/Rtools/</span></span>
<span id="cb218-4"><a href="scraping-web.html#cb218-4"></a><span class="co">#paso 2, instalar devtools</span></span>
<span id="cb218-5"><a href="scraping-web.html#cb218-5"></a><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb218-6"><a href="scraping-web.html#cb218-6"></a><span class="co">#paso 3, cargar el devtools</span></span>
<span id="cb218-7"><a href="scraping-web.html#cb218-7"></a><span class="kw">library</span>(devtools)</span>
<span id="cb218-8"><a href="scraping-web.html#cb218-8"></a><span class="co">#paso4, instalar wbstats</span></span>
<span id="cb218-9"><a href="scraping-web.html#cb218-9"></a><span class="kw">install_github</span>(<span class="st">&quot;nset-ornl/wbstats&quot;</span>)</span>
<span id="cb218-10"><a href="scraping-web.html#cb218-10"></a></span>
<span id="cb218-11"><a href="scraping-web.html#cb218-11"></a><span class="kw">library</span>(wbstats)</span>
<span id="cb218-12"><a href="scraping-web.html#cb218-12"></a></span>
<span id="cb218-13"><a href="scraping-web.html#cb218-13"></a><span class="co">#acceso a todos los indicadores disponibles</span></span>
<span id="cb218-14"><a href="scraping-web.html#cb218-14"></a>wbindex&lt;-<span class="kw">wbindicators</span>(<span class="st">&quot;es&quot;</span>)</span>
<span id="cb218-15"><a href="scraping-web.html#cb218-15"></a><span class="co">#acceso al catalogo de datos</span></span>
<span id="cb218-16"><a href="scraping-web.html#cb218-16"></a>wbcat&lt;-<span class="kw">wbdatacatalog</span>()</span>
<span id="cb218-17"><a href="scraping-web.html#cb218-17"></a><span class="co">#búsqueda de indicador</span></span>
<span id="cb218-18"><a href="scraping-web.html#cb218-18"></a>index_edu&lt;-<span class="kw">wbsearch</span>(<span class="dt">pattern =</span> <span class="st">&quot;education&quot;</span>)</span>
<span id="cb218-19"><a href="scraping-web.html#cb218-19"></a>index_sal&lt;-<span class="kw">wbsearch</span>(<span class="dt">pattern =</span> <span class="st">&quot;health&quot;</span>)</span>
<span id="cb218-20"><a href="scraping-web.html#cb218-20"></a><span class="co"># ver los países y sus códigos </span></span>
<span id="cb218-21"><a href="scraping-web.html#cb218-21"></a>wbpais&lt;-<span class="kw">wbcountries</span>()             </span>
<span id="cb218-22"><a href="scraping-web.html#cb218-22"></a><span class="co">#Comando para extraer los indicadores</span></span>
<span id="cb218-23"><a href="scraping-web.html#cb218-23"></a><span class="kw">wb</span>(<span class="dt">country =</span> <span class="st">&quot;BOL&quot;</span>,<span class="dt">indicator =</span> <span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>, <span class="dt">startdate =</span> <span class="dv">2000</span>, <span class="dt">enddate =</span> <span class="dv">2016</span>)</span></code></pre></div>
</div>
<div id="api-google-trends" class="section level3">
<h3><span class="header-section-number">2.10.2</span> API Google trends</h3>
<p>La libraría gtrendsR permite acceder a la API de <a href="https://trends.google.es/trends/?geo=ES">google trends</a>, esta permite acceder a las tendencias de búsqueda que se realizan mediante el motor de búsqueda de Google.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="scraping-web.html#cb219-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;gtrendsR&quot;</span>)</span>
<span id="cb219-2"><a href="scraping-web.html#cb219-2"></a><span class="kw">library</span>(gtrendsR)</span>
<span id="cb219-3"><a href="scraping-web.html#cb219-3"></a>aux&lt;-countries</span>
<span id="cb219-4"><a href="scraping-web.html#cb219-4"></a>res &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="st">&quot;Coronavirus&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;BO&quot;</span>))</span>
<span id="cb219-5"><a href="scraping-web.html#cb219-5"></a></span>
<span id="cb219-6"><a href="scraping-web.html#cb219-6"></a>bd_cov&lt;-res<span class="op">$</span>interest_over_time</span>
<span id="cb219-7"><a href="scraping-web.html#cb219-7"></a></span>
<span id="cb219-8"><a href="scraping-web.html#cb219-8"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb219-9"><a href="scraping-web.html#cb219-9"></a></span>
<span id="cb219-10"><a href="scraping-web.html#cb219-10"></a>bd_cov<span class="op">$</span>hits&lt;-<span class="kw">as.numeric</span>(<span class="kw">gsub</span>(<span class="st">&quot;&lt;&quot;</span>,<span class="st">&quot;&quot;</span>,bd_cov<span class="op">$</span>hits))</span>
<span id="cb219-11"><a href="scraping-web.html#cb219-11"></a></span>
<span id="cb219-12"><a href="scraping-web.html#cb219-12"></a><span class="kw">ggplot</span>(bd_cov,<span class="kw">aes</span>(date,hits))<span class="op">+</span><span class="kw">geom_line</span>()</span>
<span id="cb219-13"><a href="scraping-web.html#cb219-13"></a><span class="kw">plot</span>(res)</span>
<span id="cb219-14"><a href="scraping-web.html#cb219-14"></a></span>
<span id="cb219-15"><a href="scraping-web.html#cb219-15"></a>eleccion2020&lt;-<span class="kw">gtrends</span>(<span class="kw">c</span>(<span class="st">&quot;Luis Arce&quot;</span>,<span class="st">&quot;Carlos Mesa&quot;</span>,<span class="st">&quot;Fernando Camacho&quot;</span>), <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;BO&quot;</span>),<span class="dt">time=</span><span class="st">&quot;today 3-m&quot;</span>)</span>
<span id="cb219-16"><a href="scraping-web.html#cb219-16"></a></span>
<span id="cb219-17"><a href="scraping-web.html#cb219-17"></a><span class="kw">plot</span>(eleccion2020)</span>
<span id="cb219-18"><a href="scraping-web.html#cb219-18"></a></span>
<span id="cb219-19"><a href="scraping-web.html#cb219-19"></a></span>
<span id="cb219-20"><a href="scraping-web.html#cb219-20"></a><span class="kw">library</span>(knitr)</span>
<span id="cb219-21"><a href="scraping-web.html#cb219-21"></a><span class="kw">kable</span>(<span class="kw">head</span>(res<span class="op">$</span>interest_over_time,<span class="dv">10</span>))</span></code></pre></div>
</div>
<div id="api-google-maps" class="section level3">
<h3><span class="header-section-number">2.10.3</span> API Google Maps</h3>
<p>R tiene la librari googleway que permite tener acceso a la API de google maps, es necesario una llave de autentificación.</p>
<p>Para la llave seguir los pasos en el <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=es-419">enlace</a></p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="scraping-web.html#cb220-1"></a><span class="co">#install.packages(&quot;googleway&quot;)</span></span>
<span id="cb220-2"><a href="scraping-web.html#cb220-2"></a><span class="kw">library</span>(googleway)</span>
<span id="cb220-3"><a href="scraping-web.html#cb220-3"></a>map_key &lt;-<span class="st"> &#39;xxx&#39;</span></span>
<span id="cb220-4"><a href="scraping-web.html#cb220-4"></a><span class="kw">google_map</span>(<span class="dt">key =</span> map_key,<span class="dt">location =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">16.5030161</span>,<span class="op">-</span><span class="fl">68.1292566</span>),<span class="dt">zoom =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add_traffic</span>()</span></code></pre></div>
</div>
</div>
<div id="ejercicios-propuestos-1" class="section level2">
<h2><span class="header-section-number">2.11</span> Ejercicios Propuestos</h2>
<ol style="list-style-type: decimal">
<li>Extraer la fecha, y el precio de compra y venta del dolar de la página <a href="https://www.bcb.gob.bo" class="uri">https://www.bcb.gob.bo</a></li>
<li>Usando la página <a href="https://www.trabajopolis.bo/" class="uri">https://www.trabajopolis.bo/</a> seleccionar un departamento y armar una base de dato de ofertas laborales</li>
<li>Armar una base de datos en base a la página <a href="https://www.infocasas.com.bo" class="uri">https://www.infocasas.com.bo</a></li>
<li>Explorar librarias API con acceso a Youtube y encontrar los 10 videos con más visualizaciones que incluyan a Bolivia en su titulo.</li>
<li>Explorar la libraria gtrendsR y explorar en que meses en Bolivia es mas frecuente la búsqueda de</li>
<li>Usar la informacion de worldometers y generar un gráfico de contagios por millon de los distintos paises.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introducción-al-big-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
