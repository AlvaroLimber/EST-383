<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Big Data en R | Big Data en R</title>
  <meta name="description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Big Data en R | Big Data en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  <meta name="github-repo" content="alvarolimber/EST-383" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Big Data en R | Big Data en R" />
  
  <meta name="twitter:description" content="Este libro esta destinado a la materia de Programación Estadística I de la carrera de Estadística de la Universidad Mayor de San Andres." />
  

<meta name="author" content="Alvaro Chirino Gutierrez" />


<meta name="date" content="2020-07-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introducción-al-big-data.html"/>
<link rel="next" href="r-y-spark.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audiencia"><i class="fa fa-check"></i>Audiencia</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#estructura-del-libro"><i class="fa fa-check"></i>Estructura del libro</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-y-acuerdos"><i class="fa fa-check"></i>Software y acuerdos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#bases-de-datos"><i class="fa fa-check"></i>Bases de datos</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#agradecimiento"><i class="fa fa-check"></i>Agradecimiento</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acerca-del-autor.html"><a href="acerca-del-autor.html"><i class="fa fa-check"></i>Acerca del autor</a></li>
<li class="chapter" data-level="1" data-path="introR.html"><a href="introR.html"><i class="fa fa-check"></i><b>1</b> Introducción a R</a><ul>
<li class="chapter" data-level="1.1" data-path="introR.html"><a href="introR.html#tipos-de-estructuras"><i class="fa fa-check"></i><b>1.1</b> Tipos de estructuras</a></li>
<li class="chapter" data-level="1.2" data-path="introR.html"><a href="introR.html#loops-y-condiciones"><i class="fa fa-check"></i><b>1.2</b> Loops y condiciones</a></li>
<li class="chapter" data-level="1.3" data-path="introR.html"><a href="introR.html#funciones"><i class="fa fa-check"></i><b>1.3</b> Funciones</a></li>
<li class="chapter" data-level="1.4" data-path="introR.html"><a href="introR.html#importacion-de-datos"><i class="fa fa-check"></i><b>1.4</b> Importacion de datos</a></li>
<li class="chapter" data-level="1.5" data-path="introR.html"><a href="introR.html#dataframe-y-exploración"><i class="fa fa-check"></i><b>1.5</b> Dataframe y exploración</a></li>
<li class="chapter" data-level="1.6" data-path="introR.html"><a href="introR.html#estadística-descriptiva"><i class="fa fa-check"></i><b>1.6</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="1.7" data-path="introR.html"><a href="introR.html#muestreo-e-inferencia"><i class="fa fa-check"></i><b>1.7</b> Muestreo e inferencia</a></li>
<li class="chapter" data-level="1.8" data-path="introR.html"><a href="introR.html#gráficos-de-origen"><i class="fa fa-check"></i><b>1.8</b> Gráficos de origen</a></li>
<li class="chapter" data-level="1.9" data-path="introR.html"><a href="introR.html#ggplot"><i class="fa fa-check"></i><b>1.9</b> ggplot</a></li>
<li class="chapter" data-level="1.10" data-path="introR.html"><a href="introR.html#r-markdown"><i class="fa fa-check"></i><b>1.10</b> R Markdown</a><ul>
<li class="chapter" data-level="1.10.1" data-path="introR.html"><a href="introR.html#instalación"><i class="fa fa-check"></i><b>1.10.1</b> Instalación</a></li>
<li class="chapter" data-level="1.10.2" data-path="introR.html"><a href="introR.html#yaml-header"><i class="fa fa-check"></i><b>1.10.2</b> YAML Header</a></li>
<li class="chapter" data-level="1.10.3" data-path="introR.html"><a href="introR.html#sintaxis-básica"><i class="fa fa-check"></i><b>1.10.3</b> Sintaxis básica</a></li>
<li class="chapter" data-level="1.10.4" data-path="introR.html"><a href="introR.html#tipos-de-documentos"><i class="fa fa-check"></i><b>1.10.4</b> Tipos de documentos</a></li>
<li class="chapter" data-level="1.10.5" data-path="introR.html"><a href="introR.html#chunks"><i class="fa fa-check"></i><b>1.10.5</b> Chunks</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="introR.html"><a href="introR.html#shiny"><i class="fa fa-check"></i><b>1.11</b> Shiny</a><ul>
<li class="chapter" data-level="1.11.1" data-path="introR.html"><a href="introR.html#ui"><i class="fa fa-check"></i><b>1.11.1</b> UI</a></li>
<li class="chapter" data-level="1.11.2" data-path="introR.html"><a href="introR.html#server"><i class="fa fa-check"></i><b>1.11.2</b> Server</a></li>
</ul></li>
<li class="chapter" data-level="1.12" data-path="introR.html"><a href="introR.html#ejercicios-propuestos"><i class="fa fa-check"></i><b>1.12</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scraping-web.html"><a href="scraping-web.html"><i class="fa fa-check"></i><b>2</b> Scraping Web</a><ul>
<li class="chapter" data-level="2.1" data-path="scraping-web.html"><a href="scraping-web.html#pasos-para-la-recopilación-de-información"><i class="fa fa-check"></i><b>2.1</b> Pasos para la recopilación de información</a></li>
<li class="chapter" data-level="2.2" data-path="scraping-web.html"><a href="scraping-web.html#tecnologías-de-diseminación-extracción-y-almacenamiento-web"><i class="fa fa-check"></i><b>2.2</b> Tecnologías de diseminación, extracción y almacenamiento Web</a></li>
<li class="chapter" data-level="2.3" data-path="scraping-web.html"><a href="scraping-web.html#librerías-en-r"><i class="fa fa-check"></i><b>2.3</b> Librerías en R</a></li>
<li class="chapter" data-level="2.4" data-path="scraping-web.html"><a href="scraping-web.html#librería-rvest"><i class="fa fa-check"></i><b>2.4</b> Librería rvest</a></li>
<li class="chapter" data-level="2.5" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ketal"><i class="fa fa-check"></i><b>2.5</b> Ejemplo: Ketal</a></li>
<li class="chapter" data-level="2.6" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-ministerio-de-educación"><i class="fa fa-check"></i><b>2.6</b> Ejemplo: Ministerio de Educación</a></li>
<li class="chapter" data-level="2.7" data-path="scraping-web.html"><a href="scraping-web.html#ejemplo-informacion-covid-19-en-bolivia"><i class="fa fa-check"></i><b>2.7</b> Ejemplo, informacion COVID-19 en Bolivia</a></li>
<li class="chapter" data-level="2.8" data-path="scraping-web.html"><a href="scraping-web.html#apis"><i class="fa fa-check"></i><b>2.8</b> APIs</a><ul>
<li class="chapter" data-level="2.8.1" data-path="scraping-web.html"><a href="scraping-web.html#api-banco-mundial"><i class="fa fa-check"></i><b>2.8.1</b> API Banco Mundial</a></li>
<li class="chapter" data-level="2.8.2" data-path="scraping-web.html"><a href="scraping-web.html#api-google-trends"><i class="fa fa-check"></i><b>2.8.2</b> API Google trends</a></li>
<li class="chapter" data-level="2.8.3" data-path="scraping-web.html"><a href="scraping-web.html#api-google-maps"><i class="fa fa-check"></i><b>2.8.3</b> API Google Maps</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="scraping-web.html"><a href="scraping-web.html#ejercicios-propuestos-1"><i class="fa fa-check"></i><b>2.9</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html"><i class="fa fa-check"></i><b>3</b> Introducción al Big Data</a><ul>
<li class="chapter" data-level="3.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#definiendo-al-big-data"><i class="fa fa-check"></i><b>3.1</b> Definiendo al Big Data</a></li>
<li class="chapter" data-level="3.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#las-5-v-en-el-big-data"><i class="fa fa-check"></i><b>3.2</b> Las 5 V en el Big Data</a></li>
<li class="chapter" data-level="3.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ciclo-de-vida-de-un-proyecto-de-análisis-de-datos"><i class="fa fa-check"></i><b>3.3</b> Ciclo de vida de un proyecto de análisis de datos</a></li>
<li class="chapter" data-level="3.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-big-data"><i class="fa fa-check"></i><b>3.4</b> Inferencia y Big Data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#descriptivo"><i class="fa fa-check"></i><b>3.4.1</b> Descriptivo</a></li>
<li class="chapter" data-level="3.4.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#causal"><i class="fa fa-check"></i><b>3.4.2</b> Causal</a></li>
<li class="chapter" data-level="3.4.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#predictivo"><i class="fa fa-check"></i><b>3.4.3</b> Predictivo</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#calidad-de-dato-y-big-data"><i class="fa fa-check"></i><b>3.5</b> Calidad de dato y Big Data</a></li>
<li class="chapter" data-level="3.6" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#captura-y-preservación"><i class="fa fa-check"></i><b>3.6</b> Captura y preservación</a><ul>
<li class="chapter" data-level="3.6.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#fuentes-convencionales"><i class="fa fa-check"></i><b>3.6.1</b> Fuentes convencionales</a></li>
<li class="chapter" data-level="3.6.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#datos-web-y-apis"><i class="fa fa-check"></i><b>3.6.2</b> Datos web y APIs</a></li>
<li class="chapter" data-level="3.6.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#record-linkage"><i class="fa fa-check"></i><b>3.6.3</b> Record Linkage</a></li>
<li class="chapter" data-level="3.6.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#bases-de-datos-1"><i class="fa fa-check"></i><b>3.6.4</b> Bases de datos</a></li>
<li class="chapter" data-level="3.6.5" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#programando-con-big-data"><i class="fa fa-check"></i><b>3.6.5</b> Programando con Big Data</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-y-modelado"><i class="fa fa-check"></i><b>3.7</b> Análisis y modelado</a><ul>
<li class="chapter" data-level="3.7.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#machine-learning"><i class="fa fa-check"></i><b>3.7.1</b> Machine learning</a></li>
<li class="chapter" data-level="3.7.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#análisis-de-texto-entendiendo-lo-que-la-gente-escribe"><i class="fa fa-check"></i><b>3.7.2</b> Análisis de texto: Entendiendo lo que la gente escribe</a></li>
<li class="chapter" data-level="3.7.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#networks"><i class="fa fa-check"></i><b>3.7.3</b> Networks</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#inferencia-y-ética"><i class="fa fa-check"></i><b>3.8</b> Inferencia y ética</a><ul>
<li class="chapter" data-level="3.8.1" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#información-y-visualización"><i class="fa fa-check"></i><b>3.8.1</b> Información y visualización</a></li>
<li class="chapter" data-level="3.8.2" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#error-e-inferencia"><i class="fa fa-check"></i><b>3.8.2</b> Error e inferencia</a></li>
<li class="chapter" data-level="3.8.3" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#privacidad-y-confidencialidad"><i class="fa fa-check"></i><b>3.8.3</b> Privacidad y confidencialidad</a></li>
<li class="chapter" data-level="3.8.4" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#workbooks"><i class="fa fa-check"></i><b>3.8.4</b> Workbooks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="introducción-al-big-data.html"><a href="introducción-al-big-data.html#ejercicios-propuestos-2"><i class="fa fa-check"></i><b>3.9</b> Ejercicios Propuestos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="big-data-en-r.html"><a href="big-data-en-r.html"><i class="fa fa-check"></i><b>4</b> Big Data en R</a><ul>
<li class="chapter" data-level="4.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#limitaciones-en-r"><i class="fa fa-check"></i><b>4.1</b> Limitaciones en R</a><ul>
<li class="chapter" data-level="4.1.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#memoria"><i class="fa fa-check"></i><b>4.1.1</b> Memoria</a></li>
<li class="chapter" data-level="4.1.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#velocidad-de-procesamiento"><i class="fa fa-check"></i><b>4.1.2</b> Velocidad de procesamiento</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#a-los-límites-de-la-memoria-y-más-allá"><i class="fa fa-check"></i><b>4.2</b> A los límites de la memoria y más allá</a><ul>
<li class="chapter" data-level="4.2.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#transformacion-y-agregación-de-datos-con-la-librería-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.1</b> Transformacion y agregación de datos con la librería ff y ffbase</a></li>
<li class="chapter" data-level="4.2.2" data-path="big-data-en-r.html"><a href="big-data-en-r.html#modelos-glm-con-la-las-librerias-ff-y-ffbase"><i class="fa fa-check"></i><b>4.2.2</b> Modelos GLM con la las librerias ff y ffbase</a></li>
<li class="chapter" data-level="4.2.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#expandiendo-la-memoria-con-la-libreria-bigmemory"><i class="fa fa-check"></i><b>4.2.3</b> Expandiendo la memoria con la libreria bigmemory</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="big-data-en-r.html"><a href="big-data-en-r.html#parallel-r"><i class="fa fa-check"></i><b>4.3</b> Parallel R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="big-data-en-r.html"><a href="big-data-en-r.html#libreria-parallel"><i class="fa fa-check"></i><b>4.3.1</b> Libreria parallel</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-y-spark.html"><a href="r-y-spark.html"><i class="fa fa-check"></i><b>5</b> R y Spark</a><ul>
<li class="chapter" data-level="5.1" data-path="r-y-spark.html"><a href="r-y-spark.html#introducción"><i class="fa fa-check"></i><b>5.1</b> Introducción</a><ul>
<li class="chapter" data-level="5.1.1" data-path="r-y-spark.html"><a href="r-y-spark.html#hadoop"><i class="fa fa-check"></i><b>5.1.1</b> Hadoop</a></li>
<li class="chapter" data-level="5.1.2" data-path="r-y-spark.html"><a href="r-y-spark.html#spark"><i class="fa fa-check"></i><b>5.1.2</b> Spark</a></li>
<li class="chapter" data-level="5.1.3" data-path="r-y-spark.html"><a href="r-y-spark.html#sparklyr"><i class="fa fa-check"></i><b>5.1.3</b> Sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="r-y-spark.html"><a href="r-y-spark.html#arrancando-spark"><i class="fa fa-check"></i><b>5.2</b> Arrancando Spark</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-y-spark.html"><a href="r-y-spark.html#prerequisitos"><i class="fa fa-check"></i><b>5.2.1</b> Prerequisitos</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-y-spark.html"><a href="r-y-spark.html#instalación-1"><i class="fa fa-check"></i><b>5.2.2</b> Instalación</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-y-spark.html"><a href="r-y-spark.html#creando-una-sesión-en-spark"><i class="fa fa-check"></i><b>5.2.3</b> Creando una sesión en Spark</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-y-spark.html"><a href="r-y-spark.html#interface-web"><i class="fa fa-check"></i><b>5.2.4</b> Interface web</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-y-spark.html"><a href="r-y-spark.html#análisis-con-spark"><i class="fa fa-check"></i><b>5.3</b> Análisis con Spark</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-y-spark.html"><a href="r-y-spark.html#importando-los-datos"><i class="fa fa-check"></i><b>5.3.1</b> Importando los datos</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-y-spark.html"><a href="r-y-spark.html#librería-dplyr-gramática-de-manipulación-de-datos"><i class="fa fa-check"></i><b>5.3.2</b> Librería DPLYR (Gramática de manipulación de datos)</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Big Data en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="big-data-en-r" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Big Data en R</h1>
<p>R en un software que se adapta perfectamente con las fases del ciclo de vida de los proyectos de datos, ofreciendo herramientas para cada una de ellas; Entre las mas interesantes, R Markdown, Shiny, sweave, etc.</p>
<p>Adicionalmente existen multiples librerias que permite trabajar con otros software, principalmente los asociados a bases de datos.</p>
<p><img src="images/r1.png" /></p>
<p>En el capitulo 1 se enfatiza el uso de R para el manejo, procesamiento y análisis de bases de datos, sumado a esto el conocimiento de distintas estadísticas en base a los cursos de formación, en este capitulo se buscar unir ambos topicos y explicar como usar el poder del modelado matematico y de datos en R, considerando bases de datos <strong>grandes</strong>, esto sin necesidad de recurrir a otros equipos.</p>
<p>Lo que se espera a partir de este capitulo es:</p>
<ul>
<li>Conocer las limitaciones de R para el Big Data y como ellas pueden resolverse</li>
<li>El uso de las librerias ff, ffbase, ffbase2, y bigmemory, para el manejo de la memoria del equipo</li>
<li>El uso de metodos estadisticos para objetos grandes en R, atraves de las librerias bigglm y ffbase</li>
<li>Mejorar la velocidad del procesamiento de datos con librerias que permiten la computación paralela (parallel computing)</li>
<li>Manipulación de datos más rápidos con el uso de la libreria data.table</li>
</ul>
<div id="limitaciones-en-r" class="section level2">
<h2><span class="header-section-number">4.1</span> Limitaciones en R</h2>
<p>A manera que uno va aprendiendo mas del R en la universidad o en el trabajo se valora cada vez mas la flexibilidad de R, su constante crecimiento, la ventaja de ser de codigo abierto, etc. Sin embargo, es importante tener en cuenta las limitaciones de R:</p>
<ul>
<li>Los datos se ajustan a la RAM</li>
<li>R es generalmente muy lento comparado con otros lenguajes</li>
</ul>
<div id="memoria" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Memoria</h3>
<ul>
<li>R permite trabajar con bases de datos que no superen el 50-60% de la RAM de la computadora</li>
<li>Existen soluciones en R sin tener que recurrir aun a plataformas como; Microsoft Azure, Amazon EC2, or
Google Cloud Platform.</li>
<li>Existe tambien la opción de trabajar con RStudio-Cloud, <a href="https://rstudio.cloud/plans/free" class="uri">https://rstudio.cloud/plans/free</a></li>
</ul>
</div>
<div id="velocidad-de-procesamiento" class="section level3">
<h3><span class="header-section-number">4.1.2</span> Velocidad de procesamiento</h3>
<ol style="list-style-type: decimal">
<li>R se considera un lenguaje interpretado y, como tal, su ejecución de código más lenta viene por definición.</li>
<li>Procesos linea por linea</li>
<li>El bajo rendimiento del código R puede deberse al hecho de que el lenguaje no está formalmente definido</li>
</ol>
</div>
</div>
<div id="a-los-límites-de-la-memoria-y-más-allá" class="section level2">
<h2><span class="header-section-number">4.2</span> A los límites de la memoria y más allá</h2>
<div id="transformacion-y-agregación-de-datos-con-la-librería-ff-y-ffbase" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Transformacion y agregación de datos con la librería ff y ffbase</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="big-data-en-r.html#cb126-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;ff&quot;</span>)</span>
<span id="cb126-2"><a href="big-data-en-r.html#cb126-2"></a><span class="kw">install.packages</span>(<span class="st">&quot;ffbase&quot;</span>)</span>
<span id="cb126-3"><a href="big-data-en-r.html#cb126-3"></a><span class="co">#install.packages(&quot;ffbase2&quot;) / github</span></span></code></pre></div>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="big-data-en-r.html#cb127-1"></a><span class="kw">library</span>(ff)</span>
<span id="cb127-2"><a href="big-data-en-r.html#cb127-2"></a><span class="kw">library</span>(ffbase)</span>
<span id="cb127-3"><a href="big-data-en-r.html#cb127-3"></a><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">ALVARO</span><span class="ch">\\</span><span class="st">Desktop</span><span class="ch">\\</span><span class="st">db_bolivia</span><span class="ch">\\</span><span class="st">bigdata&quot;</span>)</span>
<span id="cb127-4"><a href="big-data-en-r.html#cb127-4"></a>bd1&lt;-<span class="kw">read.csv</span>(<span class="st">&quot;200614COVID19MEXICO.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;,&quot;</span>,<span class="dt">header=</span>T)</span>
<span id="cb127-5"><a href="big-data-en-r.html#cb127-5"></a><span class="kw">object.size</span>(bd1)</span>
<span id="cb127-6"><a href="big-data-en-r.html#cb127-6"></a><span class="kw">head</span>(bd1)</span>
<span id="cb127-7"><a href="big-data-en-r.html#cb127-7"></a><span class="co">#paso 1: tener un directorio para archivos temporales de ff</span></span>
<span id="cb127-8"><a href="big-data-en-r.html#cb127-8"></a><span class="kw">system</span>(<span class="st">&quot;mkdir ffdf&quot;</span>)</span>
<span id="cb127-9"><a href="big-data-en-r.html#cb127-9"></a><span class="co">#paso 2: definir la carpeta temporal</span></span>
<span id="cb127-10"><a href="big-data-en-r.html#cb127-10"></a><span class="kw">options</span>(<span class="dt">fftempdir=</span><span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">ALVARO</span><span class="ch">\\</span><span class="st">Desktop</span><span class="ch">\\</span><span class="st">db_bolivia</span><span class="ch">\\</span><span class="st">bigdata</span><span class="ch">\\</span><span class="st">ffdf&quot;</span>)</span>
<span id="cb127-11"><a href="big-data-en-r.html#cb127-11"></a><span class="co">#paso 3: Cargar la base de datos</span></span>
<span id="cb127-12"><a href="big-data-en-r.html#cb127-12"></a>bd2&lt;-<span class="kw">read.csv.ffdf</span>(<span class="dt">file=</span><span class="st">&quot;200614COVID19MEXICO.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;,&quot;</span>,<span class="dt">header=</span>T,</span>
<span id="cb127-13"><a href="big-data-en-r.html#cb127-13"></a>                   <span class="dt">next.rows=</span><span class="dv">100000</span>,<span class="dt">colClasses=</span><span class="ot">NA</span>,<span class="dt">VERBOSE=</span>F)</span>
<span id="cb127-14"><a href="big-data-en-r.html#cb127-14"></a>bd3&lt;-<span class="kw">read.csv.ffdf</span>(<span class="dt">file=</span><span class="st">&quot;200614COVID19MEXICO.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;,&quot;</span>,<span class="dt">header=</span>T,</span>
<span id="cb127-15"><a href="big-data-en-r.html#cb127-15"></a>                   <span class="dt">first.rows=</span><span class="op">-</span><span class="dv">1</span>,<span class="dt">colClasses=</span><span class="ot">NA</span>,<span class="dt">VERBOSE=</span>T)</span>
<span id="cb127-16"><a href="big-data-en-r.html#cb127-16"></a>bd4&lt;-<span class="kw">read.csv.ffdf</span>(<span class="dt">file=</span><span class="st">&quot;200614COVID19MEXICO.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;,&quot;</span>,<span class="dt">header=</span>T,</span>
<span id="cb127-17"><a href="big-data-en-r.html#cb127-17"></a>                   <span class="dt">next.rows=</span><span class="dv">1000</span>,<span class="dt">colClasses=</span><span class="ot">NA</span>,<span class="dt">VERBOSE=</span>T)</span>
<span id="cb127-18"><a href="big-data-en-r.html#cb127-18"></a></span>
<span id="cb127-19"><a href="big-data-en-r.html#cb127-19"></a><span class="kw">object.size</span>(bd1)<span class="op">/</span><span class="dv">1000000</span> <span class="co"># CSV DE R</span></span>
<span id="cb127-20"><a href="big-data-en-r.html#cb127-20"></a><span class="kw">object.size</span>(bd2)<span class="op">/</span><span class="dv">1000000</span> <span class="co"># CSV.FFDF 100000</span></span>
<span id="cb127-21"><a href="big-data-en-r.html#cb127-21"></a><span class="kw">object.size</span>(bd3)<span class="op">/</span><span class="dv">1000000</span> <span class="co"># CSV.FFDF </span><span class="al">TODO</span></span>
<span id="cb127-22"><a href="big-data-en-r.html#cb127-22"></a><span class="kw">object.size</span>(bd4)<span class="op">/</span><span class="dv">1000000</span> <span class="co"># CSV.FFDF 1000</span></span>
<span id="cb127-23"><a href="big-data-en-r.html#cb127-23"></a></span>
<span id="cb127-24"><a href="big-data-en-r.html#cb127-24"></a><span class="co">#USO DE LAS FFDF</span></span>
<span id="cb127-25"><a href="big-data-en-r.html#cb127-25"></a><span class="kw">table</span>(bd2<span class="op">$</span>SEXO)</span>
<span id="cb127-26"><a href="big-data-en-r.html#cb127-26"></a><span class="kw">barplot</span>(<span class="kw">table</span>(bd2<span class="op">$</span>SEXO))</span>
<span id="cb127-27"><a href="big-data-en-r.html#cb127-27"></a><span class="kw">library</span>(tictoc)</span>
<span id="cb127-28"><a href="big-data-en-r.html#cb127-28"></a><span class="kw">tic</span>(<span class="st">&quot;R&quot;</span>)</span>
<span id="cb127-29"><a href="big-data-en-r.html#cb127-29"></a><span class="kw">table</span>(bd1<span class="op">$</span>SEXO)</span>
<span id="cb127-30"><a href="big-data-en-r.html#cb127-30"></a><span class="kw">toc</span>()</span>
<span id="cb127-31"><a href="big-data-en-r.html#cb127-31"></a></span>
<span id="cb127-32"><a href="big-data-en-r.html#cb127-32"></a><span class="kw">tic</span>(<span class="st">&quot;ffdf&quot;</span>)</span>
<span id="cb127-33"><a href="big-data-en-r.html#cb127-33"></a><span class="kw">table</span>(bd2<span class="op">$</span>SEXO)</span>
<span id="cb127-34"><a href="big-data-en-r.html#cb127-34"></a><span class="kw">toc</span>()</span>
<span id="cb127-35"><a href="big-data-en-r.html#cb127-35"></a></span>
<span id="cb127-36"><a href="big-data-en-r.html#cb127-36"></a><span class="kw">tic</span>(<span class="st">&quot;ffdf table&quot;</span>)</span>
<span id="cb127-37"><a href="big-data-en-r.html#cb127-37"></a><span class="kw">table.ff</span>(bd2<span class="op">$</span>SEXO)</span>
<span id="cb127-38"><a href="big-data-en-r.html#cb127-38"></a><span class="kw">toc</span>()</span>
<span id="cb127-39"><a href="big-data-en-r.html#cb127-39"></a></span>
<span id="cb127-40"><a href="big-data-en-r.html#cb127-40"></a><span class="co">#R: 1 G -&gt; </span></span>
<span id="cb127-41"><a href="big-data-en-r.html#cb127-41"></a><span class="co">#FFDF: 200 M -&gt; </span></span>
<span id="cb127-42"><a href="big-data-en-r.html#cb127-42"></a><span class="kw">class</span>(bd1)</span>
<span id="cb127-43"><a href="big-data-en-r.html#cb127-43"></a><span class="kw">class</span>(bd2)</span>
<span id="cb127-44"><a href="big-data-en-r.html#cb127-44"></a>bd5&lt;-<span class="kw">as.data.frame.ffdf</span>(bd2)</span>
<span id="cb127-45"><a href="big-data-en-r.html#cb127-45"></a><span class="kw">library</span>(Hmisc)</span>
<span id="cb127-46"><a href="big-data-en-r.html#cb127-46"></a><span class="kw">describe</span>(bd1)</span>
<span id="cb127-47"><a href="big-data-en-r.html#cb127-47"></a><span class="kw">describe</span>(bd5)</span>
<span id="cb127-48"><a href="big-data-en-r.html#cb127-48"></a><span class="kw">object.size</span>(bd5)</span>
<span id="cb127-49"><a href="big-data-en-r.html#cb127-49"></a><span class="kw">object.size</span>(bd1)</span>
<span id="cb127-50"><a href="big-data-en-r.html#cb127-50"></a><span class="kw">object.size</span>(bd2)</span></code></pre></div>
<p>Funciones para objetos ff</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="big-data-en-r.html#cb128-1"></a><span class="co">#sobre la bd2</span></span>
<span id="cb128-2"><a href="big-data-en-r.html#cb128-2"></a><span class="kw">library</span>(doBy)</span>
<span id="cb128-3"><a href="big-data-en-r.html#cb128-3"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb128-4"><a href="big-data-en-r.html#cb128-4"></a></span>
<span id="cb128-5"><a href="big-data-en-r.html#cb128-5"></a>res0&lt;-bd1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(PAIS_NACIONALIDAD,SEXO) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(EDAD))</span>
<span id="cb128-6"><a href="big-data-en-r.html#cb128-6"></a></span>
<span id="cb128-7"><a href="big-data-en-r.html#cb128-7"></a>bd2df&lt;-<span class="kw">as.data.frame.ffdf</span>(bd2)</span>
<span id="cb128-8"><a href="big-data-en-r.html#cb128-8"></a><span class="kw">object.size</span>(bd2df)</span>
<span id="cb128-9"><a href="big-data-en-r.html#cb128-9"></a></span>
<span id="cb128-10"><a href="big-data-en-r.html#cb128-10"></a>bd2df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(PAIS_NACIONALIDAD,SEXO) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(EDAD))</span>
<span id="cb128-11"><a href="big-data-en-r.html#cb128-11"></a></span>
<span id="cb128-12"><a href="big-data-en-r.html#cb128-12"></a><span class="kw">summaryBy</span>(EDAD<span class="op">~</span>PAIS_NACIONALIDAD<span class="op">+</span>SEXO,<span class="dt">FUN=</span>mean,<span class="dt">data=</span>bd1)</span>
<span id="cb128-13"><a href="big-data-en-r.html#cb128-13"></a></span>
<span id="cb128-14"><a href="big-data-en-r.html#cb128-14"></a><span class="kw">summaryBy</span>(EDAD<span class="op">~</span>PAIS_NACIONALIDAD<span class="op">+</span>SEXO,<span class="dt">FUN=</span>mean,<span class="dt">data=</span>bd2df)</span>
<span id="cb128-15"><a href="big-data-en-r.html#cb128-15"></a></span>
<span id="cb128-16"><a href="big-data-en-r.html#cb128-16"></a><span class="kw">tapply</span>(bd1<span class="op">$</span>EDAD, bd1<span class="op">$</span>PAIS_NACIONALIDAD, mean)</span>
<span id="cb128-17"><a href="big-data-en-r.html#cb128-17"></a></span>
<span id="cb128-18"><a href="big-data-en-r.html#cb128-18"></a><span class="kw">tapply</span>(bd2<span class="op">$</span>EDAD, bd2<span class="op">$</span>PAIS_NACIONALIDAD, mean)</span>
<span id="cb128-19"><a href="big-data-en-r.html#cb128-19"></a></span>
<span id="cb128-20"><a href="big-data-en-r.html#cb128-20"></a></span>
<span id="cb128-21"><a href="big-data-en-r.html#cb128-21"></a>res&lt;-<span class="kw">ffdfdply</span>(bd2,<span class="dt">split=</span>bd2<span class="op">$</span>PAIS_NACIONALIDAD,<span class="dt">FUN=</span><span class="cf">function</span>(x){</span>
<span id="cb128-22"><a href="big-data-en-r.html#cb128-22"></a>  <span class="kw">summaryBy</span>(EDAD<span class="op">~</span>PAIS_NACIONALIDAD<span class="op">+</span>SEXO,<span class="dt">FUN=</span>mean,<span class="dt">data=</span>x)</span>
<span id="cb128-23"><a href="big-data-en-r.html#cb128-23"></a>})</span>
<span id="cb128-24"><a href="big-data-en-r.html#cb128-24"></a><span class="kw">object.size</span>(res0)</span>
<span id="cb128-25"><a href="big-data-en-r.html#cb128-25"></a><span class="kw">object.size</span>(res)</span>
<span id="cb128-26"><a href="big-data-en-r.html#cb128-26"></a></span>
<span id="cb128-27"><a href="big-data-en-r.html#cb128-27"></a></span>
<span id="cb128-28"><a href="big-data-en-r.html#cb128-28"></a>ss1&lt;-<span class="kw">subset</span>(bd1,EDAD<span class="op">&gt;</span><span class="dv">60</span>)</span>
<span id="cb128-29"><a href="big-data-en-r.html#cb128-29"></a>ss2&lt;-<span class="kw">subset</span>(bd2,EDAD<span class="op">&gt;</span><span class="dv">60</span>)</span>
<span id="cb128-30"><a href="big-data-en-r.html#cb128-30"></a>ss3&lt;-<span class="kw">subset.ffdf</span>(bd2,EDAD<span class="op">&gt;</span><span class="dv">60</span>)</span>
<span id="cb128-31"><a href="big-data-en-r.html#cb128-31"></a></span>
<span id="cb128-32"><a href="big-data-en-r.html#cb128-32"></a>aaa&lt;-bd1</span>
<span id="cb128-33"><a href="big-data-en-r.html#cb128-33"></a>bbb&lt;-bd1</span>
<span id="cb128-34"><a href="big-data-en-r.html#cb128-34"></a><span class="kw">rm</span>(aaa,bbb)</span>
<span id="cb128-35"><a href="big-data-en-r.html#cb128-35"></a><span class="co">#memoria en R</span></span>
<span id="cb128-36"><a href="big-data-en-r.html#cb128-36"></a><span class="kw">object.size</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb128-37"><a href="big-data-en-r.html#cb128-37"></a><span class="kw">memory.size</span>()</span>
<span id="cb128-38"><a href="big-data-en-r.html#cb128-38"></a><span class="kw">memory.limit</span>()</span>
<span id="cb128-39"><a href="big-data-en-r.html#cb128-39"></a>(<span class="kw">memory.size</span>()<span class="op">/</span><span class="kw">memory.limit</span>())<span class="op">*</span><span class="dv">100</span></span>
<span id="cb128-40"><a href="big-data-en-r.html#cb128-40"></a><span class="kw">memory.profile</span>()</span>
<span id="cb128-41"><a href="big-data-en-r.html#cb128-41"></a></span>
<span id="cb128-42"><a href="big-data-en-r.html#cb128-42"></a><span class="co">#guardar objetos ffdf</span></span>
<span id="cb128-43"><a href="big-data-en-r.html#cb128-43"></a><span class="kw">save.ffdf</span>(res)</span>
<span id="cb128-44"><a href="big-data-en-r.html#cb128-44"></a><span class="kw">rm</span>(res)</span>
<span id="cb128-45"><a href="big-data-en-r.html#cb128-45"></a><span class="kw">load.ffdf</span>(<span class="st">&quot;ffdb&quot;</span>)</span>
<span id="cb128-46"><a href="big-data-en-r.html#cb128-46"></a><span class="co">#convirtiendo a ff</span></span>
<span id="cb128-47"><a href="big-data-en-r.html#cb128-47"></a>dd&lt;-<span class="kw">as.ffdf</span>(bd1)</span>
<span id="cb128-48"><a href="big-data-en-r.html#cb128-48"></a></span>
<span id="cb128-49"><a href="big-data-en-r.html#cb128-49"></a><span class="co">#forma lenta</span></span>
<span id="cb128-50"><a href="big-data-en-r.html#cb128-50"></a>bd1<span class="op">$</span>FECHA_ACTUALIZACION&lt;-<span class="kw">as.factor</span>(bd1<span class="op">$</span>FECHA_ACTUALIZACION)</span>
<span id="cb128-51"><a href="big-data-en-r.html#cb128-51"></a><span class="kw">str</span>(bd1)</span>
<span id="cb128-52"><a href="big-data-en-r.html#cb128-52"></a></span>
<span id="cb128-53"><a href="big-data-en-r.html#cb128-53"></a><span class="co">#forma rapida</span></span>
<span id="cb128-54"><a href="big-data-en-r.html#cb128-54"></a>i &lt;-<span class="st"> </span><span class="kw">sapply</span>(bd1, is.character)</span>
<span id="cb128-55"><a href="big-data-en-r.html#cb128-55"></a>bd1[,i] &lt;-<span class="st"> </span><span class="kw">lapply</span>(bd1[,i], as.factor)</span>
<span id="cb128-56"><a href="big-data-en-r.html#cb128-56"></a><span class="kw">str</span>(bd1)</span>
<span id="cb128-57"><a href="big-data-en-r.html#cb128-57"></a>dd&lt;-<span class="kw">as.ffdf</span>(bd1)</span></code></pre></div>
</div>
<div id="modelos-glm-con-la-las-librerias-ff-y-ffbase" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Modelos GLM con la las librerias ff y ffbase</h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="big-data-en-r.html#cb129-1"></a><span class="co">#install.packages(&quot;biglm&quot;)</span></span>
<span id="cb129-2"><a href="big-data-en-r.html#cb129-2"></a><span class="kw">library</span>(biglm)</span>
<span id="cb129-3"><a href="big-data-en-r.html#cb129-3"></a></span>
<span id="cb129-4"><a href="big-data-en-r.html#cb129-4"></a>model1&lt;-<span class="kw">lm</span>(EDAD<span class="op">~</span>UCI,<span class="dt">data =</span> bd1)</span>
<span id="cb129-5"><a href="big-data-en-r.html#cb129-5"></a>model2&lt;-<span class="kw">lm</span>(EDAD<span class="op">~</span>UCI,<span class="dt">data =</span> bd2)</span>
<span id="cb129-6"><a href="big-data-en-r.html#cb129-6"></a>model3&lt;-<span class="kw">bigglm.ffdf</span>(EDAD<span class="op">~</span>UCI,<span class="dt">data =</span> bd2)</span>
<span id="cb129-7"><a href="big-data-en-r.html#cb129-7"></a><span class="kw">summary</span>(model1)</span>
<span id="cb129-8"><a href="big-data-en-r.html#cb129-8"></a><span class="kw">summary</span>(model2)</span>
<span id="cb129-9"><a href="big-data-en-r.html#cb129-9"></a><span class="kw">summary</span>(model3)</span></code></pre></div>
</div>
<div id="expandiendo-la-memoria-con-la-libreria-bigmemory" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Expandiendo la memoria con la libreria bigmemory</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="big-data-en-r.html#cb130-1"></a><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</span>
<span id="cb130-2"><a href="big-data-en-r.html#cb130-2"></a><span class="kw">library</span>(bigmemory)</span>
<span id="cb130-3"><a href="big-data-en-r.html#cb130-3"></a><span class="co">#limitación de bigmemory, todos los variables de la base de datos de interés deben ser numéricas.</span></span>
<span id="cb130-4"><a href="big-data-en-r.html#cb130-4"></a><span class="kw">load</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">Users</span><span class="ch">\\</span><span class="st">ALVARO</span><span class="ch">\\</span><span class="st">Documents</span><span class="ch">\\</span><span class="st">GitHub</span><span class="ch">\\</span><span class="st">EST-383</span><span class="ch">\\</span><span class="st">data</span><span class="ch">\\</span><span class="st">oct20.RData&quot;</span>)</span>
<span id="cb130-5"><a href="big-data-en-r.html#cb130-5"></a>bd1&lt;-computo[,<span class="dv">13</span><span class="op">:</span><span class="dv">25</span>]</span>
<span id="cb130-6"><a href="big-data-en-r.html#cb130-6"></a><span class="kw">str</span>(bd1)</span>
<span id="cb130-7"><a href="big-data-en-r.html#cb130-7"></a><span class="kw">object.size</span>(bd1)<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></span>
<span id="cb130-8"><a href="big-data-en-r.html#cb130-8"></a></span>
<span id="cb130-9"><a href="big-data-en-r.html#cb130-9"></a>bd2&lt;-<span class="kw">as.big.matrix</span>(<span class="kw">as.matrix</span>(bd1))</span>
<span id="cb130-10"><a href="big-data-en-r.html#cb130-10"></a></span>
<span id="cb130-11"><a href="big-data-en-r.html#cb130-11"></a><span class="kw">object.size</span>(bd1)</span>
<span id="cb130-12"><a href="big-data-en-r.html#cb130-12"></a><span class="kw">object.size</span>(bd2)</span>
<span id="cb130-13"><a href="big-data-en-r.html#cb130-13"></a></span>
<span id="cb130-14"><a href="big-data-en-r.html#cb130-14"></a><span class="kw">object.size</span>(bd1)<span class="op">/</span><span class="kw">object.size</span>(bd2)</span>
<span id="cb130-15"><a href="big-data-en-r.html#cb130-15"></a></span>
<span id="cb130-16"><a href="big-data-en-r.html#cb130-16"></a><span class="co">#xx&lt;-read.big.matrix(&quot;.csv&quot;,sep=&quot;,&quot;)</span></span>
<span id="cb130-17"><a href="big-data-en-r.html#cb130-17"></a><span class="co">#alternativamente read.big.matrix</span></span>
<span id="cb130-18"><a href="big-data-en-r.html#cb130-18"></a><span class="kw">dim</span>(bd2)</span>
<span id="cb130-19"><a href="big-data-en-r.html#cb130-19"></a></span>
<span id="cb130-20"><a href="big-data-en-r.html#cb130-20"></a><span class="kw">dimnames</span>(bd2)</span>
<span id="cb130-21"><a href="big-data-en-r.html#cb130-21"></a></span>
<span id="cb130-22"><a href="big-data-en-r.html#cb130-22"></a><span class="kw">head</span>(bd2)</span>
<span id="cb130-23"><a href="big-data-en-r.html#cb130-23"></a><span class="kw">summary</span>(bd1)</span>
<span id="cb130-24"><a href="big-data-en-r.html#cb130-24"></a><span class="kw">summary</span>(bd2)</span>
<span id="cb130-25"><a href="big-data-en-r.html#cb130-25"></a><span class="kw">mean</span>(bd2[,<span class="dv">1</span>])</span>
<span id="cb130-26"><a href="big-data-en-r.html#cb130-26"></a><span class="kw">summary</span>(bd2[,<span class="dv">2</span>])</span>
<span id="cb130-27"><a href="big-data-en-r.html#cb130-27"></a></span>
<span id="cb130-28"><a href="big-data-en-r.html#cb130-28"></a><span class="kw">names</span>(bd2)</span>
<span id="cb130-29"><a href="big-data-en-r.html#cb130-29"></a><span class="kw">dimnames</span>(bd2)</span>
<span id="cb130-30"><a href="big-data-en-r.html#cb130-30"></a><span class="kw">lm</span>(CC<span class="op">~</span>MNR,<span class="dt">data=</span>bd2)</span>
<span id="cb130-31"><a href="big-data-en-r.html#cb130-31"></a></span>
<span id="cb130-32"><a href="big-data-en-r.html#cb130-32"></a><span class="kw">library</span>(bigtabulate)</span>
<span id="cb130-33"><a href="big-data-en-r.html#cb130-33"></a><span class="kw">library</span>(biganalytics)</span>
<span id="cb130-34"><a href="big-data-en-r.html#cb130-34"></a><span class="kw">library</span>(biglm)</span>
<span id="cb130-35"><a href="big-data-en-r.html#cb130-35"></a><span class="kw">library</span>(bigstatsr)</span>
<span id="cb130-36"><a href="big-data-en-r.html#cb130-36"></a><span class="kw">library</span>(bigalgebra) <span class="co"># salio de R el 2020</span></span>
<span id="cb130-37"><a href="big-data-en-r.html#cb130-37"></a><span class="kw">library</span>(bigpca)<span class="co"># salio el 2018 de R</span></span>
<span id="cb130-38"><a href="big-data-en-r.html#cb130-38"></a>reg0&lt;-<span class="kw">bigglm.big.matrix</span>(CC<span class="op">~</span>MNR,<span class="dt">data=</span>bd2)</span>
<span id="cb130-39"><a href="big-data-en-r.html#cb130-39"></a><span class="kw">summary</span>(reg0)</span>
<span id="cb130-40"><a href="big-data-en-r.html#cb130-40"></a>reg&lt;-<span class="kw">bigglm.big.matrix</span>(CC<span class="op">~</span>FPV,<span class="dt">data=</span>bd2)</span>
<span id="cb130-41"><a href="big-data-en-r.html#cb130-41"></a><span class="kw">summary</span>(reg)</span>
<span id="cb130-42"><a href="big-data-en-r.html#cb130-42"></a><span class="kw">class</span>(bd2)</span></code></pre></div>
</div>
</div>
<div id="parallel-r" class="section level2">
<h2><span class="header-section-number">4.3</span> Parallel R</h2>
<p>Esta seccion se enfoca en los métodos de computación paralelo, de tal forma que se pueda controlara la paralelizacion en una sola maquina.</p>
<p>El objetivo es poder aprovechar los cores que tiene disponible los PC en la actualidad, R por defecto solo trabaja en una.</p>
<ul>
<li><a href="https://cran.r-project.org/web/views/HighPerformanceComputing.html">Recursos online En R</a></li>
<li>Un libro acerca del tema <a href="https://www.oreilly.com/library/view/parallel-r/9781449317850/">(aquí)</a></li>
</ul>
<p>Antes una función para calcular el tiempo de procesamiento.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="big-data-en-r.html#cb131-1"></a><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</span>
<span id="cb131-2"><a href="big-data-en-r.html#cb131-2"></a>teval&lt;-<span class="cf">function</span>(...){</span>
<span id="cb131-3"><a href="big-data-en-r.html#cb131-3"></a>  <span class="kw">gc</span>()</span>
<span id="cb131-4"><a href="big-data-en-r.html#cb131-4"></a>  start&lt;-<span class="kw">proc.time</span>()</span>
<span id="cb131-5"><a href="big-data-en-r.html#cb131-5"></a>  result&lt;-<span class="kw">eval</span>(...)</span>
<span id="cb131-6"><a href="big-data-en-r.html#cb131-6"></a>  finish&lt;-<span class="kw">proc.time</span>()</span>
<span id="cb131-7"><a href="big-data-en-r.html#cb131-7"></a>  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">Duration=</span>finish<span class="op">-</span>start,<span class="dt">Result=</span>result))</span>
<span id="cb131-8"><a href="big-data-en-r.html#cb131-8"></a>  }</span></code></pre></div>
<p>Veamos el rendimiento de lo visto antes.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="big-data-en-r.html#cb132-1"></a><span class="kw">library</span>(ff)</span>
<span id="cb132-2"><a href="big-data-en-r.html#cb132-2"></a><span class="kw">library</span>(ffbase)</span>
<span id="cb132-3"><a href="big-data-en-r.html#cb132-3"></a><span class="kw">library</span>(bigmemory)</span>
<span id="cb132-4"><a href="big-data-en-r.html#cb132-4"></a><span class="kw">library</span>(biganalytics)</span>
<span id="cb132-5"><a href="big-data-en-r.html#cb132-5"></a>mr&lt;-<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">10000000</span><span class="op">*</span><span class="dv">10</span>),<span class="dt">nrow =</span> <span class="dv">10000000</span>,<span class="dt">ncol=</span><span class="dv">10</span>)</span>
<span id="cb132-6"><a href="big-data-en-r.html#cb132-6"></a>mr&lt;-<span class="kw">cbind</span>(mr,<span class="dt">binom=</span><span class="kw">rbinom</span>(<span class="dv">10000000</span>,<span class="dv">5</span>,<span class="fl">0.7</span>))</span>
<span id="cb132-7"><a href="big-data-en-r.html#cb132-7"></a>mbm&lt;-<span class="kw">as.big.matrix</span>(mr)</span>
<span id="cb132-8"><a href="big-data-en-r.html#cb132-8"></a>mff&lt;-<span class="kw">as.ffdf</span>(<span class="kw">as.data.frame</span>(mr))</span>
<span id="cb132-9"><a href="big-data-en-r.html#cb132-9"></a></span>
<span id="cb132-10"><a href="big-data-en-r.html#cb132-10"></a><span class="kw">class</span>(mr)</span>
<span id="cb132-11"><a href="big-data-en-r.html#cb132-11"></a><span class="kw">class</span>(mbm)</span>
<span id="cb132-12"><a href="big-data-en-r.html#cb132-12"></a><span class="kw">class</span>(mff)</span>
<span id="cb132-13"><a href="big-data-en-r.html#cb132-13"></a></span>
<span id="cb132-14"><a href="big-data-en-r.html#cb132-14"></a><span class="kw">object.size</span>(mr)<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></span>
<span id="cb132-15"><a href="big-data-en-r.html#cb132-15"></a><span class="kw">object.size</span>(mbm)<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></span>
<span id="cb132-16"><a href="big-data-en-r.html#cb132-16"></a><span class="kw">object.size</span>(mff)<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></span>
<span id="cb132-17"><a href="big-data-en-r.html#cb132-17"></a></span>
<span id="cb132-18"><a href="big-data-en-r.html#cb132-18"></a><span class="kw">teval</span>(<span class="kw">colMeans</span>(mr))</span>
<span id="cb132-19"><a href="big-data-en-r.html#cb132-19"></a><span class="kw">teval</span>(<span class="kw">colmean</span>(mbm))</span>
<span id="cb132-20"><a href="big-data-en-r.html#cb132-20"></a><span class="co">#teval(colMeans(mff))</span></span>
<span id="cb132-21"><a href="big-data-en-r.html#cb132-21"></a></span>
<span id="cb132-22"><a href="big-data-en-r.html#cb132-22"></a><span class="kw">teval</span>(<span class="kw">apply</span>(mr,<span class="dv">2</span>,mean))</span>
<span id="cb132-23"><a href="big-data-en-r.html#cb132-23"></a><span class="kw">teval</span>(<span class="kw">apply</span>(mbm,<span class="dv">2</span>,mean))</span>
<span id="cb132-24"><a href="big-data-en-r.html#cb132-24"></a><span class="kw">teval</span>(<span class="kw">apply</span>(mff,<span class="dv">2</span>,mean))</span>
<span id="cb132-25"><a href="big-data-en-r.html#cb132-25"></a></span>
<span id="cb132-26"><a href="big-data-en-r.html#cb132-26"></a>resul&lt;-<span class="kw">list</span>()</span>
<span id="cb132-27"><a href="big-data-en-r.html#cb132-27"></a><span class="kw">teval</span>(</span>
<span id="cb132-28"><a href="big-data-en-r.html#cb132-28"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(mff)){</span>
<span id="cb132-29"><a href="big-data-en-r.html#cb132-29"></a> resul[[i]]&lt;-<span class="kw">mean.ff</span>(mff[[i]]) </span>
<span id="cb132-30"><a href="big-data-en-r.html#cb132-30"></a>}</span>
<span id="cb132-31"><a href="big-data-en-r.html#cb132-31"></a>)</span>
<span id="cb132-32"><a href="big-data-en-r.html#cb132-32"></a><span class="kw">teval</span>(<span class="kw">sapply</span>(mff,mean))</span>
<span id="cb132-33"><a href="big-data-en-r.html#cb132-33"></a></span>
<span id="cb132-34"><a href="big-data-en-r.html#cb132-34"></a></span>
<span id="cb132-35"><a href="big-data-en-r.html#cb132-35"></a><span class="kw">teval</span>(<span class="kw">tapply</span>(mr[,<span class="dv">1</span>], mr[,<span class="dv">11</span>], mean))</span>
<span id="cb132-36"><a href="big-data-en-r.html#cb132-36"></a><span class="kw">teval</span>(<span class="kw">tapply</span>(mbm[,<span class="dv">1</span>], mbm[,<span class="dv">11</span>], mean))</span>
<span id="cb132-37"><a href="big-data-en-r.html#cb132-37"></a><span class="kw">teval</span>(<span class="kw">tapply</span>(mff[[<span class="dv">1</span>]], mff[[<span class="dv">11</span>]], mean.ff))</span>
<span id="cb132-38"><a href="big-data-en-r.html#cb132-38"></a></span>
<span id="cb132-39"><a href="big-data-en-r.html#cb132-39"></a>aux&lt;-<span class="kw">matrix</span>(<span class="ot">NA</span>,<span class="dv">6</span>,<span class="dv">10</span>)</span>
<span id="cb132-40"><a href="big-data-en-r.html#cb132-40"></a><span class="kw">teval</span>(</span>
<span id="cb132-41"><a href="big-data-en-r.html#cb132-41"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>){</span>
<span id="cb132-42"><a href="big-data-en-r.html#cb132-42"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="kw">unique</span>(mff[,<span class="dv">11</span>])){</span>
<span id="cb132-43"><a href="big-data-en-r.html#cb132-43"></a>    aux[j<span class="op">+</span><span class="dv">1</span>,i]&lt;-<span class="kw">mean</span>(mff[mff[,<span class="dv">11</span>]<span class="op">==</span>j,i])  </span>
<span id="cb132-44"><a href="big-data-en-r.html#cb132-44"></a>  }  </span>
<span id="cb132-45"><a href="big-data-en-r.html#cb132-45"></a>}</span>
<span id="cb132-46"><a href="big-data-en-r.html#cb132-46"></a>)</span></code></pre></div>
<div id="libreria-parallel" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Libreria parallel</h3>
<p>Ahora sí, veamos la librería parallel y snow.</p>
<ul>
<li>Disponible desde la versión 2.14.0</li>
<li>Existen otras populares; multicore, snow (Simple Network of
Workstations). La primera descontinuada y la segunda limitada.</li>
<li>El manual <a href="https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf" class="uri">https://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf</a></li>
</ul>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="big-data-en-r.html#cb133-1"></a><span class="kw">library</span>(parallel)</span>
<span id="cb133-2"><a href="big-data-en-r.html#cb133-2"></a><span class="kw">library</span>(snow)</span>
<span id="cb133-3"><a href="big-data-en-r.html#cb133-3"></a><span class="co">#funciones propias </span></span>
<span id="cb133-4"><a href="big-data-en-r.html#cb133-4"></a><span class="kw">mclapply</span>()<span class="co">#no funciona completamente en windows</span></span>
<span id="cb133-5"><a href="big-data-en-r.html#cb133-5"></a><span class="kw">parLapply</span>()</span>
<span id="cb133-6"><a href="big-data-en-r.html#cb133-6"></a><span class="kw">library</span>(<span class="dt">help=</span>parallel)</span>
<span id="cb133-7"><a href="big-data-en-r.html#cb133-7"></a><span class="kw">library</span>(<span class="dt">help=</span>snow)</span>
<span id="cb133-8"><a href="big-data-en-r.html#cb133-8"></a><span class="co">#viendo los cores disponibles</span></span>
<span id="cb133-9"><a href="big-data-en-r.html#cb133-9"></a><span class="kw">detectCores</span>()</span>
<span id="cb133-10"><a href="big-data-en-r.html#cb133-10"></a><span class="co">#definiendo un cluster de trabajo</span></span>
<span id="cb133-11"><a href="big-data-en-r.html#cb133-11"></a><span class="co">#SOCK usa Rscript para lanzar más copias de R (en el mismo host u opcionalmente en otro lugar)</span></span>
<span id="cb133-12"><a href="big-data-en-r.html#cb133-12"></a><span class="co">#FORK makeForkCluster bifurca a los trabajadores en el host actual (que hereda el entorno de la sesión actual)  (NO WINDOWS)</span></span>
<span id="cb133-13"><a href="big-data-en-r.html#cb133-13"></a></span>
<span id="cb133-14"><a href="big-data-en-r.html#cb133-14"></a>cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">3</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb133-15"><a href="big-data-en-r.html#cb133-15"></a><span class="kw">stopCluster</span>(cl)</span>
<span id="cb133-16"><a href="big-data-en-r.html#cb133-16"></a></span>
<span id="cb133-17"><a href="big-data-en-r.html#cb133-17"></a>cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">2</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb133-18"><a href="big-data-en-r.html#cb133-18"></a><span class="kw">teval</span>(<span class="kw">parApply</span>(cl,mr,<span class="dv">2</span>,mean))</span>
<span id="cb133-19"><a href="big-data-en-r.html#cb133-19"></a><span class="kw">stopCluster</span>(cl)</span>
<span id="cb133-20"><a href="big-data-en-r.html#cb133-20"></a></span>
<span id="cb133-21"><a href="big-data-en-r.html#cb133-21"></a>cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">3</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb133-22"><a href="big-data-en-r.html#cb133-22"></a><span class="kw">teval</span>(<span class="kw">parApply</span>(cl,mr,<span class="dv">2</span>,mean))</span>
<span id="cb133-23"><a href="big-data-en-r.html#cb133-23"></a><span class="kw">stopCluster</span>(cl)</span>
<span id="cb133-24"><a href="big-data-en-r.html#cb133-24"></a></span>
<span id="cb133-25"><a href="big-data-en-r.html#cb133-25"></a>cl &lt;-<span class="st"> </span><span class="kw">makeCluster</span>(<span class="dv">4</span>, <span class="dt">type =</span> <span class="st">&quot;SOCK&quot;</span>)</span>
<span id="cb133-26"><a href="big-data-en-r.html#cb133-26"></a><span class="kw">teval</span>(<span class="kw">parApply</span>(cl,mr,<span class="dv">2</span>,mean))</span>
<span id="cb133-27"><a href="big-data-en-r.html#cb133-27"></a><span class="kw">stopCluster</span>(cl)</span>
<span id="cb133-28"><a href="big-data-en-r.html#cb133-28"></a></span>
<span id="cb133-29"><a href="big-data-en-r.html#cb133-29"></a><span class="co">#parApply(cl,mff[[1]],1,mean)</span></span>
<span id="cb133-30"><a href="big-data-en-r.html#cb133-30"></a><span class="co">#parApply(cl,mbm,2,mean)</span></span>
<span id="cb133-31"><a href="big-data-en-r.html#cb133-31"></a></span>
<span id="cb133-32"><a href="big-data-en-r.html#cb133-32"></a>A&lt;-<span class="kw">matrix</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">6</span>,<span class="dv">10</span>)</span>
<span id="cb133-33"><a href="big-data-en-r.html#cb133-33"></a>B&lt;-<span class="kw">matrix</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">6</span>,<span class="dv">10</span>)</span>
<span id="cb133-34"><a href="big-data-en-r.html#cb133-34"></a>C&lt;-<span class="kw">matrix</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">6</span>,<span class="dv">10</span>)</span>
<span id="cb133-35"><a href="big-data-en-r.html#cb133-35"></a><span class="kw">mclapply</span>(<span class="dt">X=</span><span class="kw">list</span>(A,B,C),<span class="dt">FUN=</span>mean,<span class="dt">mc.preschedule =</span> F,<span class="dt">affinity.list =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb133-36"><a href="big-data-en-r.html#cb133-36"></a><span class="kw">mclapply</span>(<span class="dt">X=</span><span class="kw">list</span>(A,B,C),<span class="dt">FUN=</span>mean)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introducción-al-big-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-y-spark.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
